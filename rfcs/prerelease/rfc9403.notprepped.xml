<?xml version="1.0" encoding="UTF-8"?>

<!-- draft submitted in xml v3 -->

<!DOCTYPE rfc [
  <!ENTITY nbsp    "&#160;">
  <!ENTITY zwsp   "&#8203;">
  <!ENTITY nbhy   "&#8209;">
  <!ENTITY wj     "&#8288;">
]>

<rfc xmlns:xi="http://www.w3.org/2001/XInclude" submissionType="IETF" category="std" consensus="true" ipr="trust200902" docName="draft-ietf-rtgwg-yang-rib-extend-24" number="9403" obsoletes="" updates="" xml:lang="en" tocInclude="true" symRefs="true" sortRefs="true" version="3">


  <!-- xml2rfc v2v3 conversion 3.17.1 -->
  <front>
    <title abbrev="YANG RIB-EXT">A YANG Data Model for RIB Extensions</title>

    <seriesInfo name="RFC" value="9403"/>
    <author initials="A." surname="Lindem" fullname="Acee Lindem">
      <organization>LabN Consulting, L.L.C.</organization>
      <address>
        <postal>
          <street>301 Midenhall Way</street>
          <city>Cary</city>
          <region>NC</region>
          <country>United States of America</country>
          <code>27513</code>
        </postal>
        <email>acee.ietf@gmail.com</email>
      </address>
    </author>
    <author fullname="Yingzhen Qu" initials="Y" surname="Qu">
      <organization>Futurewei Technologies</organization>
      <address>
        <postal>
          <street>2330 Central Expressway</street>
          <city>Santa Clara</city>
          <region>CA</region>
          <code>95050</code>
          <country>United States of America</country>
        </postal>
        <email>yingzhen.qu@futurewei.com</email>
      </address>
    </author>
    <date year="2023" month="November" />
    <area>rtg</area>
    <workgroup>rtgwg</workgroup>

<keyword>configuration</keyword>
<keyword>IPv6 Router Advertisements</keyword>
<keyword>NETCONF</keyword>
<keyword>RESTCONF</keyword>
<keyword>YANG</keyword>
<keyword>Routing</keyword>
<keyword>RIB</keyword>

    <abstract>
      <t>A Routing Information Base (RIB) is a list of routes and their
        corresponding administrative data and operational state.</t>
      <t>RFC 8349 defines the
     basic building blocks for the RIB data model, and this model augments it to support
     multiple next hops (aka paths) for each route as well as additional
     attributes.</t>
    </abstract>
  </front>
  <middle>
    <section numbered="true" toc="default">
      <name>Introduction</name>
      <t>This document defines a YANG data model <xref target="RFC7950" format="default"/>
  that extends the RIB data model defined in the ietf-routing YANG module
  <xref target="RFC8349" format="default"/> with more route attributes.</t>
      <t>A RIB is a collection of routes with attributes controlled and
  manipulated by control plane protocols. Each RIB contains only routes
  of one address family <xref target="RFC8349" format="default"/>. Within a protocol,
routes are selected based on the metrics in use by that protocol, and
the protocol installs the routes to the RIB. The RIB selects the preferred or active
route by comparing the route preference (aka administrative distance) of
the candidate routes installed by different protocols.</t>
      <t>The module defined in this document extends the RIB to support more
route attributes, such as multiple next hops, route metrics, and
administrative tags.</t>
      <t> The YANG modules defined and discussed in this document conform to the Network Management
Datastore Architecture (NMDA) <xref target="RFC8342"/>.</t>
    </section>
    <section numbered="true" toc="default">
      <name>Terminology and Notation</name>
      <t>The following terms are defined in <xref target="RFC8342" format="default"/>:
      </t>
      <ul spacing="normal">
        <li>configuration</li>
        <li>system state</li>
        <li>operational state</li>
      </ul>
      <t>The following terms are defined in <xref target="RFC7950" format="default"/>:
      </t>
      <ul spacing="normal">
        <li>action</li>
        <li>augment</li>
        <li>container</li>
        <li>container with presence</li>
        <li>data model</li>
        <li>data node</li>
        <li>leaf</li>
        <li>list</li>
        <li>mandatory node</li>
        <li>module</li>
        <li>schema tree</li>
      </ul>
      <t>The following term is defined in <xref target="RFC8349" sectionFormat="comma" section="5.2"/>:
      </t>
      <ul spacing="normal">
        <li>RIB</li>
      </ul>
      <section numbered="true" toc="default">
        <name>Tree Diagrams</name>
        <t>Tree diagrams used in this document follow the notation defined in  <xref target="RFC8340" format="default"/>.</t>
      </section>
      <section anchor="sec.prefixes" numbered="true" toc="default">
        <name>Prefixes in Data Node Names</name>
        <t>In this document, names of data nodes, actions, and other
        data model objects are often used without a prefix, as long as
        it is clear from the context in which YANG module each name is
        defined. Otherwise, names are prefixed using the standard prefix
        associated with the corresponding YANG module, as shown in <xref target="tab.prefixes" format="default"/>.</t>
        <table anchor="tab.prefixes" align="center">
          <name>Prefixes and Corresponding YANG Modules</name>
          <thead>
            <tr>
              <th align="left">Prefix</th>
              <th align="left">YANG Module</th>
              <th align="left">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left">if</td>
              <td align="left">ietf-interfaces</td>
              <td align="left">
                <xref target="RFC8343" format="default"/></td>
            </tr>
            <tr>
              <td align="left">rt</td>
              <td align="left">ietf-routing</td>
              <td align="left">
                <xref target="RFC8349" format="default"/></td>
            </tr>
            <tr>
              <td align="left">v4ur</td>
              <td align="left">ietf-ipv4-unicast-routing</td>
              <td align="left">
                <xref target="RFC8349" format="default"/></td>
            </tr>
            <tr>
              <td align="left">v6ur</td>
              <td align="left">ietf-ipv6-unicast-routing</td>
              <td align="left">
                <xref target="RFC8349" format="default"/></td>
            </tr>
            <tr>
              <td align="left">inet</td>
              <td align="left">ietf-inet-types</td>
              <td align="left">
                <xref target="RFC6991" format="default"/></td>
            </tr>
            <tr>
              <td align="left">ospf</td>
              <td align="left">ietf-ospf</td>
              <td align="left">
                <xref target="RFC9129" format="default"/></td>
            </tr>
            <tr>
              <td align="left">isis</td>
              <td align="left">ietf-isis</td>
              <td align="left">
                <xref target="RFC9130" format="default"/></td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section numbered="true" toc="default">
      <name>Design of the Model</name>
      <t>The YANG module defined in this document augments the ietf-routing,
ietf-ipv4-unicast-routing, and ietf-ipv6-unicast-routing YANG modules
defined in <xref target="RFC8349" format="default"/>, which provide a basis
for routing system data model development. Together with the ietf-routing YANG module and other YANG modules defined in
<xref target="RFC8349" format="default"/>, a generic RIB YANG data model is defined herein to implement and monitor a RIB.
</t>
      <t>The modules in <xref target="RFC8349" format="default"/> also define the basic
  configuration and operational state for both IPv4 and IPv6 static routes. This document
  provides augmentations for static routes to support multiple next hops
  and more next-hop attributes.
</t>
      <section numbered="true" toc="default">
        <name>Tags and Preferences</name>
        <t>Individual route tags are supported at both the route and next-hop level.
A preference per next hop is also supported for selection of the most preferred
reachable static route.</t>
        <t>The following tree snapshot shows tag and preference entries that augment
        static IPv4 unicast route and IPv6 unicast route next hops.</t>
<sourcecode type="yangtree"><![CDATA[
  augment /rt:routing/rt:control-plane-protocols
          /rt:control-plane-protocol/rt:static-routes/v4ur:ipv4
          /v4ur:route/v4ur:next-hop/v4ur:next-hop-options
          /v4ur:simple-next-hop:
    +--rw preference?   uint32
    +--rw tag?          uint32
  augment /rt:routing/rt:control-plane-protocols
          /rt:control-plane-protocol/rt:static-routes/v4ur:ipv4
          /v4ur:route/v4ur:next-hop/v4ur:next-hop-options
          /v4ur:next-hop-list/v4ur:next-hop-list/v4ur:next-hop:
    +--rw preference?   uint32
    +--rw tag?          uint32
  augment /rt:routing/rt:control-plane-protocols
          /rt:control-plane-protocol/rt:static-routes/v6ur:ipv6
          /v6ur:route/v6ur:next-hop/v6ur:next-hop-options
          /v6ur:simple-next-hop:
    +--rw preference?   uint32
    +--rw tag?          uint32
  augment /rt:routing/rt:control-plane-protocols
          /rt:control-plane-protocol/rt:static-routes/v6ur:ipv6
          /v6ur:route/v6ur:next-hop/v6ur:next-hop-options
          /v6ur:next-hop-list/v6ur:next-hop-list/v6ur:next-hop:
    +--rw preference?   uint32
    +--rw tag?          uint32
  augment /rt:routing/rt:ribs/rt:rib/rt:routes/rt:route:
    +--ro metric?            uint32
    +--ro tag*               uint32
    +--ro application-tag?   uint32
]]></sourcecode>
      </section>
      <section numbered="true" toc="default">
        <name>Repair Path</name>
        <t>The IP Fast Reroute (IPFRR) calculation by routing protocol
        precomputes repair paths <xref target="RFC5714" format="default"/>, and the repair
        paths are installed in the RIB.</t>
        <t>Each route next hop in the RIB is augmented with a repair path
        and is shown in the following tree snapshot.</t>
<sourcecode type="yangtree"><![CDATA[
  augment /rt:routing/rt:ribs/rt:rib/rt:routes/rt:route
          /rt:next-hop/rt:next-hop-options/rt:simple-next-hop:
    +--ro repair-path
       +--ro outgoing-interface?   if:interface-state-ref
       +--ro next-hop-address?     inet:ip-address-no-zone
       +--ro metric?               uint32
  augment /rt:routing/rt:ribs/rt:rib/rt:routes/rt:route
          /rt:next-hop/rt:next-hop-options/rt:next-hop-list
          /rt:next-hop-list/rt:next-hop:
    +--ro repair-path
       +--ro outgoing-interface?   if:interface-state-ref
       +--ro next-hop-address?     inet:ip-address-no-zone
       +--ro metric?               uint32
]]></sourcecode>
      </section>
    </section>
    <section anchor="rib.tree" numbered="true" toc="default">
      <name>RIB Model Tree</name>
      <t> The ietf-routing.yang tree with the augmentations herein is
  included in <xref target="full-tree" format="default"/>. The meanings of the symbols
  can be found in <xref target="RFC8340" format="default"/>.</t>
    </section>
    <section numbered="true" toc="default">
      <name>RIB Extension YANG Module</name>

   <t>This YANG module references <xref target="RFC6991"/>,
   <xref target="RFC8343"/>, <xref target="RFC8349"/>,
   <xref target="RFC9129"/>, <xref target="RFC9130"/>, and
   <xref target="RFC5714"/>.</t>

      <sourcecode name="ietf-rib-extension@2023-11-20.yang" type="yang" markers="true"><![CDATA[
module ietf-rib-extension {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-rib-extension";
  prefix rib-ext;

  import ietf-inet-types {
    prefix inet;
    reference
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-interfaces {
    prefix if;
    reference
      "RFC 8343: A YANG Data Model for Interface
                 Management";
  }
  import ietf-routing {
    prefix rt;
    reference
      "RFC 8349: A YANG Data Model for Routing
                 Management (NMDA Version)";
  }
  import ietf-ipv4-unicast-routing {
    prefix v4ur;
    reference
      "RFC 8349: A YANG Data Model for Routing
                 Management (NMDA Version)";
  }
  import ietf-ipv6-unicast-routing {
    prefix v6ur;
    reference
      "RFC 8349: A YANG Data Model for Routing
                 Management (NMDA Version)";
  }

  import ietf-ospf {
    prefix ospf;
    reference "RFC 9129: YANG Data Model for the OSPF Protocol";
  }

  import ietf-isis {
    prefix isis;
    reference "RFC 9130: YANG Data Model for the IS-IS Protocol";
  }

  organization
    "IETF RTGWG (Routing Area Working Group)";
  contact
    "WG Web:   <https://datatracker.ietf.org/wg/rtgwg/>
     WG List:  <mailto:rtgwg@ietf.org>

     Author:   Acee Lindem
               <mailto:acee.ietf@gmail.com>
     Author:   Yingzhen Qu
               <mailto:yingzhen.qu@futurewei.com>";
  description
    "This YANG module extends the RIB defined in the ietf-routing
     YANG module with additional route attributes.

     This YANG module conforms to the Network Management
     Datastore Architecture (NMDA) as described in RFC 8342.

     Copyright (c) 2023 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Revised BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC 9403; see the
     RFC itself for full legal notices.";

  revision 2023-11-20 {
    description
      "Initial version.";
    reference
      "RFC 9403: A YANG Data Model for RIB Extensions";
  }

  /* Groupings */

  grouping rib-statistics {
    description
      "Statistics grouping used for RIB augmentation.";
    container statistics {
      config false;
      description
        "Container for RIB statistics.";
      leaf total-routes {
        type uint32;
        description
          "Total number of routes in the RIB.";
      }
      leaf total-active-routes {
        type uint32;
        description
          "Total number of active routes in the RIB.  An active
           route is the route that is preferred over other routes
           to the same destination prefix.";
      }
      leaf total-route-memory {
        type uint64;
        units "bytes";
        description
          "Total memory for all routes in the RIB.";
      }
      list protocol-statistics {
        description
          "RIB statistics for routing protocols installing
           routes in the RIB.";
        leaf protocol {
          type identityref {
            base rt:routing-protocol;
          }
          description
            "Routing protocol installing routes in the RIB.";
        }
        leaf routes {
          type uint32;
          description
            "Total number of routes in the RIB for the routing
             protocol identified by the 'protocol' entry.";
        }
        leaf active-routes {
          type uint32;
          description
            "Total number of active routes in the RIB for the
             routing protocol identified by the 'protocol' entry.
             An active route is preferred over other routes to the
             same destination prefix.";
        }
        leaf route-memory {
          type uint64;
          units "bytes";
          description
            "Total memory for all routes in the RIB for the
             routing protocol identified by the 'protocol'
             entry.";
        }
      }
    }
  }

  grouping repair-path {
    description
      "Grouping for the IP Fast Reroute (IPFRR) repair path.";
    container repair-path {
      description
        "IPFRR next-hop repair path.";
      leaf outgoing-interface {
        type if:interface-state-ref;
        description
          "Name of the outgoing interface.";
      }
      leaf next-hop-address {
        type inet:ip-address-no-zone;
        description
          "IP address of the next hop.";
      }
      leaf metric {
        type uint32;
        description
          "The metric for the repair path.  While the reroute
           repair is local and the metric is not advertised
           externally, the metric for the repair path is useful
           for troubleshooting purposes.";
      }
      reference
        "RFC 5714: IP Fast Reroute Framework";
    }
  }

  augment "/rt:routing/rt:control-plane-protocols/"
        + "rt:control-plane-protocol/rt:static-routes/v4ur:ipv4/"
        + "v4ur:route/v4ur:next-hop/v4ur:next-hop-options/"
        + "v4ur:simple-next-hop" {
    description
      "Augment 'simple-next-hop' case in IPv4 unicast route.";
    leaf preference {
      type uint32;
      default "1";
      description
        "The preference is used to select among multiple static
         routes.  Routes with a lower next-hop preference value
         are preferred, and equal-preference routes result in
         Equal-Cost Multipath (ECMP) static routes.";
    }
    leaf tag {
      type uint32;
      default "0";
      description
        "The tag is a 32-bit opaque value associated with the
         route that can be used for policy decisions such as
         advertisement and filtering of the route.";
    }
  }

  augment "/rt:routing/rt:control-plane-protocols/"
        + "rt:control-plane-protocol/rt:static-routes/v4ur:ipv4/"
        + "v4ur:route/v4ur:next-hop/v4ur:next-hop-options/"
        + "v4ur:next-hop-list/v4ur:next-hop-list/v4ur:next-hop" {
    description
      "Augment static route configuration 'next-hop-list'.";
    leaf preference {
      type uint32;
      default "1";
      description
        "The preference is used to select among multiple static
         routes.  Routes with a lower next-hop preference value
         are preferred, and equal-preference routes result in
         ECMP static routes.";
    }
    leaf tag {
      type uint32;
      default "0";
      description
        "The tag is a 32-bit opaque value associated with the
         route that can be used for policy decisions such as
         advertisement and filtering of the route.";
    }
  }

  augment "/rt:routing/rt:control-plane-protocols/"
        + "rt:control-plane-protocol/rt:static-routes/v6ur:ipv6/"
        + "v6ur:route/v6ur:next-hop/v6ur:next-hop-options/"
        + "v6ur:simple-next-hop" {
    description
      "Augment 'simple-next-hop' case in IPv6 unicast route.";
    leaf preference {
      type uint32;
      default "1";
      description
        "The preference is used to select among multiple static
         routes.  Routes with a lower next-hop preference value
         are preferred, and equal-preference routes result in
         ECMP static routes.";
    }
    leaf tag {
      type uint32;
      default "0";
      description
        "The tag is a 32-bit opaque value associated with the
         route that can be used for policy decisions such as
         advertisement and filtering of the route.";
    }
  }

  augment "/rt:routing/rt:control-plane-protocols/"
        + "rt:control-plane-protocol/rt:static-routes/v6ur:ipv6/"
        + "v6ur:route/v6ur:next-hop/v6ur:next-hop-options/"
        + "v6ur:next-hop-list/v6ur:next-hop-list/v6ur:next-hop" {
    description
      "Augment static route configuration 'next-hop-list'.";
    leaf preference {
      type uint32;
      default "1";
      description
        "The preference is used to select among multiple static
         routes.  Routes with a lower next-hop preference value
         are preferred, and equal-preference routes result in
         ECMP static routes.";
    }
    leaf tag {
      type uint32;
      default "0";
      description
        "The tag is a 32-bit opaque value associated with the
         route that can be used for policy decisions such as
         advertisement and filtering of the route.";
    }
  }

  augment "/rt:routing/rt:ribs/rt:rib" {
    description
      "Augment a RIB with statistics.";
    uses rib-statistics;
  }

  augment "/rt:routing/rt:ribs/rt:rib/"
        + "rt:routes/rt:route" {
    description
      "Augment a route in the RIB with common attributes.";
    leaf metric {
      when "not(derived-from("
        + "../rt:source-protocol, 'ospf:ospf')) "
        + "and not(derived-from( "
        + "../rt:source-protocol, 'isis:isis'))" {
        description
          "This augmentation is only valid for routes that don't
           have OSPF or IS-IS as the source protocol.  The YANG
           data models for OSPF and IS-IS already include a
           'metric' augmentation for routes.";
      }
      type uint32;
      description
        "The metric is a numeric value indicating the cost
         of the route from the perspective of the routing
         protocol installing the route.  In general, routes with
         a lower metric installed by the same routing protocol
         are lower cost to reach and are preferable to routes
         with a higher metric.  However, metrics from different
         routing protocols are not comparable.";
    }
    leaf-list tag {
      when "not(derived-from("
        + "../rt:source-protocol, 'ospf:ospf')) "
        + "and not(derived-from( "
        + "../rt:source-protocol, 'isis:isis'))" {
        description
          "This augmentation is only valid for routes that don't
           have OSPF or IS-IS as the source protocol.  The YANG
           data models for OSPF and IS-IS already include a 'tag'
           augmentation for routes.";
      }
      type uint32;
      description
        "A tag is a 32-bit opaque value associated with the
         route that can be used for policy decisions such as
         advertisement and filtering of the route.";
    }
    leaf application-tag {
      type uint32;
      description
        "The application-specific tag is an additional tag that
         can be used by applications that require semantics and/or
         policy different from that of the tag.  For example,
         the tag is usually automatically advertised in OSPF
         AS-External Link State Advertisements (LSAs) while this
         application-specific tag is not advertised implicitly.";
    }
  }

  augment "/rt:routing/rt:ribs/rt:rib/"
        + "rt:routes/rt:route/rt:next-hop/rt:next-hop-options/"
        + "rt:simple-next-hop" {
    description
      "Augment 'simple-next-hop' with 'repair-path'.";
    uses repair-path;
  }

  augment "/rt:routing/rt:ribs/rt:rib/"
        + "rt:routes/rt:route/rt:next-hop/rt:next-hop-options/"
        + "rt:next-hop-list/rt:next-hop-list/rt:next-hop" {
    description
      "Augment the next hop with a repair path.";
    uses repair-path;
  }
}
]]></sourcecode>

    </section>
    <section numbered="true" toc="default">
      <name>Security Considerations</name>
   <t>The YANG module specified in this document defines a schema for data
that is designed to be accessed via network management protocols such
as NETCONF <xref target="RFC6241"/> or RESTCONF <xref target="RFC8040"/>.
The lowest NETCONF layer is the secure transport layer, and the
mandatory-to-implement secure transport is Secure Shell (SSH)
<xref target="RFC6242"/>. The lowest RESTCONF layer is HTTPS, and the
mandatory-to-implement secure transport is TLS <xref target="RFC8446"/>.</t>
   <t>The Network Configuration Access Control Model (NACM) <xref target="RFC8341"/> provides the means to restrict access for particular NETCONF or
RESTCONF users to a preconfigured subset of all available NETCONF or RESTCONF
protocol operations and content.</t>
   <t>There are a number of data nodes defined in the ietf-rib-extension.yang module that are writable/creatable/deletable (i.e., config true, which is the default). These data nodes may be considered sensitive or vulnerable in some network environments. Write operations (e.g., edit-config) to these data nodes without proper protection can have a negative effect on network operations. These are the subtrees and data nodes and their sensitivity/vulnerability:</t>
      <ul spacing="normal">
        <li>/v4ur:next-hop-options/v4ur:simple-next-hop/rib-ext:preference</li>
        <li>/v4ur:next-hop-options/v4ur:simple-next-hop/rib-ext:tag</li>
        <li>/v4ur:next-hop-options/v4ur:next-hop-list/v4ur:next-hop-list
      /v4ur:next-hop/rib-ext:preference</li>
        <li>/v4ur:next-hop-options/v4ur:next-hop-list/v4ur:next-hop-list
      /v4ur:next-hop/rib-ext:tag</li>
        <li>/v6ur:next-hop-options/v6ur:simple-next-hop/rib-ext:preference</li>
        <li>/v6ur:next-hop-options/v6ur:simple-next-hop/rib-ext:tag</li>
        <li>/v6ur:next-hop-options/v6ur:next-hop-list/v6ur:next-hop-list
      /v6ur:next-hop/rib-ext:preference</li>
        <li>/v6ur:next-hop-options/v6ur:next-hop-list/v6ur:next-hop-list
      /v6ur:next-hop/rib-ext:tag</li>
      </ul>
        <t indent="3">For these augmentations to ietf-routing.yang, the ability to delete, add, and modify IPv4 and
      IPv6 static route preferences and tags would allow traffic to be misrouted.</t>
    <t>Some of the readable data nodes in the ietf-rib-extension.yang module may be considered sensitive or vulnerable in some network environments. It is thus important to control read access (e.g., via get, get-config, or notification) to these data nodes. These are the subtrees and data nodes and their
sensitivity/vulnerability:</t>
      <ul spacing="normal">
        <li>/rt:routing/rt:ribs/rt:rib/rib-ext:statistics</li>
        <li>/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route/rib-ext:metric</li>
        <li>/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route/rib-ext:tag</li>
        <li>/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route/rib-ext:application-tag</li>
        <li>/rt:route/rt:next-hop/rt:next-hop-options/rt:simple-next-hop/rib-ext:repair-path</li>
        <li>/rt:routes/rt:route/rt:next-hop/rt:next-hop-options/rt:next-hop-list/rt:next-hop-list/rt:next-hop/rib-ext:repair-path</li>
      </ul>
        <t indent="3">Exposing the RIB will
      expose the routing topology of the network. This may be undesirable
      due to the fact that such exposure may facilitate other attacks. Additionally,
      network operators may consider their topologies to be sensitive confidential
      data.</t>

      <t>All the security considerations for writable and readable data nodes defined in <xref target="RFC8349" format="default"/>
      apply to the augmentations described herein.</t>
    </section>
    <section numbered="true" toc="default">
      <name>IANA Considerations</name>
      <t> This document registers the following URI in the "IETF XML Registry"
   <xref target="RFC3688" format="default"/>.  
      </t>
  <dl spacing="compact" newline="false">
   <dt>URI:</dt><dd>urn:ietf:params:xml:ns:yang:ietf-rib-extension</dd>
   <dt>Registrant Contact:</dt><dd>The IESG.</dd>
   <dt>XML:</dt><dd>N/A; the requested URI is an XML namespace.</dd>
  </dl>
      <t>IANA has registered the following YANG module in the "YANG Module Names"
   registry <xref target="RFC6020" format="default"/>.
      </t>
  <dl spacing="compact" newline="false">
   <dt>Name:</dt><dd>ietf-rib-extension</dd>
   <dt>Namespace:</dt><dd>urn:ietf:params:xml:ns:yang:ietf-rib-extension</dd>
   <dt>Prefix:</dt><dd>rib-ext</dd>
   <dt>Reference:</dt><dd>RFC 9403</dd>
  </dl>
    </section>
  </middle>
  <back>
    <references>
      <name>References</name>
      <references>
        <name>Normative References</name>

<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3688.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6020.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6241.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6242.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6991.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7950.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8040.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8341.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8342.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8343.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8349.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8446.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.9129.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.9130.xml"/>

        <reference anchor="W3C.REC-xml-20081126" target="https://www.w3.org/TR/2008/REC-xml-20081126">
          <front>
            <title>Extensible Markup Language (XML) 1.0 (Fifth Edition)</title>
            <author initials="T." surname="Bray" fullname="Tim Bray">
              <organization/>
            </author>
            <author initials="J." surname="Paoli" fullname="Jean Paoli">
              <organization/>
            </author>
            <author initials="M." surname="Sperberg-McQueen" fullname="Michael Sperberg-McQueen">
              <organization/>
            </author>
            <author initials="E." surname="Maler" fullname="Eve Maler">
              <organization/>
            </author>
            <author initials="F." surname="Yergeau" fullname="François Yergeau">
              <organization/>
            </author>
            <date month="November" year="2008"/>
          </front>
          <refcontent>World Wide Web Consortium Recommendation REC-xml-20081126</refcontent>
        </reference>

      </references>
      <references>
        <name>Informative References</name>

<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5714.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7951.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8340.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8792.xml"/>

      </references>
    </references>
    <section anchor="full-tree" numbered="true" toc="default">
      <name>Combined Tree Diagram</name>
      <t>This appendix provides the combined ietf-routing.yang, ietf-ipv4-unicast-routing.yang,
ietf-ipv6-unicast-routing.yang, and ietf-rib-extension.yang tree diagram.</t>
<sourcecode type="yangtree"><![CDATA[
module: ietf-routing
  +--rw routing
  +--rw router-id?                 yang:dotted-quad {router-id}?
  +--ro interfaces
  |  +--ro interface*   if:interface-ref
  +--rw control-plane-protocols
  |  +--rw control-plane-protocol* [type name]
  |     +--rw type             identityref
  |     +--rw name             string
  |     +--rw description?     string
  |     +--rw static-routes
  |        +--rw v4ur:ipv4
  |        |  +--rw v4ur:route* [destination-prefix]
  |        |     +--rw v4ur:destination-prefix    inet:ipv4-prefix
  |        |     +--rw v4ur:description?          string
  |        |     +--rw v4ur:next-hop
  |        |        +--rw (v4ur:next-hop-options)
  |        |           +--:(v4ur:simple-next-hop)
  |        |           |  +--rw v4ur:outgoing-interface?
  |        |           |  |   if:interface-ref
  |        |           |  +--rw v4ur:next-hop-address?
  |        |           |  |   inet:ipv4-address
  |        |           |  +--rw rib-ext:preference?      uint32
  |        |           |  +--rw rib-ext:tag?             uint32
  |        |           +--:(v4ur:special-next-hop)
  |        |           |  +--rw v4ur:special-next-hop?   enumeration
  |        |           +--:(v4ur:next-hop-list)
  |        |              +--rw v4ur:next-hop-list
  |        |                 +--rw v4ur:next-hop* [index]
  |        |                    +--rw v4ur:index            string
  |        |                    +--rw v4ur:outgoing-interface?
  |        |                    |   if:interface-ref
  |        |                    +--rw v4ur:next-hop-address?
  |        |                    |   inet:ipv4-address
  |        |                    +--rw rib-ext:preference?   uint32
  |        |                    +--rw rib-ext:tag?          uint32
  |        +--rw v6ur:ipv6
  |           +--rw v6ur:route* [destination-prefix]
  |              +--rw v6ur:destination-prefix    inet:ipv6-prefix
  |              +--rw v6ur:description?          string
  |              +--rw v6ur:next-hop
  |                 +--rw (v6ur:next-hop-options)
  |                    +--:(v6ur:simple-next-hop)
  |                    |  +--rw v6ur:outgoing-interface?
  |                    |  |   if:interface-ref
  |                    |  +--rw v6ur:next-hop-address?
  |                    |  |   inet:ipv6-address
  |                    |  +--rw rib-ext:preference?      uint32
  |                    |  +--rw rib-ext:tag?             uint32
  |                    +--:(v6ur:special-next-hop)
  |                    |  +--rw v6ur:special-next-hop?   enumeration
  |                    +--:(v6ur:next-hop-list)
  |                       +--rw v6ur:next-hop-list
  |                          +--rw v6ur:next-hop* [index]
  |                             +--rw v6ur:index              string
  |                             +--rw v6ur:outgoing-interface?
  |                             |   if:interface-ref
  |                             +--rw v6ur:next-hop-address?
  |                             |   inet:ipv6-address
  |                             +--rw rib-ext:preference?     uint32
  |                             +--rw rib-ext:tag?            uint32
  +--rw ribs
     +--rw rib* [name]
        +--rw name                          string
        +--rw address-family                identityref
        +--ro default-rib?                  boolean {multiple-ribs}?
        +--ro routes
        |  +--ro route* []
        |     +--ro route-preference?       route-preference
        |     +--ro next-hop
        |     |  +--ro (next-hop-options)
        |     |     +--:(simple-next-hop)
        |     |     |  +--ro outgoing-interface?
        |     |     |  |   if:interface-ref
        |     |     |  +--ro v4ur:next-hop-address?
        |     |     |  |   inet:ipv4-address
        |     |     |  +--ro v6ur:next-hop-address?
        |     |     |  |   inet:ipv6-address
        |     |     |  +--ro rib-ext:repair-path
        |     |     |     +--ro rib-ext:outgoing-interface?
        |     |     |     |   if:interface-state-ref
        |     |     |     +--ro rib-ext:next-hop-address?
        |     |     |     |   inet:ip-address-no-zone
        |     |     |     +--ro rib-ext:metric?               uint32
        |     |     +--:(special-next-hop)
        |     |     |  +--ro special-next-hop?        enumeration
        |     |     +--:(next-hop-list)
        |     |        +--ro next-hop-list
        |     |           +--ro next-hop* []
        |     |              +--ro outgoing-interface?
        |     |              |   if:interface-ref
        |     |              +--ro v4ur:address?
        |     |              |   inet:ipv4-address
        |     |              +--ro v6ur:address?
        |     |              |   inet:ipv6-address
        |     |              +--ro rib-ext:repair-path
        |     |                 +--ro rib-ext:outgoing-interface?
        |     |                 |   if:interface-state-ref
        |     |                 +--ro rib-ext:next-hop-address?
        |     |                 |   inet:ip-address-no-zone
        |     |                 +--ro rib-ext:metric?         uint32
        |     +--ro source-protocol            identityref
        |     +--ro active?                    empty
        |     +--ro last-updated?              yang:date-and-time
        |     +--ro v4ur:destination-prefix?   inet:ipv4-prefix
        |     +--ro v6ur:destination-prefix?   inet:ipv6-prefix
        |     +--ro rib-ext:metric?            uint32
        |     +--ro rib-ext:tag*               uint32
        |     +--ro rib-ext:application-tag?   uint32
        +---x active-route
        |  +---w input
        |  |  +---w v4ur:destination-address?   inet:ipv4-address
        |  |  +---w v6ur:destination-address?   inet:ipv6-address
        |  +--ro output
        |     +--ro route
        |        +--ro next-hop
        |        |  +--ro (next-hop-options)
        |        |     +--:(simple-next-hop)
        |        |     |  +--ro outgoing-interface?
        |        |     |  |   if:interface-ref
        |        |     |  +--ro v4ur:next-hop-address?
        |        |     |  |   inet:ipv4-address
        |        |     |  +--ro v6ur:next-hop-address?
        |        |     |  |   inet:ipv6-address
        |        |     +--:(special-next-hop)
        |        |     |  +--ro special-next-hop?        enumeration
        |        |     +--:(next-hop-list)
        |        |        +--ro next-hop-list
        |        |           +--ro next-hop* []
        |        |              +--ro outgoing-interface?
        |        |              |   if:interface-ref
        |        |              +--ro v4ur:next-hop-address?
        |        |              |   inet:ipv4-address
        |        |              +--ro v6ur:next-hop-address?
        |        |              |   inet:ipv6-address
        |        +--ro source-protocol            identityref
        |        +--ro active?                    empty
        |        +--ro last-updated?              yang:date-and-time
        |        +--ro v4ur:destination-prefix?   inet:ipv4-prefix
        |        +--ro v6ur:destination-prefix?   inet:ipv6-prefix
        +--rw description?                        string
        +--ro rib-ext:statistics
           +--ro rib-ext:total-routes?              uint32
           +--ro rib-ext:total-active-routes?       uint32
           +--ro rib-ext:total-route-memory?        uint64
           +--ro rib-ext:protocol-statistics* []
              +--ro rib-ext:protocol?             identityref
              +--ro rib-ext:routes?    uint32
              +--ro rib-ext:active-routes?   uint32
              +--ro rib-ext:route-memory?    uint64
]]></sourcecode>
    </section>
    <section anchor="examples" numbered="true" toc="default">
      <name>ietf-rib-extension.yang example</name>
      <t>The following is an XML example <xref target="W3C.REC-xml-20081126"/> using the RIB extension module and RFC 8349.</t>
      <aside><t>Note: '\' line wrapping per <xref target="RFC8792" format="default"/>.</t></aside>

<sourcecode type="xml"><![CDATA[
<routing xmlns="urn:ietf:params:xml:ns:yang:ietf-routing">
  <control-plane-protocols>
    <control-plane-protocol>
      <type>static</type>
      <name>static-routing-protocol</name>
      <static-routes>
        <ipv4 xmlns="urn:ietf:params:xml:ns:yang:\
          ietf-ipv4-unicast-routing">
          <route>
            <destination-prefix>0.0.0.0/0</destination-prefix>
            <next-hop>
              <next-hop-address>192.0.2.2</next-hop-address>
              <preference xmlns="urn:ietf:params:xml:ns:yang:\
                ietf-rib-extension">30</preference>
              <tag xmlns="urn:ietf:params:xml:ns:yang:\
                ietf-rib-extension">99</tag>
            </next-hop>
          </route>
        </ipv4>
        <ipv6 xmlns="urn:ietf:params:xml:ns:yang:\
          ietf-ipv6-unicast-routing">
          <route>
            <destination-prefix>::/0</destination-prefix>
            <next-hop>
             <next-hop-address>2001:db8:aaaa::1111</next-hop-address>
             <preference xmlns="urn:ietf:params:xml:ns:yang:\
               ietf-rib-extension">30</preference>
             <tag xmlns="urn:ietf:params:xml:ns:yang:\
               ietf-rib-extension">66</tag>
            </next-hop>
          </route>
        </ipv6>
      </static-routes>
    </control-plane-protocol>
  </control-plane-protocols>
  <ribs>
    <rib>
      <name>ipv4-primary</name>
      <address-family xmlns:v4ur="urn:ietf:params:xml:ns:yang:\
        ietf-ipv4-unicast-routing">v4ur:ipv4-unicast</address-family>
      <default-rib>true</default-rib>
      <routes>
        <route>
          <destination-prefix xmlns="urn:ietf:params:xml:ns:yang:\
            ietf-ipv4-unicast-routing">0.0.0.0/0</destination-prefix>
          <next-hop>
            <next-hop-address xmlns="urn:ietf:params:xml:ns:yang:\
              ietf-ipv4-unicast-routing">192.0.2.2</next-hop-address>
          </next-hop>
          <route-preference>5</route-preference>
          <source-protocol>static</source-protocol>
          <last-updated>2015-10-24T18:02:45+02:00</last-updated>
        </route>
        <route>
          <destination-prefix xmlns="urn:ietf:params:xml:ns:yang:\
            ietf-ipv4-unicast-routing">198.51.100.0/24\
          </destination-prefix>
          <next-hop>
            <next-hop-address xmlns="urn:ietf:params:xml:ns:yang:\
              ietf-ipv4-unicast-routing">192.0.2.2</next-hop-address>
            <repair-path xmlns="urn:ietf:params:xml:ns:yang:\
              ietf-rib-extension">
              <next-hop-address>203.0.113.1</next-hop-address>
              <metric>200</metric>
            </repair-path>
          </next-hop>
          <route-preference>120</route-preference>
          <source-protocol xmlns:rip="urn:ietf:params:xml:ns:yang:\
            ietf-rip">rip:rip</source-protocol>
          <last-updated>2015-10-24T18:02:45+02:00</last-updated>
        </route>
      </routes>
    </rib>
    <rib>
      <name>ipv6-primary</name>
      <address-family xmlns:v6ur="urn:ietf:params:xml:ns:yang:\
        ietf-ipv6-unicast-routing">v6ur:ipv6-unicast</address-family>
      <default-rib>true</default-rib>
      <routes>
        <route>
          <destination-prefix xmlns="urn:ietf:params:xml:ns:yang:\
            ietf-ipv6-unicast-routing">0::/0</destination-prefix>
          <next-hop>
            <next-hop-address xmlns="urn:ietf:params:xml:ns:yang:\
              ietf-ipv6-unicast-routing">2001:db8:aaaa::1111\
            </next-hop-address>
          </next-hop>
          <route-preference>5</route-preference>
          <source-protocol>static</source-protocol>
          <last-updated>2015-10-24T18:02:45+02:00</last-updated>
        </route>
        <route>
          <destination-prefix xmlns="urn:ietf:params:xml:ns:yang:\
            ietf-ipv6-unicast-routing">2001:db8:bbbb::/64\
          </destination-prefix>
          <next-hop>
            <next-hop-address xmlns="urn:ietf:params:xml:ns:yang:\
              ietf-ipv6-unicast-routing">2001:db8:aaaa::1111\
            </next-hop-address>
            <repair-path xmlns="urn:ietf:params:xml:ns:yang:\
             ietf-rib-extension">
             <next-hop-address>2001:db8:cccc::2222</next-hop-address>
             <metric>200</metric>
            </repair-path>
          </next-hop>
          <route-preference>120</route-preference>
          <source-protocol xmlns:rip="urn:ietf:params:xml:ns:yang:\
            ietf-rip">rip:rip</source-protocol>
          <last-updated>2015-10-24T18:02:45+02:00</last-updated>
        </route>
      </routes>
    </rib>
  </ribs>
</routing>
]]></sourcecode>
      <t>The following is the same example using JSON format <xref target="RFC7951"/>.</t>
<sourcecode type="json"><![CDATA[
{
 "ietf-routing:routing": {
   "control-plane-protocols": {
     "control-plane-protocol": [
       {
         "type": "static",
         "name": "static-routing-protocol",
         "static-routes": {
           "ietf-ipv4-unicast-routing:ipv4": {
             "route": [
               {
                 "destination-prefix": "0.0.0.0/0",
                 "next-hop": {
                   "next-hop-address": "192.0.2.2",
                   "ietf-rib-extension:preference": 30,
                   "ietf-rib-extension:tag": 99
                 }
               }
             ]
           },
           "ietf-ipv6-unicast-routing:ipv6": {
             "route": [
               {
                 "destination-prefix": "::/0",
                 "next-hop": {
                   "next-hop-address": "2001:db8:aaaa::1111",
                   "ietf-rib-extension:preference": 30,
                   "ietf-rib-extension:tag": 66
                 }
               }
             ]
           }
         }
       }
     ]
   },
   "ribs": {
     "rib": [
       {
         "name": "ipv4-primary",
         "address-family": "ietf-ipv4-unicast-routing:ipv4-unicast",
         "default-rib": true,
         "routes": {
           "route": [
             {
               "next-hop": {
                 "ietf-ipv4-unicast-routing:next-hop-address": \
                 "192.0.2.2"
               },
               "route-preference": 5,
               "source-protocol": "static",
               "last-updated": "2015-10-24T18:02:45+02:00",
               "ietf-ipv4-unicast-routing:destination-prefix": \
               "0.0.0.0/0"
             },
             {
               "next-hop": {
                 "ietf-rib-extension:repair-path": {
                   "next-hop-address": "203.0.113.1",
                   "metric": 200
                 },
                 "ietf-ipv4-unicast-routing:next-hop-address": \
                 "192.0.2.2"
               },
               "route-preference": 120,
               "source-protocol": "ietf-rip:rip",
               "last-updated": "2015-10-24T18:02:45+02:00",
               "ietf-ipv4-unicast-routing:destination-prefix": \
               "198.51.100.0/24"
             }
           ]
         }
       },
       {
         "name": "ipv6-primary",
         "address-family": "ietf-ipv6-unicast-routing:ipv6-unicast",
         "default-rib": true,
         "routes": {
           "route": [
             {
               "next-hop": {
                 "ietf-ipv6-unicast-routing:next-hop-address": \
                 "2001:db8:aaaa::1111"
               },
               "route-preference": 5,
               "source-protocol": "static",
               "last-updated": "2015-10-24T18:02:45+02:00",
               "ietf-ipv6-unicast-routing:destination-prefix": "::/0"
             },
             {
               "next-hop": {
                 "ietf-rib-extension:repair-path": {
                   "next-hop-address": "2001:db8:cccc::2222",
                   "metric": 200
                 },
                 "ietf-ipv6-unicast-routing:next-hop-address": \
                 "2001:db8:aaaa::1111"
               },
               "route-preference": 120,
               "source-protocol": "ietf-rip:rip",
               "last-updated": "2015-10-24T18:02:45+02:00",
               "ietf-ipv6-unicast-routing:destination-prefix": \
               "2001:db8:bbbb::/64"
             }
           ]
         }
       }
     ]
   }
 }
}
]]></sourcecode>
    </section>
    <section numbered="false" toc="default">
      <name>Acknowledgments</name>
      <t>
        The authors wish to thank <contact fullname="Les Ginsberg"/>, <contact fullname="Krishna Deevi"/>, and <contact fullname="Suyoung Yoon"/>
        for their helpful comments and suggestions.
      </t>
      <t>
        The authors wish to thank <contact fullname="Tom Petch"/>, <contact fullname="Rob Wilton"/>, <contact fullname="Chris Hopps"/>, <contact fullname="Martin Björklund"/>, <contact fullname="Jeffrey Zhang"/>, <contact fullname="Éric Vyncke"/>, <contact fullname="Lars Eggert"/>, and <contact fullname="Bo Wu"/> for
        their reviews and comments.
      </t>
    </section>
  </back>
</rfc>
