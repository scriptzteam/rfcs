<?xml version="1.0" encoding="UTF-8"?> 

<!DOCTYPE rfc [ 
  <!ENTITY nbsp    "&#160;"> 
  <!ENTITY zwsp    "&#8203;"> 
  <!ENTITY nbhy    "&#8209;"> 
  <!ENTITY wj      "&#8288;"> 
]> 

<rfc xmlns:xi="http://www.w3.org/2001/XInclude" version="3"
submissionType="IETF" category="std" consensus="true"
docName="draft-ietf-lsr-rfc8920bis-06" number="9492" ipr="trust200902"
updates="" obsoletes="8920" sortRefs="true" symRefs="true" tocDepth="3"
tocInclude="true" xml:lang="en">
  
  <link href="https://datatracker.ietf.org/doc/draft-ietf-ospf-te-link-attr-reuse-16" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc8920" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>

  <front>
    <title abbrev="OSPF App-Specific Link Attributes">OSPF
    Application-Specific Link Attributes</title>
    <seriesInfo name="RFC" value="9492"/>
    <author fullname="Peter Psenak" initials="P." role="editor" surname="Psenak">
      <organization>Cisco Systems</organization>
      <address>
        <postal>
          <country>Slovakia</country>
        </postal>
        <email>ppsenak@cisco.com</email>
      </address>
    </author>
    <author initials="L." surname="Ginsberg" fullname="Les Ginsberg">
      <organization>Cisco Systems</organization>
      <address>
	<postal>
          <country>United States of America</country>
        </postal>
        <email>ginsberg@cisco.com</email>
      </address>
    </author>
    <author initials="W." surname="Henderickx" fullname="Wim Henderickx">
      <organization>Nokia</organization>
      <address>
        <postal>
          <street>Copernicuslaan 50</street>
          <city>Antwerp</city>
          <country>Belgium</country>
          <code>2018 94089</code>
        </postal>
        <email>wim.henderickx@nokia.com</email>
      </address>
    </author>
    <author fullname="Jeff Tantsura" initials="J." surname="Tantsura">
      <organization>Nvidia</organization>
      <address>
        <postal>
          <country>United States of America</country>
        </postal>
        <email>jefftant.ietf@gmail.com</email>
      </address>
    </author>
    <author fullname="John Drake" initials="J." surname="Drake">
      <organization>Juniper Networks</organization>
      <address>
        <postal>
          <country>United States of America</country>
        </postal>
        <email>jdrake@juniper.net</email>
      </address>
    </author>
    <date year="2023" month="October"/>
    <area>rtg</area>
    <workgroup>lsr</workgroup>

    <abstract>
      <t>Existing traffic-engineering-related link attribute advertisements
    have been defined and are used in RSVP-TE deployments.  
Since the
    original RSVP-TE use case was defined, additional applications such as 
    Segment Routing (SR) Policy and Loop-Free Alternates (LFAs) that also make use of the
    link attribute advertisements have been defined.  In
    cases where multiple applications wish to make use of these link
    attributes, the current advertisements do not support application-specific values for a given attribute, nor do they support indication
    of which applications are using the advertised value for a given
    link.  This document introduces link attribute advertisements in OSPFv2
       and OSPFv3 that address both of these shortcomings.</t>
      <t>This document obsoletes RFC 8920.</t>
    </abstract>
  </front>
  <middle>
    <section>
      <name>Introduction</name>
      <t>Advertisement of link attributes by the OSPFv2 <xref target="RFC2328"/> and OSPFv3 <xref target="RFC5340"/> protocols in support of traffic engineering (TE) was
       introduced by <xref target="RFC3630"/> and <xref target="RFC5329"/>, respectively. It has been extended
       by <xref target="RFC4203"/>, <xref target="RFC7308"/>, and <xref target="RFC7471"/>.  Use
       of these extensions has been associated with deployments supporting
       TE over Multiprotocol Label Switching (MPLS) in the
       presence of the Resource Reservation Protocol (RSVP), more succinctly
       referred to as RSVP-TE <xref target="RFC3209"/>.</t>
      <t>For the purposes of this document, an application is a technology
       that makes use of link attribute advertisements, examples of which are
       listed in <xref target="ADVAPPVAL"/>.</t>
      <t>In recent years, new applications have been introduced that have use
       cases for many of the link attributes historically used by RSVP-TE.
       Such applications include SR Policy <xref target="RFC9256"/> and
       LFAs <xref target="RFC5286"/>. This has introduced ambiguity in that if a
       deployment includes a mix of RSVP-TE support and SR Policy support, for
       example, it is not possible to unambiguously indicate which
       advertisements are to be used by RSVP-TE and which advertisements are
       to be used by SR Policy.  If the topologies are fully congruent, this
       may not be an issue, but any incongruence leads to ambiguity.</t>
      <t>An example of where this ambiguity causes a problem is a network
       where RSVP-TE is enabled only on a subset of its links. A link
       attribute is advertised for the purpose of another application (e.g.,
       SR Policy) for a link that is not enabled for RSVP-TE.  As soon as the
       router that is an RSVP-TE head end sees the link attribute being
       advertised for that link, it assumes RSVP-TE is enabled on that link,
       even though it is not.  If such an RSVP-TE head-end router tries to set
       up an RSVP-TE path via that link, it will result in a setup failure for the path.</t>
      <t>An additional issue arises in cases where both applications are
       supported on a link but the link attribute values associated with each
       application differ.  Current advertisements do not support advertising
       application-specific values for the same attribute on a specific
       link.</t>
      <t>This document defines extensions that address these issues.  Also,
    as evolution of use cases for link attributes can be expected to
    continue in the years to come, this document defines a solution that
    is easily extensible for the introduction of new applications and new
    use cases.</t>
      <section>
        <name>Requirements Language</name>
        <t>
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL
    NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as
    described in BCP&nbsp;14 <xref target="RFC2119"/> <xref target="RFC8174"/> 
    when, and only when, they appear in all capitals, as shown here.
        </t>
      </section>
    </section>
    <section anchor="REQDIS">
      <name>Requirements Discussion</name>
      <t>As stated previously, evolution of use cases for link attributes can
       be expected to continue. Therefore, any discussion of existing use cases
       is limited to requirements that are known at the time of this writing.
       However, in order to determine the functionality required beyond what
       already exists in OSPF, it is only necessary to discuss use cases that
       justify the key points identified in the introduction, which are:</t>
      <ol>
	 <li derivedCounter="1.">Support for indicating which applications are using the link
	   attribute advertisements on a link.</li>
        <li derivedCounter="2.">Support for advertising application-specific values for the same
	   attribute on a link.</li>
      </ol>
      <t><xref target="RFC7855"/> discusses use cases and requirements for SR.  
       Included among these use cases is SR Policy, which is defined in
       <xref target="RFC9256"/>. If both RSVP-TE
       and SR Policy are deployed in a network, link attribute advertisements
       can be used by one or both of these applications. There is no
       requirement for the link attributes advertised on a given link used by
       SR Policy to be identical to the link attributes advertised on that same
       link used by RSVP-TE; thus, there is a clear requirement to indicate
       independently which link attribute advertisements are to be used by each
       application.</t>
      <t>As the number of applications that may wish to utilize link
       attributes may grow in the future, an additional requirement is that the
       extensions defined allow the association of additional applications to
       link attributes without altering the format of the advertisements or
      introducing backwards-compatibility issues.</t>     
      <t>Finally, there may still be many cases where a single attribute value
       can be shared among multiple applications, so the solution must minimize
       advertising duplicate link/attribute pairs whenever possible.</t>
    </section>
    <section anchor="LEG_ADV">
      <name>Existing Advertisement of Link Attributes</name>
      <t>There are existing advertisements used in support of RSVP-TE.  These
       advertisements are carried in the OSPFv2 TE Opaque Link State
       Advertisement (LSA) <xref target="RFC3630"/> and
       OSPFv3 Intra-Area-TE-LSA <xref target="RFC5329"/>. Additional RSVP-TE link attributes have been
       defined by <xref target="RFC4203"/>, <xref target="RFC7308"/>, and <xref target="RFC7471"/>.</t>
      <t>Extended Link Opaque LSAs as defined in <xref target="RFC7684"/> for OSPFv2 and  
  E-Router-LSAs <xref target="RFC8362"/> for OSPFv3 are used to advertise link
  attributes that are used by applications other than RSVP-TE or GMPLS <xref target="RFC4203"/>. 
  These LSAs were defined as generic containers for distribution of the extended link attributes.</t>
    </section>
    <section>
      <name>Advertisement of Link Attributes</name>
      <t>This section outlines the solution for advertising link attributes 
   originally defined for RSVP-TE or GMPLS when they are used for other applications.</t>
      <section>
        <name>OSPFv2 Extended Link Opaque LSA and OSPFv3 E-Router-LSA</name>
        <t>The following are the advantages of Extended Link Opaque LSAs as defined in <xref target="RFC7684"/> 
   for OSPFv2 and E-Router-LSAs <xref target="RFC8362"/> for OSPFv3 with respect 
   to the advertisement of link attributes originally defined for RSVP-TE when used in packet 
   networks and in GMPLS:
        </t>
        <ol>
	   <li derivedCounter="1.">Advertisement of the link attributes does not make the link part of the RSVP-TE topology. 
      It avoids any conflicts and is fully compatible with <xref target="RFC3630"/> and
      <xref target="RFC5329"/>.</li>
          <li derivedCounter="2.">The OSPFv2 TE Opaque LSA and OSPFv3 Intra-Area-TE-LSA remain
	   truly opaque to OSPFv2 and OSPFv3 as originally defined in <xref target="RFC3630"/> and <xref target="RFC5329"/>, respectively. Their contents are not inspected
	   by OSPF, which instead acts as a pure transport.</li>
          <li derivedCounter="3.">There is a clear distinction between link attributes used by RSVP-TE and 
	link attributes used by other OSPFv2 or OSPFv3 applications.</li>
          <li derivedCounter="4.">All link attributes that are used by other applications are advertised in the Extended Link Opaque LSA in OSPFv2 <xref target="RFC7684"/> or the OSPFv3 
	E-Router-LSA <xref target="RFC8362"/> in OSPFv3.</li>
        </ol>
        <t>The disadvantage of this approach is that in rare cases, the same link attribute is 
    advertised in both the TE Opaque and Extended Link Attribute LSAs in OSPFv2 or 
    the Intra-Area-TE-LSA and E-Router-LSA in OSPFv3.</t>
        <t>The Extended Link Opaque LSA <xref target="RFC7684"/> and E-Router-LSA 
   <xref target="RFC8362"/> are used to advertise any link attributes used 
   for non-RSVP-TE applications in OSPFv2 or OSPFv3, respectively, including those that have 
   been originally defined for RSVP-TE applications (see <xref target="REUSED_ATTR"/>).</t>
        <t>TE link attributes used for RSVP-TE/GMPLS continue to use the OSPFv2 TE Opaque LSA 
   <xref target="RFC3630"/> and OSPFv3 Intra-Area-TE-LSA <xref target="RFC5329"/>.</t>
        <t>The format of the link attribute TLVs that have been defined for
	 RSVP-TE applications will be kept unchanged even when they are used
	 for non-RSVP-TE applications. Unique codepoints are allocated for
	 these link attribute TLVs from the "OSPFv2 Extended Link TLV Sub-TLVs"
	 registry <xref target="RFC7684"/> and from the
	 "OSPFv3 Extended-LSA Sub-TLVs" registry <xref target="RFC8362"/>, as specified in <xref target="IANA"/>.</t>
      </section>
    </section>
    <section anchor="ADVAPPVAL">
      <name>Advertisement of Application-Specific Values</name>
      <t>To allow advertisement of the application-specific values of the link
      attribute, an Application-Specific Link Attributes (ASLA) sub-TLV is
      defined.  The ASLA sub-TLV is a sub-TLV of the OSPFv2 Extended Link TLV
      <xref target="RFC7684"/> and OSPFv3 Router-Link TLV <xref
      target="RFC8362"/>.</t>
      <t>In addition to advertising the link attributes for standardized
   applications, link attributes can be advertised for the purpose of
   applications that are not standardized.  We call such an
   application a "user-defined application" or "UDA".  These applications are
   not subject to standardization and are outside of the scope
   of this specification.</t>
      <t>The ASLA sub-TLV is an optional sub-TLV of the OSPFv2 Extended Link TLV and 
OSPFv3 Router-Link TLV. Multiple ASLA sub-TLVs can be present in a parent
TLV when different applications want to control different link attributes or
when a different value 
of the same attribute needs to be advertised by multiple applications. The ASLA sub-TLV 
<bcp14>MUST</bcp14> be used for advertisement of the link attributes listed at the end of this section 
if these are advertised inside the OSPFv2 Extended Link TLV and OSPFv3 Router-Link TLV. 
It has the following format:
</t>
      <artwork name="" type="" alt="">
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              Type             |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  SABM Length  |  UDABM Length |            Reserved           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       Standard Application Identifier Bit Mask (SABM)         |
+-                                                             -+
|                            ...                                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       User-Defined Application Identifier Bit Mask (UDABM)    |
+-                                                             -+
|                            ...                                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Link Attribute sub-TLVs                  |
+-                                                             -+
|                            ...                                |
</artwork>
      <t> where:</t>
      <dl newline="true">
        <dt>Type:</dt>
        <dd>10 (OSPFv2), 11 (OSPFv3)</dd>
        <dt>Length:</dt>
        <dd>Variable</dd>
        <dt>SABM Length:</dt>
        <dd>Standard Application Identifier Bit Mask Length in octets. 
            The value <bcp14>MUST</bcp14> be 0, 4, or 8.
            If the Standard Application Identifier Bit Mask is not present, the SABM
            Length <bcp14>MUST</bcp14> be set to 0.</dd>
        <dt>UDABM Length:</dt>
        <dd>User-Defined Application Identifier Bit Mask Length in octets. 
            The value <bcp14>MUST</bcp14> be 0, 4, or 8.
            If the User-Defined Application Identifier Bit Mask is not present, the 
            UDABM Length <bcp14>MUST</bcp14> be set to 0.</dd>
        <dt>Standard Application Identifier Bit Mask:</dt>
        <dd>
          <t>Optional
          set of bits, where each bit represents a single standard
          application. Bits are defined in the "Link Attribute Application Identifiers"
          registry, which is defined in <xref target="RFC9479"/>.  Current assignments are repeated here for
          informational purposes:</t>
<artwork name="" align="center" type="" alt="">
 0 1 2 3 4 5 6 7 ...
+-+-+-+-+-+-+-+-+...
|R|S|F|          ...
+-+-+-+-+-+-+-+-+...
</artwork>
          <dl>
            <dt>Bit 0 (R-bit):</dt>
            <dd>RSVP-TE.</dd>
            <dt>Bit 1 (S-bit):</dt>
            <dd>SR Policy (this is data plane independent).</dd>
            <dt>Bit 2 (F-bit):</dt>
            <dd>Loop-Free Alternate (includes all LFA
     types).</dd>
          </dl>
        </dd>
        <dt>User-Defined Application Identifier Bit Mask:</dt>
        <dd>Optional set of bits, where each bit 
        represents a single user-defined application.</dd>
      </dl>
      <t>If the SABM or UDABM Length is other than 0, 4, or 8, the ASLA sub-TLV <bcp14>MUST</bcp14> be ignored
by the receiver.</t>
      <t>Standard Application Identifier Bits are defined and sent starting with
   bit 0.  Undefined bits that are transmitted <bcp14>MUST</bcp14> be transmitted as 0 and <bcp14>MUST</bcp14> be ignored
   on receipt.  Bits that are not transmitted <bcp14>MUST</bcp14> be treated as if they
   are set to 0 on receipt.  Bits that are not supported by an
   implementation <bcp14>MUST</bcp14> be ignored on receipt.</t>
      <t>User-Defined Application Identifier Bits have no relationship to
   Standard Application Identifier Bits and are not managed by IANA or
   any other standards body.  It is recommended that these bits be used
   starting with bit 0 so as to minimize the number of octets required
   to advertise all UDAs. Undefined bits that are transmitted <bcp14>MUST</bcp14> be 
   transmitted as 0 and <bcp14>MUST</bcp14> be ignored on receipt. Bits that are not 
   transmitted <bcp14>MUST</bcp14> be treated as if they are set to 0 on receipt.  Bits that are not
   supported by an implementation <bcp14>MUST</bcp14> be ignored on receipt.</t>
      <t>If the link attribute advertisement is intended to be only used by a specific set of applications, 
corresponding bit masks <bcp14>MUST</bcp14> be present and one or more application-specific bits <bcp14>MUST</bcp14> be set for all
applications that use the link attributes advertised in the ASLA sub-TLV.</t>
      <t>Application Identifier Bit Masks apply to all link attributes that support application-specific 
values and are advertised in the ASLA sub-TLV.</t>
      <t>The advantage of not making the Application Identifier Bit Masks part of the attribute advertisement 
itself is that the format of any previously defined link attributes
can be kept and reused when advertising them in the ASLA sub-TLV.</t>
      <t>If the same attribute is advertised in more than one ASLA sub-TLV with the application 
listed in the Application Identifier Bit Masks, the application <bcp14>SHOULD</bcp14> use the first instance of 
advertisement and ignore any subsequent advertisements of that attribute.</t>
      <t>Link attributes <bcp14>MAY</bcp14> be advertised associated with zero-length
      Application Identifier Bit Masks for both standard applications
      and user-defined applications. Such link attribute advertisements
      <bcp14>MUST</bcp14> be used by standard applications and/or user-defined applications
      when no link attribute advertisements with a non-zero-length
      Application Identifier Bit Mask and a matching Application Identifier
      Bit set are present. Otherwise, such link attribute
      advertisements <bcp14>MUST NOT</bcp14> be used.</t>
      <t>This document defines the initial set of link attributes that <bcp14>MUST</bcp14> use the ASLA sub-TLV if 
advertised in the OSPFv2 Extended Link TLV or in the OSPFv3 Router-Link TLV. 
Documents that define new link attributes <bcp14>MUST</bcp14> state whether the new attributes support 
application-specific values and, as such, are advertised in an ASLA sub-TLV. The standard 
link attributes that are advertised in ASLA sub-TLVs are:

      </t>
      <ul>
        <li>Shared Risk Link Group <xref target="RFC4203"/></li>
        <li>Unidirectional Link Delay <xref target="RFC7471"/></li>
        <li>Min/Max Unidirectional Link Delay <xref target="RFC7471"/></li>
        <li>Unidirectional Delay Variation <xref target="RFC7471"/></li>
        <li>Unidirectional Link Loss <xref target="RFC7471"/></li>
        <li>Unidirectional Residual Bandwidth <xref target="RFC7471"/></li>
        <li>Unidirectional Available Bandwidth <xref target="RFC7471"/></li>
        <li>Unidirectional Utilized Bandwidth <xref target="RFC7471"/></li>
        <li>Administrative Group <xref target="RFC3630"/></li>
        <li>Extended Administrative Group <xref target="RFC7308"/></li>
        <li>TE Metric <xref target="RFC3630"/></li>
      </ul>
    </section>
    <section anchor="REUSED_ATTR">
      <name>Reused TE Link Attributes</name>
      <t>This section defines the use case and indicates the codepoints (<xref target="IANA"/>) from the "OSPFv2 Extended Link TLV
      Sub-TLVs" registry and "OSPFv3 Extended-LSA Sub-TLVs" registry for some of
      the link attributes that have been originally defined for RSVP-TE or
      GMPLS.</t>
      <section anchor="SRLG">
        <name>Shared Risk Link Group (SRLG)</name>
<t>The SRLG of a link can be used in OSPF-calculated IPFRR (IP Fast Reroute)
   <xref target="RFC5714"/> to compute a backup path 
  that does not share any SRLG with the protected link.</t>
        <t>To advertise the SRLG of the link in the OSPFv2 Extended Link TLV, the same format
   for the sub-TLV defined in <xref target="RFC4203" section="1.3"/> is used with TLV 
   type 11. Similarly, for OSPFv3 to advertise the SRLG in the OSPFv3 Router-Link
   TLV, TLV type 12 is used.</t>
      </section>
      <section>
        <name>Extended Metrics</name>
        <t><xref target="RFC3630"/> defines several link bandwidth types. <xref target="RFC7471"/> 
  defines extended link metrics that are based on link bandwidth, delay, and loss 
  characteristics. All of these can be used to compute primary and backup paths within an 
  OSPF area to satisfy requirements for bandwidth, delay (nominal or worst case), or loss.</t>
        <t>To advertise extended link metrics in the OSPFv2 Extended Link TLV, the same format
    for the sub-TLVs defined in <xref target="RFC7471"/> is used with the following 
    TLV types:
        </t>
        <dl>
          <dt>12:</dt>
          <dd>Unidirectional Link Delay</dd>
          <dt>13:</dt>
          <dd>Min/Max Unidirectional Link Delay</dd>
          <dt>14:</dt>
          <dd>Unidirectional Delay Variation</dd>
          <dt>15:</dt>
          <dd>Unidirectional Link Loss</dd>
          <dt>16:</dt>
          <dd>Unidirectional Residual Bandwidth</dd>
          <dt>17:</dt>
          <dd>Unidirectional Available Bandwidth</dd>
          <dt>18:</dt>
          <dd>Unidirectional Utilized Bandwidth</dd>
        </dl>
        <t>To advertise extended link metrics in the Router-Link TLV inside
	the OSPFv3 E-Router-LSA, the same format for the sub-TLVs defined in <xref target="RFC7471"/> is used with the following 
    TLV types:
        </t>
        <dl>
          <dt>13:</dt>
          <dd>Unidirectional Link Delay</dd>
          <dt>14:</dt>
          <dd>Min/Max Unidirectional Link Delay</dd>
          <dt>15:</dt>
          <dd>Unidirectional Delay Variation</dd>
          <dt>16:</dt>
          <dd>Unidirectional Link Loss</dd>
          <dt>17:</dt>
          <dd>Unidirectional Residual Bandwidth</dd>
          <dt>18:</dt>
          <dd>Unidirectional Available Bandwidth</dd>
          <dt>19:</dt>
          <dd>Unidirectional Utilized Bandwidth</dd>
        </dl>
      </section>
      <section>
        <name>Administrative Group</name>
        <t><xref target="RFC3630"/> and <xref target="RFC7308"/> define the Administrative Group and
  Extended Administrative Group sub-TLVs, respectively.</t>
        <t>To advertise the Administrative Group and Extended Administrative Group in the OSPFv2
    Extended Link TLV, the same format for the sub-TLVs defined in <xref target="RFC3630"/>
    and <xref target="RFC7308"/> is used with the following TLV types:
    
        </t>
        <dl>
          <dt>19:</dt>
          <dd>Administrative Group</dd>
          <dt>20:</dt>
          <dd>Extended Administrative Group</dd>
        </dl>
        <t>To advertise the Administrative Group and Extended Administrative Group in the OSPFv3
    Router-Link TLV, the same format for the sub-TLVs defined in <xref target="RFC3630"/>
    and <xref target="RFC7308"/> is used with the following TLV types:
    
        </t>
        <dl>
          <dt>20:</dt>
          <dd>Administrative Group</dd>
          <dt>21:</dt>
          <dd>Extended Administrative Group</dd>
        </dl>
      </section>
      <section>
        <name>TE Metric</name>
        <t><xref target="RFC3630"/> defines the TE Metric.</t>
        <t>To advertise the TE Metric in the OSPFv2 Extended Link TLV, 
  the same format for the sub-TLV defined in <xref target="RFC3630" section="2.5.5"/>
  is used with TLV type 22. Similarly, for OSPFv3 to advertise the 
  TE Metric in the OSPFv3 Router-Link TLV, TLV type 22 is used.</t>
      </section>
    </section>
    <section anchor="SPECIALMAXBANDW">
      <name>Maximum Link Bandwidth</name>
      <t>Maximum link bandwidth is an application-independent attribute of the
  link that is defined in <xref target="RFC3630"/>. Because
  it is an application-independent attribute, it <bcp14>MUST NOT</bcp14> be
  advertised in the ASLA sub-TLV. 

Instead, it <bcp14>MAY</bcp14> be 
  advertised as a sub-TLV of the Extended Link TLV in the Extended Link Opaque
  LSA in OSPFv2 <xref target="RFC7684"/> or as a sub-TLV of
  the Router-Link TLV in the E-Router-LSA Router-Link TLV in OSPFv3 
  <xref target="RFC8362"/>.</t>
      <t>To advertise the maximum link bandwidth in the OSPFv2 Extended Link TLV, the same
  format for the sub-TLV defined in <xref target="RFC3630"/> is used with 
  TLV type 23.</t>
      <t>To advertise the maximum link bandwidth in the OSPFv3 Router-Link TLV, the same
  format for the sub-TLV defined in <xref target="RFC3630"/> is used with  
  TLV type 23.</t>
    </section>
    <section anchor="EXT_METRICS">
      <name>Considerations for Extended TE Metrics</name>
      <t><xref target="RFC7471"/> defines a number of dynamic performance metrics associated
   with a link.  It is conceivable that such metrics could be measured
   specific to traffic associated with a specific application.
   Therefore, this document includes support for advertising these link
   attributes specific to a given application.  However, in practice, it
   may well be more practical to have these metrics reflect the
   performance of all traffic on the link regardless of application.  In
   such cases, advertisements for these attributes can be associated
   with all of the applications utilizing that link. This can be done	
   either by explicitly specifying the applications in the Application	
   Identifier Bit Mask or by using a zero-length Application Identifier	
   Bit Mask. The use of zero-length Application Identifier Bit Mask is
   further discussed in <xref target="ZLABM"/>.</t>
    </section>
    <section anchor="LOCALIPV6ADDR">
      <name>Local Interface IPv6 Address Sub-TLV</name>
      <t>The Local Interface IPv6 Address sub-TLV is an application-independent attribute of the
  link that is defined in <xref target="RFC5329"/>. Because it is an application-independent attribute, it <bcp14>MUST NOT</bcp14> be advertised in the ASLA sub-TLV.  Instead, it <bcp14>MAY</bcp14> be 
  advertised as a sub-TLV of the Router-Link TLV inside the OSPFv3 E-Router-LSA <xref target="RFC8362"/>.</t>
      <t>To advertise the Local Interface IPv6 Address sub-TLV in the OSPFv3 Router-Link TLV, 
  the same format for the sub-TLV defined in <xref target="RFC5329"/> is used with  
  TLV type 24.</t>
    </section>
    <section anchor="REMOTEIPV6ADDR">
      <name>Remote Interface IPv6 Address Sub-TLV</name>
      <t>The Remote Interface IPv6 Address sub-TLV is an application-independent attribute of the
  link that is defined in <xref target="RFC5329"/>. Because it is an application-independent attribute, it <bcp14>MUST NOT</bcp14> be advertised in the ASLA sub-TLV. Instead, it <bcp14>MAY</bcp14> be 
  advertised as a sub-TLV of the Router-Link TLV inside the OSPFv3 E-Router-LSA <xref target="RFC8362"/>.</t>
      <t>To advertise the Remote Interface IPv6 Address sub-TLV in the OSPFv3 Router-Link TLV, 
  the same format for the sub-TLV defined in <xref target="RFC5329"/> is used with  
  TLV type 25.</t>
    </section>
    <section>
      <name>Attribute Advertisements and Enablement</name>
      <t>This document defines extensions to support the advertisement of
   application-specific link attributes.</t>
      <t>There are applications where the application enablement on the link
      is relevant; for example, with RSVP-TE, one needs to make sure that RSVP
      is enabled on the link before sending an RSVP-TE signaling message over it.</t>
      <t>There are applications where the enablement of the application on the link is 
   irrelevant and has nothing to do with the fact that some link attributes are advertised 
   for the purpose of such application. An example of this is LFA.</t>
      <t>Whether the presence of link attribute advertisements for a given
   application indicates that the application is enabled on that link
   depends upon the application.  Similarly, whether the absence of link
   attribute advertisements indicates that the application is not
   enabled depends upon the application.</t>
      <t>In the case of RSVP-TE, the advertisement of application-specific
   link attributes has no implication of RSVP-TE being enabled on that link.
   The RSVP-TE enablement is solely derived from the information carried in 
   the OSPFv2 TE Opaque LSA  <xref target="RFC3630"/> and OSPFv3 Intra-Area-TE-LSA 
   <xref target="RFC5329"/>.</t>
      <t>In the case of SR Policy, advertisement of application-specific link
   attributes does not indicate enablement of SR Policy.  The advertisements
   are only used to support constraints that may be applied when
   specifying an explicit path.  SR Policy is implicitly enabled on all links
   that are part of the SR-enabled topology independent of
   the existence of link attribute advertisements.</t>
      <t>In the case of LFA, the advertisement of application-specific link
   attributes does not indicate enablement of LFA on that link.
   Enablement is controlled by local configuration.</t>
      <t>In the future, if additional standard applications are defined to
   use this mechanism, the specification defining this use <bcp14>MUST</bcp14> define
   the relationship between application-specific link attribute
   advertisements and enablement for that application.</t>
      <t>This document allows the advertisement of application-specific link
   attributes with no application identifiers, i.e., both the SABM and the UDABM are not present (see <xref target="ADVAPPVAL"/>).  
   This supports the use of the link attribute by any application.  In the presence of
   an application where the advertisement of link attributes is used to infer the enablement of an application on
   that link (e.g., RSVP-TE), the absence of the application identifier
   leaves ambiguous whether that application is enabled on such a link.
   This needs to be considered when making use of the "any application"
   encoding.</t>
    </section>
    <section>
      <name>Deployment Considerations</name>
      <section anchor="LEGACY_OSPF">
        <name>Use of Legacy RSVP-TE LSA Advertisements</name>
        <t>Bit identifiers for standard applications are defined in <xref target="ADVAPPVAL"/>.
   All of the identifiers defined in this document are associated with
   applications that were already deployed in some networks prior to
   the writing of this document.  Therefore, such applications have been
   deployed using the RSVP-TE LSA advertisements.  The standard applications
   defined in this document may continue to use RSVP-TE LSA advertisements
   for a given link so long as at least one of the following conditions
   is true:
   
        </t>
        <ul>
          <li>The application is RSVP-TE.</li>
          <li>The application is SR Policy or LFA, and RSVP-TE is not deployed
      anywhere in the network.</li>
          <li>The application is SR Policy or LFA, RSVP-TE is deployed in the
      network, and both the set of links on which SR Policy and/or LFA
      advertisements are required and the attribute values used by SR Policy
      and/or LFA on all such links are fully congruent with the links and
      attribute values used by RSVP-TE.</li>
        </ul>
        <t>Under the conditions defined above, implementations that support the
   extensions defined in this document have the choice of using RSVP-TE LSA
   advertisements or application-specific advertisements in support of
   SR Policy and/or LFA.  This will require implementations to provide
   controls specifying which types of advertisements are to be sent and processed on receipt for these applications.  Further discussion of
   the associated issues can be found in <xref target="IBCMC"/>.</t>
        <t>New applications that future documents define to make use of the
   advertisements defined in this document <bcp14>MUST NOT</bcp14> make use of RSVP-TE LSA
   advertisements. This simplifies deployment of new applications by
   eliminating the need to support multiple ways to advertise attributes
   for the new applications.</t>
      </section>
      <section anchor="ZLABM">
        <name>Use of Zero-Length Application Identifier Bit Masks</name>
        <t>Link attribute advertisements associated with zero-length Application
   Identifier Bit Masks for both standard applications and user-defined
   applications are usable by any application, subject to the
   restrictions specified in <xref target="ADVAPPVAL"/>.  If support for a new
   application is introduced on any node in a network in the presence of
   such advertisements, the new application will use these
   advertisements when the aforementioned restrictions are met.  If
   this is not what is intended, then existing link attribute
   advertisements <bcp14>MUST</bcp14> be readvertised with an explicit set of
   applications specified before a new application is introduced.</t>
      </section>
      <section anchor="IBCMC">
        <name>Interoperability, Backwards Compatibility, and Migration Concerns</name>
        <t>Existing deployments of RSVP-TE, SR Policy, and/or LFA utilize the
        legacy advertisements listed in <xref target="LEG_ADV"/>. Routers that do not
        support the extensions defined in this document will only process
        legacy advertisements and are likely to infer that RSVP-TE is enabled
        on the links for which legacy advertisements exist. It is expected
        that deployments using the legacy advertisements will persist for a
        significant period of time. Therefore, deployments using the
        extensions defined in this document in the presence of routers that
        do not support these extensions need to be able to interoperate with
        the use of legacy advertisements by the legacy routers. The following subsections 
        discuss interoperability and backwards-compatibility concerns for a number of
        deployment scenarios.</t>
        <section anchor="MACARSVP">
          <name>Multiple Applications: Common Attributes with  RSVP-TE</name>
          <t>In cases where multiple applications are utilizing a given link,
          one of the applications is RSVP-TE, and all link attributes for a
          given link are common to the set of applications utilizing that
          link, interoperability is achieved by using legacy advertisements for RSVP-TE.
          Attributes for applications other than RSVP-TE <bcp14>MUST</bcp14> be advertised using 
          application-specific advertisements. This results in duplicate 
          advertisements for those attributes.</t>
        </section>
        <section anchor="MAALLNS">
          <name>Multiple Applications: Some Attributes Not Shared with RSVP-TE</name>
          <t>In cases where one or more applications other than RSVP-TE are
          utilizing a given link and one or more link attribute values are not
          shared with RSVP-TE, interoperability is achieved by using legacy advertisements 
          for RSVP-TE. Attributes for applications other than RSVP-TE <bcp14>MUST</bcp14> be advertised using 
          application-specific advertisements. In cases where some link attributes are 
          shared with RSVP-TE, this requires duplicate advertisements for those attributes.</t>
        </section>
        <section anchor="LEGACY">
          <name>Interoperability with Legacy Routers</name>
          <t>
	   For the standard applications defined in this document,
	    routers that do not
	    support the extensions defined in this document will send and
	    receive only legacy link attribute advertisements. In addition,
	    the link attribute values associated with these applications
	    are always shared since legacy routers have no way of advertising or
	    processing application-specific values. So long as there is any
	    legacy router in the network that has any of the standard
	    applications
	    defined in this document enabled, all routers <bcp14>MUST</bcp14>
	    continue to advertise link attributes for these applications using
	    only legacy advertisements. ASLA advertisements for these
	    applications <bcp14>MUST NOT</bcp14> be sent.  Once all legacy
	    routers have been upgraded, migration from legacy advertisements
	    to ASLA advertisements can be achieved via the following steps:
          </t>
          <ol type="%d)">
	   <li derivedCounter="1)">Send new application-specific advertisements while continuing to
	   advertise using the legacy advertisement (all advertisements are
	   then duplicated). Receiving routers continue to use legacy advertisements.</li>
            <li derivedCounter="2)">Enable the use of the application-specific advertisements on
	   all routers.</li>
            <li derivedCounter="3)">Keep legacy advertisements if needed for RSVP-TE purposes.</li>
          </ol>
          <t>When the migration is complete, it then becomes possible to
          advertise incongruent values per application on a given link.</t>
          <t>Documents defining new applications that make use of the
          application-specific advertisements defined in this document <bcp14>MUST</bcp14>
          discuss interoperability and backwards-compatibility issues that
          could occur in the presence of routers that do not support the new
          application.</t>
        </section>
        <section anchor="APPRSVP">
          <name>Use of Application-Specific Advertisements for RSVP-TE</name>
          <t>The extensions defined in this document support RSVP-TE as one of
          the supported applications. It is, however, <bcp14>RECOMMENDED</bcp14> to advertise all 
          link attributes for RSVP-TE in the existing OSPFv2 TE Opaque LSA 
          <xref target="RFC3630"/> and OSPFv3 Intra-Area-TE-LSA <xref target="RFC5329"/>  
          to maintain backwards compatibility. RSVP-TE can eventually 
          utilize the application-specific advertisements for newly defined
	  link attributes that are defined as application specific.</t>
          <t>Link attributes that are not allowed to be advertised in the ASLA sub-TLV, 
          such as maximum reservable link bandwidth and unreserved bandwidth, <bcp14>MUST</bcp14> use the 
          OSPFv2 TE Opaque LSA <xref target="RFC3630"/> and OSPFv3 Intra-Area-TE-LSA 
          <xref target="RFC5329"/> and <bcp14>MUST NOT</bcp14> be advertised in the ASLA sub-TLV.</t>
        </section>
      </section>
    </section>
    <section>
      <name>Security Considerations</name>
      <t>Existing security extensions as described in <xref target="RFC2328"/>, 
       <xref target="RFC5340"/>, and <xref target="RFC8362"/> apply to extensions 
       defined in this document. While OSPF is under a single administrative domain, 
       there can be deployments where potential attackers have access to one or more 
       networks in the OSPF routing domain. In these deployments, stronger authentication 
       mechanisms such as those specified in <xref target="RFC5709"/>, 
       <xref target="RFC7474"/>, <xref target="RFC4552"/>, or 
       <xref target="RFC7166"/> <bcp14>SHOULD</bcp14> be
      used.</t>
      <t>Implementations must ensure that if any of the TLVs and sub-TLVs
      defined in this document are malformed, they are detected and do not
      facilitate a vulnerability for attackers to crash or otherwise compromise
      the OSPF router or routing process. Reception of a
      malformed TLV or sub-TLV <bcp14>SHOULD</bcp14> be counted and/or logged
      for further analysis. Logging of malformed TLVs and sub-TLVs
      <bcp14>SHOULD</bcp14> be rate-limited to prevent a denial-of-service
      (DoS) attack (distributed or otherwise) from overloading the OSPF
      control plane.</t>
      <t>This document defines an improved way to advertise link attributes.
      Tampering with the information defined in this document may have an
      effect on applications using it, including impacting TE, which uses various link attributes for its path
      computation. This is similar in nature to the impacts associated with,
      for example, <xref target="RFC3630"/>.  As the
      advertisements defined in this document limit the scope to specific
      applications, the impact of tampering is similarly limited in scope.</t>
    </section>
    <section anchor="IANA">
      <name>IANA Considerations</name>
      <t>This specification updates two existing registries:
      </t>
      <ul>
        <li>the "OSPFv2 Extended Link TLV Sub-TLVs" registry</li>
        <li>the "OSPFv3 Extended-LSA Sub-TLVs" registry</li>
      </ul>
      <t>The values defined in this document have been allocated using the
      IETF Review procedure as described in
      <xref target="RFC8126"/>.</t>
      <section anchor="OSPFV2IANA">
        <name>OSPFv2</name>
        <t>The "OSPFv2 Extended Link TLV Sub-TLVs" registry <xref target="RFC7684"/> defines sub-TLVs at any level of
        nesting for OSPFv2 Extended Link TLVs. IANA has assigned the following
        sub-TLV types in the "OSPFv2 Extended Link TLV Sub-TLVs" registry:
        </t>
        <dl>
          <dt>10:</dt>
          <dd>Application-Specific Link Attributes</dd>
          <dt>11:</dt>
          <dd>Shared Risk Link Group</dd>
          <dt>12:</dt>
          <dd>Unidirectional Link Delay</dd>
          <dt>13:</dt>
          <dd>Min/Max Unidirectional Link Delay</dd>
          <dt>14:</dt>
          <dd>Unidirectional Delay Variation</dd>
          <dt>15:</dt>
          <dd>Unidirectional Link Loss</dd>
          <dt>16:</dt>
          <dd>Unidirectional Residual Bandwidth</dd>
          <dt>17:</dt>
          <dd>Unidirectional Available Bandwidth</dd>
          <dt>18:</dt>
          <dd>Unidirectional Utilized Bandwidth</dd>
          <dt>19:</dt>
          <dd>Administrative Group</dd>
          <dt>20:</dt>
          <dd>Extended Administrative Group</dd>
          <dt>22:</dt>
          <dd>TE Metric</dd>
          <dt>23:</dt>
          <dd>Maximum link bandwidth</dd>
        </dl>
      </section>
      <section anchor="OSPFV3IANA">
        <name>OSPFv3</name>
        <t>The "OSPFv3 Extended-LSA Sub-TLVs" registry <xref target="RFC8362"/> defines
	sub-TLVs at any level of nesting for OSPFv3
        Extended LSAs. IANA has assigned the following sub-TLV types in the 
        "OSPFv3 Extended-LSA Sub-TLVs" registry:
        </t>
        <dl>
          <dt>11:</dt>
          <dd>Application-Specific Link Attributes</dd>
          <dt>12:</dt>
          <dd>Shared Risk Link Group</dd>
          <dt>13:</dt>
          <dd>Unidirectional Link Delay</dd>
          <dt>14:</dt>
          <dd>Min/Max Unidirectional Link Delay</dd>
          <dt>15:</dt>
          <dd>Unidirectional Delay Variation</dd>
          <dt>16:</dt>
          <dd>Unidirectional Link Loss</dd>
          <dt>17:</dt>
          <dd>Unidirectional Residual Bandwidth</dd>
          <dt>18:</dt>
          <dd>Unidirectional Available Bandwidth</dd>
          <dt>19:</dt>
          <dd>Unidirectional Utilized Bandwidth</dd>
          <dt>20:</dt>
          <dd>Administrative Group</dd>
          <dt>21:</dt>
          <dd>Extended Administrative Group</dd>
          <dt>22:</dt>
          <dd>TE Metric</dd>
          <dt>23:</dt>
          <dd>Maximum link bandwidth</dd>
          <dt>24:</dt>
          <dd>Local Interface IPv6 Address</dd>
          <dt>25:</dt>
          <dd>Remote Interface IPv6 Address</dd>
        </dl>
      </section>
    </section>
    <section anchor="changes-to-rfc8920">
      <name>Changes to RFC 8920</name>
      <t>Discussion within the LSR WG indicated that there was confusion regarding
      the use of ASLA advertisements that had a zero-length SABM/UDABM.
      The discussion can be seen by searching the LSR WG mailing
   list archives for the thread "Proposed Errata for RFCs 8919/8920"
   starting on 15 June 2021. </t>
      <t>Changes to <xref target="ADVAPPVAL"/> have been introduced to clarify normative
      behavior in the presence of such advertisements. <xref target="RFC8920"/> defines advertising link attributes with zero-length
      SABM and zero-length UDABM as a means of advertising link
      attributes that can be used by any application. However, the text uses
      the word "permitted", suggesting that the use of such advertisements
      is "optional". Such an interpretation could lead to interoperability
      issues and is not what was intended.</t>
      <t>The replacement text makes explicit the specific conditions when such
      advertisements <bcp14>MUST</bcp14> be used and the specific conditions under which they <bcp14>MUST NOT</bcp14>
      be used.</t>
      <t>A subsection discussing the use of zero-length Application Identifier Bit Masks has been added for greater consistency with <xref target="RFC9479"/>. See <xref target="ZLABM"/>.</t>
    </section>
  </middle>
  <back>
    <references>
      <name>References</name>
      <references>
        <name>Normative References</name>
<reference anchor="RFC9479" target="https://www.rfc-editor.org/info/rfc9479">
  <front>
    <title>IS-IS Application-Specific Link Attributes</title>
    <author initials="L." surname="Ginsberg" fullname="Les Ginsberg">
    </author>
    <author initials="P." surname="Psenak" fullname="Peter Psenak">
    </author>
    <author initials="S." surname="Previdi" fullname="Stefano Previdi">
    </author>
    <author initials="W." surname="Henderickx" fullname="Wim Henderickx">
    </author>
    <author initials="J." surname="Drake" fullname="John Drake">
    </author>
    <date month="October" year="2023"/>
  </front>
  <seriesInfo name="RFC" value="9479"/>
  <seriesInfo name="DOI" value="10.17487/RFC9479"/>
</reference>

<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2328.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3630.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.4203.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5329.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5340.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7308.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7471.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7684.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8362.xml"/>

      </references>
      <references>
        <name>Informative References</name>

<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3209.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.4552.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5286.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5709.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5714.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7166.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7474.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7855.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8126.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8920.xml"/>
<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.9256.xml"/>

      </references>
    </references>
    <section numbered="false">
      <name>Acknowledgments</name>
      <t>The following acknowledgments are included in <xref target="RFC8920"/>:</t>
      <t>Thanks to <contact fullname="Chris Bowers"/> for his review and comments.</t>
      <t>Thanks to <contact fullname="Alvaro Retana"/> for his detailed review and comments.</t>
      <t>For this document, the authors would like to thank
      <contact fullname="Bruno Decraene"/>.</t>
    </section>
    <section anchor="CONTR" numbered="false">
      <name>Contributors</name>
      <t>The following people contributed to the content
      of this document and should be considered as coauthors:</t>
      <contact fullname="Acee Lindem">
        <organization>LabN Consulting, L.L.C.</organization>
        <address>
          <postal>
            <country>United States of America</country>
          </postal>
          <email>acee.ietf@gmail.com</email>
        </address>
      </contact>
      <contact fullname="Ketan Talaulikar">
        <organization>Cisco Systems</organization>
        <address>
          <postal>
            <country>India</country>
          </postal>
          <email>ketant.ietf@gmail.com</email>
        </address>
      </contact>
      <contact fullname="Hannes Gredler">
        <organization>RtBrick Inc.</organization>
        <address>
          <email>hannes@rtbrick.com</email>
        </address>
      </contact>
    </section>
  </back>
</rfc>
