<?xml version='1.0' encoding='UTF-8'?>

<!DOCTYPE rfc [
  <!ENTITY nbsp    "&#160;">
  <!ENTITY zwsp   "&#8203;">
  <!ENTITY nbhy   "&#8209;">
  <!ENTITY wj     "&#8288;">
]>

<rfc xmlns:xi="http://www.w3.org/2001/XInclude" category="exp" docName="draft-ietf-lsr-dynamic-flooding-18" number="9667" updates="" obsoletes="" ipr="trust200902" consensus="true" submissionType="IETF" tocInclude="true" tocDepth="4" symRefs="true" sortRefs="true" version="3" xml:lang="en">

  <front>
    <title abbrev="Dynamic Flooding">Dynamic Flooding on Dense Graphs</title>
    <seriesInfo name="RFC" value="9667"/>

    <author fullname="Tony Li" initials="T." role="editor" surname="Li">
      <organization>Juniper Networks</organization>
      <address>
        <postal>
          <street>1133 Innovation Way</street>
          <city>Sunnyvale</city>
          <region>California</region>
          <code>94089</code>
          <country>United States of America</country>
        </postal>
        <email>tony.li@tony.li</email>
      </address>
    </author>
    <author fullname="Peter Psenak" initials="P." role="editor" surname="Psenak">
      <organization>Cisco Systems, Inc.</organization>
      <address>
        <postal>
          <street>Eurovea Centre, Central 3</street>
          <street>Pribinova Street 10</street>
          <city>Bratislava</city>
          <code>81109</code>
          <country>Slovakia</country>
        </postal>
        <email>ppsenak@cisco.com</email>
      </address>
    </author>
    <author fullname="Huaimo Chen" initials="H" surname="Chen">
      <organization>Futurewei</organization>
      <address>
        <postal>
          <city>Boston</city>
	  <region>Massachusetts</region>
          <country>United States of America</country>
        </postal>
        <email>hchen.ietf@gmail.com</email>
      </address>
    </author>
    <author fullname="Luay Jalil" initials="L." surname="Jalil">
      <organization>Verizon</organization>
      <address>
        <postal>
          <street/>
          <city>Richardson</city>
          <region>Texas</region>
          <code>75081</code>
          <country>United States of America</country>
        </postal>
        <email>luay.jalil@verizon.com</email>
      </address>
    </author>
    <author fullname="Srinath Dontula" initials="S." surname="Dontula">
      <organization>AT&amp;T</organization>
      <address>
        <postal>
          <street>200 S Laurel Ave</street>
          <city>Middletown</city>
          <region>New Jersey</region>
          <code>07748</code>
          <country>United States of America</country>
        </postal>
        <email>sd947e@att.com</email>
      </address>
    </author>

    <date year="2024" month="October"/>

    <area>RTG</area>
    <workgroup>lsr</workgroup>

    <keyword>datacenter</keyword>
    <keyword>IGP</keyword>
    <keyword>routing</keyword>
    <keyword>flooding</keyword>
    <keyword>dense</keyword>
    <keyword>graph</keyword>
    <keyword>topology</keyword>

    <abstract>
      <t>Routing with link-state protocols in dense network topologies can
      result in suboptimal convergence times due to the overhead associated
      with flooding. This can be addressed by decreasing the flooding topology
      so that it is less dense.</t>
      <t>This document discusses the problem in some depth and an
      architectural solution. Specific protocol changes for IS-IS, OSPFv2, and
      OSPFv3 are described in this document.</t>
    </abstract>
  </front>
  <middle>
    <section anchor="Intro">
      <name>Introduction</name>
      <t>In recent years, there has been increased focus on how to address the
      dynamic routing of networks that have a bipartite (also known as spine-leaf or
      leaf-spine), Clos <xref target="Clos"></xref>, or Fat-tree <xref target="Leiserson"></xref> topology. Conventional Interior
      Gateway Protocols (IGPs; i.e., IS-IS <xref target="ISO10589"></xref>, OSPFv2
      <xref target="RFC2328"></xref>, and OSPFv3 <xref target="RFC5340"></xref>) underperform, redundantly flooding
      information throughout the dense topology. This leads to overloaded control
      plane inputs and thereby create operational issues. For practical
      considerations, network architects have resorted to applying
      unconventional techniques to address the problem, e.g., applying BGP in the data center <xref target="RFC7938"/>. 
      However, some network architects feel that using an Exterior Gateway
      Protocol (EGP) as an IGP is suboptimal, perhaps only because of
      the configuration overhead.</t>
      <t>The primary issue that is demonstrated when conventional IGPs
      are applied is the poor reaction of the network to topology changes.
      Normal link-state routing protocols rely on a flooding algorithm for
      state distribution within an area. In a dense topology, this flooding
      algorithm is highly redundant and results in unnecessary overhead. 
Each
      node in the topology receives each link state update multiple times.
      Ultimately, all of the redundant copies will be discarded, but only
      after they have reached the control plane and have been processed. This
      creates issues because significant Link State Database (LSDB) updates can
      become queued behind many redundant copies of another update. This
      delays convergence as the LSDB does not stabilize
      promptly.</t>
      <t>In a real-world implementation, the packet queues leading to
      the control plane are necessarily of finite size, so if the
      flooding rate exceeds the update processing rate for long
      enough, then the control plane will be obligated to drop
      incoming updates. If these lost updates are of significance,
      this will further delay the stabilization of the LSDB
      and the convergence of the network.</t>
      <t>This is not a new problem. Historically, when routing protocols have
      been deployed in networks where the underlying topology is a complete
      graph, there have been similar issues. This was more common when the
      underlying link-layer fabric presented the network layer with a full
      mesh of virtual connections. This was addressed by reducing the flooding
      topology through IS-IS Mesh Groups <xref target="RFC2973"/>, but
      this approach requires careful configuration of the flooding
      topology.</t>
      <t>Thus, the root problem is not limited to massively scalable data
      centers. It exists with any dense topology at scale.</t>
      <t>Link-state routing protocols were conceived when links were
      very expensive and topologies were sparse. The fact that those
      same designs are suboptimal in a dense topology should not come
      as a huge surprise. Technology has progressed to the point where
      links are cheap and common. This represents a complete reversal
      in the economic fundamentals of network engineering. The
      original designs are to be commended for continuing to provide
      correct operation to this point and optimizations for operation
      in today's environment are to be expected.</t>
      <section><name>Requirements Language</name>
        <t>
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL
    NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as
    described in BCP&nbsp;14 <xref target="RFC2119"/> <xref target="RFC8174"/> 
    when, and only when, they appear in all capitals, as shown here.
        </t>
        <t>These words may also appear in this document in
        lower case as plain English words without their normative meanings.</t>
      </section>
    </section>
    <section>
      <name>Problem Statement</name>
      <t>In a dense topology, the flooding algorithm that is the heart of
      conventional link-state routing protocols causes a great deal of
      redundant messaging. This is exacerbated by scale. While the protocol
      can survive this combination, the redundant messaging is unnecessary
      overhead and delays convergence. Thus, the problem is how to provide routing
      in dense, scalable topologies with rapid convergence.</t>
    </section>
    <section>
      <name>Solution Requirements</name>
      <t>A solution to this problem must meet the following requirements:
      </t>
      <ol spacing="normal" type="Requirement %d:"><li>
          <t>Provide a dynamic routing solution. Reachability must be restored
          after any topology change.</t>
        </li>
        <li>
          <t>Provide a significant improvement in convergence.</t>
        </li>
        <li>
	  <t>
            The solution should address a variety of dense
            topologies. Just addressing a complete bipartite topology
            such as K5,8 is insufficient (see <xref target="Bondy"/>). 
            Multi-stage Clos topologies must also be addressed, as
            well as topologies that are slight variants. Addressing
            complete graphs is a good demonstration of generality.
          </t>
        </li>
        <li>
          <t>There must be no single point of failure. The loss of any link or
          node should not unduly hinder convergence.</t>
        </li>
        <li>
          <t>
	    The workload for flooding should be evenly
	    distributed. A hot spot, where one node has an
	    extreme workload, would be a performance limitation and a
	    vulnerability for resiliency.
          </t>
        </li>
        <li>
          <t>Dense topologies are subgraphs of much larger topologies.
          Operational efficiency requires that the dense subgraph not
          operate in a radically different manner than the remainder
          of the topology.  While some operational differences are
          permissible, they should be minimized. Any change to any
          node outside of the dense subgraph is not acceptable. These
          situations occur when massively scaled data centers are part
          of an overall larger wide-area network. Having a second
          protocol operating just on this subgraph would add much more
          complexity at the edge of the subgraph where the two
          protocols would have to interoperate.</t>
        </li>
      </ol>
    </section>
    <section>
      <name>Dynamic Flooding</name>
      <t>The combination of a dense topology and flooding on the
      physical topology is suboptimal for network scaling.  However,
      if the flooding topology is decoupled from the physical topology
      and restricted to a greatly reduced portion of that topology,
      the result can be efficient flooding and the resilience
      of existing protocols. A node that supports flooding on the
      decoupled flooding topology is said to support dynamic
      flooding.</t>


      <t>With dynamic flooding, the flooding topology is computed
      within an IGP area with the dense topology either centrally on
      an elected node, termed the Area Leader, or in a distributed
      manner on all nodes that are supporting dynamic flooding. If the
      flooding topology is computed centrally, it is encoded into and
      distributed as part of the normal LSDB.  This is
      the centralized mode of operation. If the flooding topology is
      computed in a distributed fashion, this is the distributed
      mode of operation. Nodes within such an IGP area would only
      flood on the flooding topology. On links outside of the flooding
      topology, normal database synchronization mechanisms, i.e., OSPF
      database exchange and IS-IS Complete Sequence Number PDUs (CSNPs), would apply, but flooding may not. 
      The detailed behavior of the nodes participating in IGP is
      described in <xref target="BEHAVIOR"/>. New link-state
      information that arrives from outside of the flooding topology
      suggests that the sender has no flooding topology information or
      that it is operating on old information about the flooding
      topology. In these cases, the new link-state information should
      be flooded on the flooding topology as well.</t>
      <t>The flooding topology covers the full set of nodes within the area,
      but excludes some of the links that standard flooding would employ.</t>
      <t>
        Since the flooding topology is computed before topology changes, the
        effort required to compute it does not factor into the convergence
        time and can be done when the topology is stable.  In the case of
        centralized mode, the speed of the computation and its distribution is
        not a significant issue.
      </t>
      <t>
	Graph theory defines the "degree" of a node to be the number
	of edges that are attached to the node. To keep the
	flooding workload scalable and distributed, there should be no
	nodes in the flooding topology that have a much higher degree
	than other nodes.
      </t>
      <t>If a node does not have any flooding topology information
      when it receives new link-state information, it should flood
      according to standard flooding rules. This situation will occur
      when the dense topology is first established but is unlikely to
      recur.</t>
      <t>
	Link-state protocols are intentionally designed to be
	asynchronous with nodes acting independently. During the
	flooding process, different nodes will have different
	information, resulting in transient conditions that can
	temporarily produce suboptimal forwarding. These periods of
	transient conditions are known as "transients."
      </t>
      <t>When centralized mode is used and if there are
      multiple flooding topologies being advertised during a transient, then nodes should flood
      link-state updates on all of the flooding topologies. Each node should
      locally evaluate the election of the Area Leader for the IGP area and
      first flood on its flooding topology. The rationale behind this is
      straightforward: if there is a transient and there has been a recent
      change in Area Leader, then propagating topology information promptly
      along the most likely flooding topology should be the priority.</t>
      <t>During transients, loops may form in the flooding
      topology. This is not problematic, as the standard flooding
      rules would cause duplicate updates to be ignored. Similarly,
      during transients, the flooding topology may become
      disconnected. <xref target="PARTITIONED_FT"/> discusses how such
      conditions are handled.</t>
      <section>
        <name>Applicability</name>
        <t>In a complete graph, this approach is appealing because it
        drastically decreases the flooding topology without the manual
        configuration of mesh groups. By controlling the diameter of the
        flooding topology, as well as the maximum node degree in the flooding
        topology, convergence time goals can be met, and the stability of the
        control plane can be assured.</t>
        <t>Similarly, in a massively scaled data center (where there are many
        opportunities for redundant flooding), this mechanism guarantees that
        flooding is redundant, with each leaf and spine well connected, while
        ensuring that no update takes too many hops and that no node
        shares an undue portion of the flooding effort.</t>
        <t>In a network where only a portion of the nodes support dynamic
        flooding, the remaining nodes will continue to perform standard
        flooding. This is not an issue for correctness, as no node can become
        isolated.</t>
        <t>
          Flooding that is initiated by nodes that support dynamic
          flooding will remain within the flooding topology until it
          reaches a legacy node, where standard flooding is
          resumed. Standard flooding will be bounded by nodes
          supporting dynamic flooding, which can help limit the
          propagation of unnecessary flooding. Whether or not the
          network can remain stable in this condition is very
          dependent on the number and location of the nodes that
          support dynamic flooding.
        </t>
        <t>During incremental deployment of dynamic flooding, an area will
        consist of one or more sets of connected nodes that support dynamic
        flooding and one or more sets of connected nodes that do not, i.e.,
        nodes that support standard flooding. The flooding topology is the
        union of these sets of nodes. Each set of nodes that does not support
        dynamic flooding needs to be part of the flooding topology and such a
        set of nodes may provide connectivity between two or more sets of
        nodes that support dynamic flooding.</t>
      </section>
      <section>
        <name>Leader Election</name>
        <t>A single node within the dense topology is elected as an Area
        Leader.</t>
        <t>A generalization of the mechanisms used in existing
        Designated Router (OSPF) or Designated Intermediate-System
        (IS-IS) elections is used for leader election. The elected
        node is known as the Area Leader.</t>
        <t>In the case of centralized mode, the Area Leader is responsible for
        computing and distributing the flooding topology. When a new Area
        Leader is elected and has distributed new flooding topology
        information, then any prior Area Leaders should withdraw any of their
        flooding topology information from their LSDB
        entries.</t>
        <t>In the case of distributed mode, the distributed algorithm
        advertised by the Area Leader <bcp14>MUST</bcp14> be used by all nodes that
        participate in dynamic flooding.</t>
        <t>Not every node needs to be a candidate to be the Area
        Leader within an area, as a single candidate is sufficient for
        correct operation. However, for redundancy, it is strongly
        <bcp14>RECOMMENDED</bcp14> that there be multiple candidates.</t>
      </section>
      <section>
        <name>Computing the Flooding Topology</name>
        <t>There is a great deal of flexibility in how the flooding
        topology may be computed. For resilience, it needs to at least
        contain a cycle of all nodes in the dense subgraph. However,
        additional links could be added to decrease the convergence
        time. The trade-off between the density of the flooding
        topology and the convergence time is a matter for further
        study. The exact algorithm for computing the flooding topology
        in the case of the centralized computation need not be
        standardized, as it is not an interoperability issue. Only the
        encoding of the resultant topology needs to be documented. In
        the case of distributed mode, all nodes in the IGP area need
        to use the same algorithm to compute the flooding topology. It
        is possible to use private algorithms to compute flooding
        topology, so long as all nodes in the IGP area use the same
        algorithm.</t>
        <t>While the flooding topology should be a covering cycle, it need not
        be a Hamiltonian cycle where each node appears only once. In fact, in
        many relevant topologies, this will not be possible (e.g., K5,8). 
This is
        fortunate, as computing a Hamiltonian cycle is known to be
        NP-complete.</t>
        <t>A simple algorithm to compute the topology for a complete bipartite
        graph is to simply select unvisited nodes on each side of the graph
        until both sides are completely visited. If the numbers of nodes on
        each side of the graph are unequal, then revisiting nodes on the less
        populated side of the graph will be inevitable. This algorithm can run
        in O(N) time, so it is quite efficient.</t>
        <t>While a simple cycle is adequate for correctness and resiliency, it
        may not be optimal for convergence. At scale, a cycle may have a
        diameter that is half the number of nodes in the graph. This could
        cause an undue delay in link-state update propagation. Therefore, it
        may be useful to have a bound on the diameter of the flooding
        topology. Introducing more links into the flooding topology would
        reduce the diameter but at the trade-off of possibly adding redundant
        messaging. The optimal trade-off between convergence time and graph
        diameter is for further study.</t>
        <t>Similarly, if additional redundancy is added to the flooding
        topology, specific nodes in that topology may end up with a very high
        degree. This could result in overloading the control plane of those
        nodes, resulting in poor convergence. Thus, it may be
        preferable to have
        an upper bound on the degree of nodes in the flooding topology. Again,
        the optimal trade-off between graph diameter, node degree,
        convergence time, and topology computation time is for further
        study.</t>
        <t>If the leader chooses to include a multi-access broadcast
        LAN segment as part of the flooding topology, all of the
        adjacencies in that LAN segment should be included as
        well. Once updates are flooded on the LAN, they will be
        received by every attached node.</t>
      </section>
      <section>
        <name>Topologies on Complete Bipartite Graphs</name>
        <t>Complete bipartite graph topologies have become popular for data
        center applications and are commonly called leaf-spine or spine-leaf
        topologies. This section discusses some flooding topologies that
        are of particular interest in these networks.</t>
        <section>
          <name>A Minimal Flooding Topology</name>
          <t>A minimal flooding topology on a complete bipartite
          graph is one in which the topology is connected and each node has at
          least degree two. This is of interest because it guarantees that the
          flooding topology has no single point of failure.</t>
          <t>In practice, this implies that every leaf node in the flooding
          topology will have a degree of two. As there are usually more leaves
          than spines, the degree of the spines will be higher, but the load
          on the individual spines can be evenly distributed.</t>
          <t>This type of flooding topology is also of interest
          because it scales well. As the number of leaves increases,
          it is possible to construct flooding topologies that perform
          well. Specifically, for N spines and M leaves, if M &gt;=
          N(N/2-1), then there is a flooding topology that has a
          diameter of 4.</t>
        </section>
        <section anchor="Xia">
          <name>Xia Topologies</name>
          <t>A Xia topology on a complete bipartite graph is one in
          which all spine nodes are biconnected through leaves with degree
          two, but the remaining leaves all have degree one and are evenly
          distributed across the spines.</t>
          <t>Constructively, one can create a Xia topology by iterating through
          the spines. Each spine can be connected to the next spine by
          selecting any unused leaf. Since leaves are connected to all spines,
          all leaves will have a connection to both the first and second spine
          and one can therefore choose any leaf without loss of generality.
          Continuing this iteration across all of the spines, selecting a new
          leaf at each iteration will result in a path that connects all
          spines. Adding one more leaf between the last and first spine will
          produce a cycle of N spines and N leaves.</t>
          <t>At this point, M-N leaves remain unconnected. These can be
          distributed evenly across the remaining spines and connected by a
          single link.</t>
          <t>Xia topologies represent a compromise that trades off increased
          risk and decreased performance for lower flooding amplification. Xia
          topologies will have a larger diameter. For M spines, the diameter
          will be M + 2.</t>
          <t>In a Xia topology, some leaves are singly connected. This
          represents a risk in that convergence may be delayed in some failures. However, there may be some alternate behaviors that can be
          employed to mitigate these risks. If a leaf node sees that its
          single link on the flooding topology has failed, it can compensate
          by performing a database synchronization check with a different
          spine. Similarly, if a leaf determines that its connected spine on
          the flooding topology has failed, it can compensate by performing a
          database synchronization check with a different spine. In both of
          these cases, the synchronization check is intended to ameliorate any
          delays in link-state propagation due to the fragmentation of the
          flooding topology.</t>
          <t>The benefit of this topology is that flooding load is easily
          understood. Each node in the spine cycle will never receive an
          update more than twice. For M leaves and N spines, a spine never
          transmits more than (M/N +1) updates.</t>
        </section>
        <section>
          <name>Optimization</name>
          <t>If two nodes are adjacent in the flooding topology and
          there is a set of parallel links between them, then any
          given update <bcp14>MUST</bcp14> be flooded over only one of those
          links. The selection of the specific link is
          implementation-specific.</t>
        </section>
      </section>
      <section anchor="ENCODING_THE_FLOODING_TOPOLOGY">
        <name>Encoding the Flooding Topology</name>
        <t>There are a variety of ways that the flooding topology could be
        encoded efficiently. If the topology was only a cycle, a simple list
        of the nodes in the topology would suffice. However, this is
        insufficiently flexible, as it would require a slightly different
        encoding scheme as soon as a single additional link is added. Instead,
        this document chooses to encode the flooding topology as a set of intersecting
        paths, where each path is a set of connected links.</t>
        <t>Advertisement of the flooding topology includes support for
        multi-access broadcast LANs. When a LAN is included in the
        flooding topology, all edges between the LAN and nodes
        connected to the LAN are assumed to be part of the flooding
        topology. To reduce the size of the flooding topology
        advertisement, explicit advertisement of these edges is
        optional. Note that this may result in the possibility of
        "hidden nodes" or "stealth nodes", which are part of the
        flooding topology but are not explicitly mentioned in the
        flooding topology advertisements. These hidden nodes can be
        found by examination of the LSDB where
        connectivity between a LAN and nodes connected to the LAN is
        fully specified.</t>
        <t>Note that while all nodes <bcp14>MUST</bcp14> be part of the advertised flooding
        topology, not all multi-access LANs need to be included. Only those
        LANs that are part of the flooding topology need to be included in
        the advertised flooding topology.</t>
        <t>Other encodings are certainly possible. This document has
        attempted to make a useful trade-off between simplicity,
        generality, and space.</t>
      </section>
      <section>
        <name>Advertising the Local Edges Enabled for Flooding</name>
        <t>Correct operation of the flooding topology requires that all nodes
        that participate in the flooding topology choose local links for
        flooding that are part of the calculated flooding topology.
        Failure to do so could result in an unexpected partition of the flooding
        topology and/or suboptimal flooding reduction. 
        As an aid to diagnosing problems when dynamic flooding is in use, this
        document defines a means of advertising the Local Edges Enabled for 
        Flooding (LEEF). The protocol-specific encodings are defined in Sections <xref
        target="IS-IS_LEEF_ADVERTISEMENT" format="counter"/> and <xref
        target="OSPF_LEEF_ADVERTISEMENT" format="counter"/>.</t>
        <t>The following guidelines apply:</t>
        <ul spacing="normal">
          <li>
            <t>Advertisement of LEEF is optional.</t>
          </li>
          <li>
            <t>As the flooding topology is defined in terms of edges (i.e.,
            pairs of nodes) and not in terms of links, the advertisement
            <bcp14>SHOULD</bcp14> indicate that all such links have been
            enabled in cases where parallel adjacencies to the same neighbor
            exist.</t>
          </li>
          <li>
            <t>LEEF advertisements <bcp14>MUST NOT</bcp14> include edges enabled for
            temporary flooding (<xref target="FLOODING_BEHAVIOR"/>).</t>
          </li>
          <li>
            <t>LEEF advertisements <bcp14>MUST NOT</bcp14> be used either when calculating a
            flooding topology or when determining what links to add
            temporarily to the flooding topology when the flooding topology is
            temporarily partitioned.</t>
          </li>
        </ul>
      </section>
    </section>
    <section>
      <name>Protocol Elements</name>
      <section>
        <name>IS-IS TLVs</name>
        <t>The following TLVs/sub-TLVs are added to IS-IS: </t>
        <ol spacing="normal" type="1"><li>
            <t>A sub-TLV that an IS may include in its Link State
	    PDU (LSP) to indicate its
            preference for becoming the Area Leader.</t>
          </li>
          <li>
            <t>A sub-TLV that an IS may include in its LSP to indicate that
            it supports dynamic flooding and the algorithms that it supports
            for distributed mode, if any.</t>
          </li>
          <li>
            <t>A TLV to advertise the list of system IDs that compose the
            flooding topology for the area.  A system ID is an
	    identifier for a node.</t>
          </li>
          <li>
            <t>A TLV to advertise a path that is part of the flooding
            topology.</t>
          </li>
          <li>
            <t>A TLV that requests flooding from the adjacent node.</t>
          </li>
        </ol>
        <section anchor="ISIS_AREA_LEADER_SUBTLV">
          <name>IS-IS Area Leader Sub-TLV</name>
          <t>The IS-IS Area Leader Sub-TLV allows a system to: </t>
          <ol spacing="normal" type="1"><li>
              <t>Indicate its eligibility and priority for becoming
              the Area Leader.</t>
            </li>
            <li>
              <t>Indicate whether centralized or distributed mode is to be
              used to compute the flooding topology in the area.</t>
            </li>
            <li>
              <t>Indicate the algorithm identifier for the algorithm that is
              used to compute the flooding topology in distributed mode.</t>
            </li>
          </ol>
          <t>Intermediate Systems (nodes) that are not advertising this
          sub-TLV are not eligible to become the Area Leader.</t>
          <t>
	    The Area Leader is the node with the numerically highest
	    Area Leader priority in the area. In the event of ties,
	    the node with the numerically highest system ID is the
	    Area Leader. Due to transients during database flooding,
	    different nodes may not agree on the Area Leader. This is
	    not problematic, as subsequent flooding will cause the
	    entire area to converge.
          </t>
          <t>The IS-IS Area Leader Sub-TLV is advertised as a sub-TLV of the IS-IS
          Router Capability TLV (242) <xref target="RFC7981"/> and has the following format:</t>
          <figure>
	    <name>IS-IS Area Leader Sub-TLV</name>
<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Length    |   Priority    |   Algorithm   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork></figure>
          <dl spacing="normal">
            <dt>Type:</dt><dd>27</dd>
            <dt>Length:</dt><dd>2 octets</dd>
            <dt>Priority:</dt><dd>0-255, unsigned integer. Determination of
	      the priority is outside of the scope of this document.</dd>
             <dt>Algorithm:</dt><dd><t>A numeric identifier in the range 0-255 that
              identifies the algorithm used to calculate the flooding
              topology. The following values are defined:</t>
              <dl spacing="normal">
                  <dt>0:</dt><dd>Centralized computation by the Area Leader.</dd>
		  <dt>1-127:</dt><dd>Standardized distributed algorithms.</dd>
                  <dt>128-254:</dt><dd>Private distributed algorithms. Individual
                  values are to be assigned according to the "Private Use"
                  policy defined in <xref target="RFC8126" sectionFormat="of" section="4.1"/> (see <xref target="IGP_IANA"/>).</dd>
                  <dt>255:</dt><dd>Reserved</dd>
                </dl>
              </dd>
            </dl>
        </section>
        <section anchor="ISIS_DYNAMIC_FLOODING_SUBTLV">
          <name>IS-IS Dynamic Flooding Sub-TLV</name>
          <t>The IS-IS Dynamic Flooding Sub-TLV allows a system to: </t>
          <ol spacing="normal" type="1"><li>
              <t>Indicate that it supports dynamic flooding. This is indicated
              by the advertisement of this sub-TLV.</t>
            </li>
            <li>
              <t>
		Indicate the set of algorithms that it supports.
              </t>
            </li>
          </ol>
          <t>In incremental deployments, understanding which nodes support
          dynamic flooding can be used to optimize the flooding topology. In
          distributed mode, knowing the capabilities of the nodes can allow
          the Area Leader to select the optimal algorithm.</t>
          <t>The IS-IS Dynamic Flooding Sub-TLV is advertised as a sub-TLV of the
          IS-IS Router Capability TLV (242) <xref target="RFC7981"/> and has
          the following format:</t>
		
<figure> 
  <name>IS-IS Dynamic Flooding Sub-TLV</name>
<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Length    | Algorithm...  | 
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork></figure>
          <dl  spacing="normal">
              <dt>Type:</dt><dd>28</dd>
              <dt>Length:</dt><dd>1-255 octets; number of Algorithms</dd>
              <dt>Algorithm:</dt><dd>Numeric identifiers in the range
              0-255 that identify the algorithm used to calculate the
              flooding topology  as described in <xref target="ISIS_AREA_LEADER_SUBTLV"/>.</dd>
          </dl>
        </section>
        <section anchor="ISIS_AREA_SYSTEM_ID_TLV">
          <name>IS-IS Area Node IDs TLV</name>
          <t>The IS-IS Area Node IDs TLV is only used in centralized mode.</t>
          <t>The IS-IS Area Node IDs TLV is used by the Area Leader to enumerate the
          node IDs (System ID + pseudonode ID) that it has used in computing
          the area flooding topology. Conceptually, the Area Leader creates a
          list of node IDs for all nodes in the area (including pseudonodes
          for all LANs in the topology) and assigns an index to each node,
          starting with index 0. Indices are implicitly assigned
          sequentially, with the index of the first node being the
          Starting Index and each subsequent node's index is the
          previous node's index + 1.</t>
          <t>Because the space in a single TLV is limited, more than one TLV
          may be required to encode all of the node IDs in the area. This TLV
          may be present in multiple LSPs.</t>
          <t>The IS-IS Area Node IDs TLV has the following format:</t>
          <figure>
	    <name>IS-IS Area Node IDs TLV</name>
	    <artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Length    | Starting Index                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|L| Reserved    | Node IDs ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
Node IDs continued ....   
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork></figure>
          <dl spacing="normal">
              <dt>Type:</dt><dd>17</dd>
              <dt>Length:</dt><dd> 3 + ((System ID Length + 1) * (number of node
              IDs)) in octets</dd>
              <dt>Starting Index:</dt><dd>The index of the first node ID that appears
              in this TLV.</dd>
              <dt>L (Last):</dt><dd>This bit is set if the index of the last node ID
              that appears in this TLV is equal to the last index in the full
              list of node IDs for the area.</dd>
              <dt>Node IDs:</dt><dd>A concatenated list of node IDs for the area.</dd>
          </dl>
          <t>If multiple IS-IS Area Node IDs TLVs with the L bit set
          are advertised by the same node, the TLV that specifies the smaller
          maximum index is used and the other TLVs with the L bit set are
          ignored. TLVs that specify node IDs with indices greater than that
          specified by the TLV with the L bit set are also ignored.</t>
        </section>
        <section anchor="ISIS_FLOOD_PATH_TLV">
          <name>IS-IS Flooding Path TLV</name>
          <t>The IS-IS Flooding Path TLV is only used in centralized mode.</t>
          <t>The IS-IS Flooding Path TLV is used to denote a path in the flooding
          topology. The goal is an efficient encoding of the links of the
          topology. A single link is a simple case of a path that only covers
          two nodes. A connected path may be described as a sequence of
          indices (I1, I2, I3, ...), denoting a link from the system with
          index 1 to the system with index 2, a link from the system with
          index 2 to the system with index 3, and so on.</t>
          <t>If a path exceeds the size that can be stored in a single TLV,
          then the path may be distributed across multiple TLVs by the
          replication of a single system index.</t>
          <t>Complex topologies that are not a single path can be described
          using multiple TLVs.</t>
          <t>The IS-IS Flooding Path TLV contains a list of system indices relative
          to the systems advertised through the IS-IS Area Node IDs TLV. At least 2
          indices must be included in the TLV. Due to the length restriction
          of TLVs, this TLV can contain 126 system indices at most.</t>
          <t>The IS-IS Flooding Path TLV has the following format:</t>
          <figure>
	    <name>IS-IS Flooding Path TLV</name>
<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Length    | Starting Index                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Index 2                       | Additional indices ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork></figure>
          <dl spacing="normal">
              <dt>Type:</dt><dd>18</dd>
              <dt>Length:</dt><dd>2 * (number of indices in the path) in octets</dd>
              <dt>Starting Index:</dt><dd>The index of the first system in the
              path.</dd>
              <dt>Index 2:</dt><dd>The index of the next system in the path.</dd>
              <dt>Additional indices (optional):</dt><dd>A sequence of additional
              indices to systems along the path.</dd>
          </dl>
        </section>
        <section anchor="ISIS_FLOODING_REQUEST_TLV">
          <name>IS-IS Flooding Request TLV</name>
          <t>The IS-IS Flooding Request TLV allows a system to request an adjacent
          node to enable flooding towards it on a specific link in the case
          where the connection to the adjacent node is not part of the existing
          flooding topology.</t>
          <t>A node that supports dynamic flooding <bcp14>MAY</bcp14> include the IS-IS Flooding
          Request TLV in its IS-IS Hello (IIH) Protocol Data Units (PDUs).</t>
          <t>The IS-IS Flooding Request TLV has the following format:</t>
          <figure>
	    <name>IS-IS Flooding Request TLV</name>
<artwork align="left"><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Length    |   Levels      |    Scope      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    ...        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork></figure>
          <dl spacing="normal">
              <dt>Type:</dt><dd>19</dd>
              <dt>Length:</dt><dd>1 + number of advertised flooding scopes in octets</dd>
              <dt>Levels:</dt><dd>The levels for which flooding is requested. Levels
              are encoded as the circuit type as specified in <xref target="ISO10589">IS-IS</xref></dd>
              <dt>Scope (8 bits):</dt><dd>Flooding
              scope for which the flooding is requested as defined in
              the LSP Flooding Scope Identifier Registry as created by
              <xref target="RFC7356"/>. Inclusion of flooding scopes
              is optional and is only necessary if <xref target="RFC7356"/> is supported. Multiple flooding
              scopes <bcp14>MAY</bcp14> be included. Values are restricted to the
              range 0..127.</dd>
          </dl>
          <t>Circuit flooding scope <bcp14>MUST NOT</bcp14> be sent in the Flooding Request
          TLV and <bcp14>MUST</bcp14> be ignored if received.</t>
          <t>When the TLV is received in a level-specific LAN-Hello PDU
          (L1-LAN-IIH or L2-LAN-IIH), only levels that match the PDU type are
          valid. Levels that do not match the PDU type <bcp14>MUST</bcp14> be ignored on
          receipt.</t>
          <t>When the TLV is received in a Point-to-Point Hello (P2P-IIH), only
          levels that are supported by the established adjacency are valid.
          Levels that are not supported by the adjacency <bcp14>MUST</bcp14> be ignored on
          receipt.</t>
          <t>If flooding was disabled on the received link due to dynamic
          flooding, then flooding <bcp14>MUST</bcp14> be temporarily enabled over the link
          for the specified Circuit Types and flooding scopes received in
          the in the IS-IS Flooding Request TLV. Flooding <bcp14>MUST</bcp14> be enabled until the
          Circuit Type or Flooding Scope is no longer advertised in the
          IS-IS Flooding Request TLV or the TLV no longer appears in IIH PDUs
          received on the link.</t>
          <t>When flooding is temporarily enabled on the link for any
          Circuit Type or Flooding Scope due to receiving the IS-IS Flooding Request TLV,
          the receiver <bcp14>MUST</bcp14> perform standard database synchronization for the
          corresponding Circuit Types and flooding scopes on the link. In
          the case of IS-IS, this results in setting the Send Routeing
	  Message (SRM) flag for all related
          LSPs on the link and sending CSNPs.</t>
          <t>So long as the IS-IS Flooding Request TLV is being received, flooding
          <bcp14>MUST NOT</bcp14> be disabled for any of the Circuit Types or flooding scopes
          present in the IS-IS Flooding Request TLV, even if the connection between
          the neighbors is removed from the flooding topology. Flooding for
          such Circuit Types or flooding scopes <bcp14>MUST</bcp14> continue on the link and
          be considered temporarily enabled.</t>
        </section>

        <section anchor="IS-IS_LEEF_ADVERTISEMENT">
          <name>IS-IS LEEF Advertisement</name>
          <t>In support of advertising which edges are currently enabled in
          the flooding topology, an implementation <bcp14>MAY</bcp14> indicate that a link is
          part of the flooding topology by advertising a bit value in the Link
          Attributes sub-TLV defined by <xref target="RFC5029"/>.</t>
          <t>The following bit-value is defined by this document:</t>
	  <dl>
          <dt>Local Edge Enabled for Flooding (LEEF):</dt><dd>0x4</dd>
	  </dl>
        </section>
      </section>
      <section>
        <name>OSPF LSAs and TLVs</name>
        <t>This section defines new Link State Advertisements (LSAs) and TLVs for both OSPFv2 and
        OSPFv3.</t>
        <t>
          The following LSAs and TLVs/sub-TLVs are added to
          OSPFv2/OSPFv3:
        </t>
        <ol spacing="normal" type="1"><li>
            <t>A TLV that is used to advertise the preference for becoming
            the Area Leader.</t>
          </li>
          <li>
            <t>A TLV that is used to indicate the support for dynamic flooding
            and the algorithms that the advertising node supports for
            distributed mode, if any.</t>
          </li>
          <li>
            <t>An OSPFv2 Opaque LSA and OSPFv3 LSA to advertise the flooding
            topology for centralized mode.</t>
          </li>
          <li>
            <t>A TLV to advertise the list of Router IDs that comprise the
            flooding topology for the area.</t>
          </li>
          <li>
            <t>A TLV to advertise a path that is part of the flooding
            topology.</t>
          </li>
          <li>
            <t>A bit in the Link-Local Signaling (LLS) Type 1 Extended Options and Flags that
            requests
            flooding from the adjacent node.</t>
          </li>
        </ol>
        <section anchor="OSPF_AREA_LEADER_SUBTLV">
          <name>OSPF Area Leader Sub-TLV</name>
          <t>The usage of the OSPF Area Leader Sub-TLV is identical to that of the IS-IS
          Area Leader Sub-TLV described in <xref target="ISIS_AREA_LEADER_SUBTLV"/>.</t>
          <t>The OSPF Area Leader Sub-TLV is used by both OSPFv2 and
          OSPFv3.</t>
          <t>The OSPF Area Leader Sub-TLV is advertised as a top-level TLV of
          the Router Information (RI) LSA that is defined in <xref target="RFC7770"/> and has the
          following format:</t>
          <figure>
	    <name>OSPF Area Leader Sub-TLV</name>
<artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              Type             |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Priority   |   Algorithm   |            Reserved           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
]]></artwork></figure>
          <dl newline="false" spacing="normal">
            <dt>Type:</dt>
            <dd>17</dd>
            <dt>Length:</dt>
            <dd>4 octets</dd>
            <dt>Priority:</dt>
            <dd>0-255, unsigned integer</dd>
            <dt>Algorithm:</dt>
            <dd>As defined in <xref target="ISIS_AREA_LEADER_SUBTLV"/>.</dd>
          </dl>
        </section>
        <section anchor="OSPF_DYNAMIC_FLOODING_SUBTLV">
          <name>OSPF Dynamic Flooding Sub-TLV</name>
          <t>The usage of the OSPF Dynamic Flooding Sub-TLV is identical to that of
          the IS-IS Dynamic Flooding Sub-TLV described in <xref target="ISIS_DYNAMIC_FLOODING_SUBTLV"/>.</t>
          <t>The OSPF Dynamic Flooding Sub-TLV is used by both OSPFv2 and
          OSPFv3.</t>
          <t>The OSPF Dynamic Flooding Sub-TLV is advertised as a top-level
          TLV of the RI LSA that is defined in <xref target="RFC7770"/> and
          has the following format:</t>
          <figure>
	    <name>OSPF Dynamic Flooding Sub-TLV</name>
<artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              Type             |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Algorithm ... |                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
]]></artwork></figure>
          <dl newline="false" spacing="normal">
            <dt>Type:</dt>
            <dd>18</dd>
            <dt>Length:</dt>
            <dd>Number of Algorithms in octets</dd>
            <dt>Algorithm:</dt>
            <dd>As defined in <xref target="ISIS_AREA_LEADER_SUBTLV"/>.</dd>
          </dl>
        </section>
        <section anchor="OSPFV2_DYNAMIC_FLOOD_LSA">
          <name>OSPFv2 Dynamic Flooding Opaque LSA</name>
          <t>The OSPFv2 Dynamic Flooding Opaque LSA is only used in
          centralized mode.</t>
          <t>The OSPFv2 Dynamic Flooding Opaque LSA is used to advertise
          additional data related to dynamic flooding in OSPFv2. OSPFv2
          Opaque LSAs are described in <xref target="RFC5250"/>.</t>
          <t>Multiple OSPFv2 Dynamic Flooding Opaque LSAs can be advertised by
          an OSPFv2 router. The flooding scope of the OSPFv2 Dynamic Flooding
          Opaque LSA is area-local.</t>
          <t>The format of the OSPFv2 Dynamic Flooding Opaque LSA is as
          follows:</t>
          <figure>
            <name>OSPFv2 Dynamic Flooding Opaque LSA</name>
            <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            LS age             |     Options   |   LS Type     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       10      |                 Opaque ID                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Advertising Router                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     LS sequence number                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         LS checksum           |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                            TLVs                             -+
|                             ...                               |
]]></artwork></figure>
          <t>The opaque type used by OSPFv2 Dynamic Flooding Opaque LSA is
          10. The opaque type is used to differentiate the various types of
          OSPFv2 Opaque LSAs as described in <xref target="RFC5250" sectionFormat="of" section="3"/>. The LS Type is 10. The LSA Length field <xref target="RFC2328"/> represents the total length (in octets) of the
          Opaque LSA including the LSA header and all TLVs (including
          padding).</t>
          <t>The Opaque ID field is an arbitrary value used to maintain
          multiple Dynamic Flooding Opaque LSAs. For OSPFv2 Dynamic Flooding
          Opaque LSAs, the Opaque ID has no semantic significance other than
          to differentiate Dynamic Flooding Opaque LSAs originated
          from the same
          OSPFv2 router.</t>
          <t>The format of the TLVs within the body of the OSPFv2 Dynamic
          Flooding Opaque LSA is the same as the format used by the Traffic
          Engineering Extensions to OSPF <xref target="RFC3630"/>.</t>
          <t>The Length field defines the length of the value portion in
          octets (thus a TLV with no value portion would have a length of 0
          octets).  The TLV is padded to a 4-octet alignment; padding is not
          included in the length field (so a 3-octet value would have a length
          of 3 octets, but the total size of the TLV would be 8
          octets). Nested TLVs are also 32-bit aligned. For example, a 1-octet
          value would have the length field set to 1, and 3 octets of padding
          would be added to the end of the value portion of the TLV. The
          padding is composed of zeros.</t>
        </section>
        <section anchor="OSPFV3_DYNAMIC_FLOOD_LSA">
          <name>OSPFv3 Dynamic Flooding LSA</name>
          <t>The OSPFv3 Dynamic Flooding Opaque LSA is only used in
          centralized mode.</t>
          <t>The OSPFv3 Dynamic Flooding LSA is used to advertise additional
          data related to dynamic flooding in OSPFv3.</t>
          <t>The OSPFv3 Dynamic Flooding LSA has a function code of 16. The
          flooding scope of the OSPFv3 Dynamic Flooding LSA is area-local. The
          U bit will be set indicating that the OSPFv3 Dynamic Flooding LSA
          should be flooded even if it is not understood. The Link State ID
          (LSID) value for this LSA is the Instance ID. OSPFv3 routers <bcp14>MAY</bcp14>
          advertise multiple OSPFv3 Dynamic Flooding Opaque LSAs in each area.</t>
          <t>The format of the OSPFv3 Dynamic Flooding LSA is as follows:</t>
          <figure>
            <name>OSPFv3 Dynamic Flooding LSA</name>
            <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            LS age             |1|0|1|           16            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Link State ID                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Advertising Router                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    LS sequence number                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        LS checksum            |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                            TLVs                             -+
|                             ...                               |
]]></artwork></figure>
        </section>
        <section anchor="OSPF_AREA_ROUTER_ID_TLV">
          <name>OSPF Area Router ID TLVs</name>
          <t>In OSPF, TLVs are defined to advertise indices associated with
          nodes and Broadcast / Non-Broadcast Multi-Access (NBMA)
          networks. Due to identifier differences between OSPFv2 and OSPFv3,
          two different TLVs are defined as described in the following
          sub-sections.</t>
          <t>The OSPF Area Router ID TLVs are used by the Area Leader
          to enumerate the Router IDs that it has used in computing
          the flooding topology. This includes the identifiers
          associated with Broadcast/NBMA networks as defined for
          Network LSAs. Conceptually, the Area Leader creates a list
          of Router IDs for all routers in the area and assigns an
          index to each router, starting with index 0.  Indices are
          implicitly assigned sequentially, with the index of the
          first node being the Starting Index and each subsequent
          node's index is the previous node's index + 1.
          </t>
          <section anchor="OSPFV2_AREA_ROUTER_ID_TLV">
            <name>OSPFv2 Area Router ID TLV</name>
            <t>This TLV is a top-level TLV of the OSPFv2 Dynamic Flooding
            Opaque LSA.</t>
            <t>Because the space in a single OSPFv2 opaque LSA is
            limited, more than one LSA may be required to encode all of the
            Router IDs in the area. This TLV <bcp14>MAY</bcp14> be advertised in multiple OSPFv2
            Dynamic Flooding Opaque LSAs so that all Router IDs can be
            advertised.</t>
            <t>The OSPFv2 Area Router IDs TLV has the following format:</t>
            <figure>
              <name>OSPFv2 Area Router IDs TLV</name>
              <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1     
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              Type             |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Starting Index             |L| Flags       |   Reserved    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-        OSPFv2 Router ID TLV Entry                           -+
|                           ...                                 |
]]></artwork></figure>
            <dl spacing="normal">
                <dt>Type:</dt><dd>1</dd>
                <dt>Length:</dt><dd>4 + sum of the lengths of all TLV
                entries in octets</dd>
                <dt>Starting Index:</dt><dd>The index of the first Router/Designated
                Router ID that appears in this TLV.</dd>
                <dt>L (Last):</dt><dd>This bit is set if the index of the last
                Router/Designated Router ID that appears in this TLV is equal to the
                last index in the full list of Router IDs for the area.</dd>
                <dt>OSPFv2 Router ID TLV Entries:</dt><dd>A concatenated list of Router
                ID TLV Entries for the area.</dd>
            </dl>
            <t>If multiple OSPFv2 Area Router ID TLVs with the L bit
            set are advertised by the same router, the TLV that specifies the
            smaller maximum index is used and the other TLVs with L bit set
            are ignored. TLVs that specify Router IDs with indices greater
            than that specified by the TLV with the L bit set are also
            ignored.</t>
            <t>Each entry in the OSPFv2 Area Router IDs TLV represents either
            a node or a Broadcast/NBMA network identifier. An entry has the
            following format:</t>
            <figure>
              <name>OSPFv2 Router IDs TLV Entry</name>
              <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1       
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    ID Type    |  Number of IDs                |  Reserved     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-    Originating Router ID/DR Address                         -+
|                     ...                                       |
]]></artwork>
            </figure>
            <dl spacing="normal">
                <dt>ID Type:</dt><dd><t>1 octet. The following values are defined:</t>
                <dl spacing="normal">
                    <dt>1:</dt><dd>Router</dd>
                    <dt>2:</dt><dd>Designated Router</dd>
                </dl>
              </dd>
              <dt>Number of IDs:</dt><dd>2 octets</dd>
              <dt>Reserved:</dt><dd>1 octet. <bcp14>MUST</bcp14> be transmitted as 0 and <bcp14>MUST</bcp14>
              be ignored on receipt.</dd>
                <dt>Originating Router ID/DR Address:</dt><dd>(4 * Number of IDs) octets 
              as indicated by the ID Type.</dd>
            </dl>
          </section>
          <section anchor="OSPFV3_AREA_ROUTER_ID_TLV">
            <name>OSPFv3 Area Router ID TLV</name>
            <t>This TLV is a top-level TLV of the OSPFv3 Dynamic Flooding
            LSA.</t>
            <t>Because the space in a single OSPFv3 Dynamic Flooding LSA is
            limited, more than one LSA may be required to encode all of the
            Router IDs in the area. This TLV <bcp14>MAY</bcp14> be advertised in multiple OSPFv3
            Dynamic Flooding Opaque LSAs so that all Router IDs can be
            advertised.</t>
            <t>The OSPFv3 Area Router IDs TLV has the following format:</t>
            <figure>
              <name>OSPFv3 Area Router IDs TLV</name>
              <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1     
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              Type             |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Starting Index             |L| Flags       |   Reserved    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-        OSPFv3 Router ID TLV Entry                           -+
|                           ...                                 |
]]></artwork></figure>
            <dl spacing="normal">
                <dt>Type:</dt><dd>1</dd>
                <dt>Length:</dt><dd>4 + sum of the lengths of all TLV entries in octets</dd>
                <dt>Starting Index:</dt><dd>The index of the first Router/Designated
                Router ID that appears in this TLV.</dd>
                <dt>L (Last):</dt><dd>This bit is set if the index of the last
                Router/Designated Router ID that appears in this TLV is equal
                to the last index in the full list of Router IDs for the
                area.</dd>
                <dt>OSPFv3 Router ID TLV Entries:</dt><dd>A concatenated list of Router
                ID TLV Entries for the area.</dd>
            </dl>
            <t>If multiple OSPFv3 Area Router ID TLVs with the L bit
            set are advertised by the same router the TLV that specifies the
            smaller maximum index is used and the other TLVs with L bit set
            are ignored. TLVs that specify Router IDs with indices greater
            than that specified by the TLV with the L bit set are also
            ignored.</t>
            <t>Each entry in the OSPFv3 Area Router IDs TLV represents either
            a router or a Broadcast/NBMA network identifier. An entry has the
            following format:</t>
            <figure>
              <name>OSPFv3 Router ID TLV Entry</name>
              <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1     
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    ID Type    |  Number of IDs                |  Reserved     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-    Originating ID Entry                                     -+
|                    ...                                        |
]]></artwork></figure>
            <dl spacing="normal">
                <dt>ID Type:</dt><dd><t>1 octet. The following values are defined:</t>
                <dl spacing="normal">
                    <dt>1:</dt><dd>Router</dd>
                    <dt>2:</dt><dd>Designated Router</dd>
                  </dl>
                </dd>
                <dt>Number of IDs:</dt><dd>2 octets</dd>
                <dt>Reserved:</dt><dd>1 octet.
                  <bcp14>MUST</bcp14> be transmitted as 0 and <bcp14>MUST</bcp14> be ignored on
                  receipt.</dd>
              </dl>
            <t>
              The Originating ID Entry takes one of the following
              forms, depending on the ID Type.
            </t>
            <t>
              For a Router:
            </t>
            <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1     
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Originating Router ID                                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
            <t>
              The length of the Originating ID Entry is (4 * Number of IDs)
              octets.
            </t>
            <t>
              For a Designated Router:
            </t>
            <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1     
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Originating Router ID                                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Interface ID                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
            <t>
              The length of the Originating ID Entry is (8 * Number of
              IDs) octets.
            </t>
          </section>
        </section>
        <section anchor="OSPF_FLOOD_PATH_TLV">
          <name>OSPF Flooding Path TLV</name>
          <t>The OSPF Flooding Path TLV is a top-level TLV of the OSPFv2
          Dynamic Flooding Opaque LSAs and OSPFv3 Dynamic Flooding LSA.</t>
          <t>The usage of the OSPF Flooding Path TLV is identical to that of the IS-IS
          Flooding Path TLV described in <xref target="ISIS_FLOOD_PATH_TLV"/>.</t>
          <t>The OSPF Flooding Path TLV contains a list of Router ID indices
          relative to the Router IDs advertised through the OSPF Area Router
          IDs TLV. At least 2 indices must be included in the TLV.</t>
          <t>Multiple OSPF Flooding Path TLVs can be advertised in a single
          OSPFv2 Dynamic Flooding Opaque LSA or OSPFv3 Dynamic Flooding LSA.
          OSPF Flooding Path TLVs can also be advertised in multiple OSPFv2
          Dynamic Flooding Opaque LSAs or OSPFv3 Dynamic Flooding LSAs if they
          all cannot fit in a single LSA.</t>
          <t>The OSPF Flooding Path TLV has the following format:</t>
          <figure>
            <name>OSPF Flooding Path TLV</name>
            <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              Type             |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Starting Index             |       Index 2                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                        Additional Indices                   -+
|                           ...                                 | 
]]></artwork>
          </figure>
          <dl spacing="normal">
              <dt>Type:</dt><dd>2</dd>
              <dt>Length:</dt><dd>2 * (number of indices in the path) in octets</dd>
              <dt>Starting Index:</dt><dd>The index of the first Router ID in the
              path.</dd>
              <dt>Index 2:</dt><dd>The index of the next Router ID in the path.</dd>
              <dt>Additional indices (optional):</dt><dd>A sequence of additional
              indices to Router IDs along the path.</dd>
          </dl>
        </section>
        <section anchor="OSPF_FLOODING_REQUEST_BIT">
          <name>OSPF Flooding Request Bit</name>
          <t>A single new option bit, the Flooding Request (FR) bit, is
          defined in the LLS Type 1 Extended Options and Flags field <xref target="RFC5613"/>. The FR bit allows a router to request an
          adjacent node to enable flooding towards it on a specific link in
          the case where the connection to the adjacent node is not part of the
          current flooding topology.</t>
          <t>A node that supports dynamic flooding <bcp14>MAY</bcp14> include
          the FR bit in its OSPF LLS Extended Options and Flags TLV.</t> <t>If
          the FR bit is signaled for a link on which flooding was disabled due
          to dynamic flooding, then flooding <bcp14>MUST</bcp14> be
          temporarily enabled over the link. Flooding <bcp14>MUST</bcp14> be
          enabled until the FR bit is no longer advertised in the OSPF LLS
          Extended Options and Flags TLV or the OSPF LLS Extended Options and
          Flags TLV no longer appears in the OSPF Hellos.</t>
          <t>When flooding is temporarily enabled on the link for any area
          due to receiving the FR bit in the OSPF LLS Extended Options and Flags TLV,
          the receiver <bcp14>MUST</bcp14> perform standard database synchronization
          for the area corresponding to the link. If the adjacency is already in
          the FULL state, the mechanism specified in <xref target="RFC4811"/> <bcp14>MUST</bcp14>
          be used for database resynchronization.</t>
          <t>So long as the FR bit is being received in the OSPF LLS Extended
          Options and Flags TLV for a link, flooding <bcp14>MUST NOT</bcp14> be
          disabled on the link, even if the connection between the neighbors is removed
          from the flooding topology. Flooding <bcp14>MUST</bcp14> continue on
          the link and be considered as temporarily enabled.</t>
        </section>
        <section anchor="OSPF_LEEF_ADVERTISEMENT">
          <name>OSPF LEEF Advertisement</name>
          <t>In support of advertising the specific edges that are
          currently enabled in the flooding topology, an
          implementation <bcp14>MAY</bcp14> indicate that a link is part of the
          flooding topology. The OSPF Link Attributes Bits TLV is
          defined to support this advertisement.</t>
          <figure>
            <name>OSPF Link Attributes Bits TLV</name>
            <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              Type             |             Length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Link Attribute Bits                                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-            Additional Link Attribute Bits                   -+
|                           ...                                 | 
]]></artwork>
          </figure>
	  <dl>
          <dt>Type:</dt><dd>21 (for OSPFv2) or 10 (for OSPFv3)</dd>
          <dt>Length:</dt><dd>Size of the Link Attribute Bits in octets. It <bcp14>MUST</bcp14> be a
          multiple of 4 octets.</dd>
	  </dl>
          <t>The following bits are defined:</t>
	  <dl>
          <dt>Bit #0:</dt><dd>Local Edge Enabled for Flooding (LEEF)</dd>
	  </dl>
          <t>OSPF Link-attribute Bits TLV appears as:</t>
	  <ol>
          <li>A sub-TLV of the OSPFv2 Extended Link TLV <xref target="RFC7684"/>.</li>
          <li>A sub-TLV of the OSPFv3 Router-Link TLV <xref target="RFC8362"/>.</li>
	  </ol>
        </section>
      </section>
    </section>
    <section anchor="BEHAVIOR">
      <name>Behavioral Specification</name>
      <t>This section specifies the detailed behavior of the nodes
      participating in the IGP.</t>
      <section anchor="TERMINOLOGY">
        <name>Terminology</name>
        <t>Some terminology to be used in the following
        sections: </t>
        <dl newline="false" spacing="normal">
          <dt>Reachable:</dt>
          <dd>A node is considered reachable if it is part of the
            connected network graph. Note that this is independent of
            any constraints that may be considered when performing IGP
            shortest-path tree calculation, e.g., link metrics,
            overload bit state, etc. The two-way connectivity check
            <bcp14>MUST</bcp14> be performed before including an edge in the
            connected network graph.</dd>
          <dt>Connected:</dt>
          <dd>A node is connected to the flooding topology if it has at least
            one local link, which is part of the flooding topology.</dd>
          <dt>Disconnected:</dt>
          <dd>A node is disconnected from the flooding topology when it is not
            connected to the flooding topology.</dd>
          <dt>Current flooding topology:</dt><dd>The latest version of the
            flooding topology that has been received (in the case of
            centralized mode) or calculated locally (in the case of
            distributed mode).</dd>
        </dl>
      </section>
      <section anchor="FT_PROP">
        <name>Flooding Topology</name>
        <t>The flooding topology <bcp14>MUST</bcp14> include all reachable
        nodes in the area.</t>
        <t>If a node's reachability changes, the flooding topology
        <bcp14>MUST</bcp14> be recalculated. In centralized mode, the Area
        Leader <bcp14>MUST</bcp14> advertise a new flooding topology.</t>
        <t>If a node becomes disconnected from the current flooding topology
        but is still reachable, then a new flooding topology
        <bcp14>MUST</bcp14> be calculated. In centralized mode, the Area
        Leader <bcp14>MUST</bcp14> advertise the new flooding topology.</t>
        <t>
          The flooding topology <bcp14>SHOULD</bcp14> be biconnected to
          provide network resiliency, but this does incur some amount of
          redundant flooding. Xia topologies (<xref target="Xia"/>) are an
          example of an explicit decision to sacrifice resiliency to avoid
          redundancy.
        </t>
      </section>
      <section>
        <name>Leader Election</name>
        <t>Any capable node <bcp14>MAY</bcp14> advertise its eligibility to become the
        Area Leader.</t>
        <t>Nodes that are not reachable are not eligible to become the Area
        Leader. Nodes that do not advertise their eligibility to become the
        Area Leader are not eligible. Amongst the eligible nodes, the node
        with the numerically highest priority is the Area Leader. If multiple
        nodes all have the highest priority, then the node with the
        numerically highest system identifier (in the case of IS-IS) or Router
        ID (in the case of OSPFv2 and OSPFv3) is the Area Leader.</t>
      </section>
      <section>
        <name>Area Leader Responsibilities</name>
        <t>If the Area Leader operates in centralized mode, it <bcp14>MUST</bcp14> advertise
        algorithm 0 in its Area Leader Sub-TLV. For dynamic flooding
        to be enabled, it also <bcp14>MUST</bcp14> compute and advertise a flooding topology
        for the area. The Area Leader may update the flooding topology at any
        time. However, it should not destabilize the network with undue or
        overly frequent topology changes. If the Area Leader operates in
        centralized mode and needs to advertise a new flooding topology, it
        floods the new flooding topology on both the new and old flooding
        topologies.</t>
        <t>If the Area Leader operates in distributed mode, it <bcp14>MUST</bcp14> advertise
        a nonzero algorithm in its Area Leader Sub-TLV.</t>
        <t>When the Area Leader advertises algorithm 0 in its Area Leader
        Sub-TLV and does not advertise a flooding topology, dynamic flooding
        is disabled for the area. Note this applies whether the Area Leader
        intends to operate in centralized mode or distributed mode.</t>
        <t>Note that once dynamic flooding is enabled, disabling it risks
        destabilizing the network due to the issues discussed in <xref target="Intro"/>.</t>
      </section>
      <section>
        <name>Distributed Flooding Topology Calculation</name>
        <t>If the Area Leader advertises a nonzero algorithm in its Area
        Leader Sub-TLV, all nodes in the area that support dynamic flooding
        and support the algorithm advertised by the Area Leader <bcp14>MUST</bcp14> compute
        the flooding topology based on the Area Leader's advertised
        algorithm.</t>
        <t>Nodes that do not support the advertised algorithm <bcp14>MUST</bcp14>
        continue to use standard IS-IS/OSPF flooding mechanisms.
        Nodes that do not support the flooding algorithm advertised by
        the Area Leader <bcp14>MUST</bcp14> be considered as dynamic flooding
        incapable nodes by the Area Leader.</t>
        <t>If the value of the algorithm advertised by the Area Leader is from
        the range 128-254 (private distributed algorithms), it is the
        responsibility of the network operator to guarantee that all nodes in
        the area agree on the dynamic flooding algorithm corresponding
        to the advertised value.</t>
      </section>
      <section>
        <name>Use of LANs in the Flooding Topology</name>
        <t>The use of LANs in the flooding topology differs depending on whether
        the area is operating in centralized mode or distributed mode.</t>
        <section>
          <name>Use of LANs in Centralized Mode</name>
          <t>As specified in <xref target="ENCODING_THE_FLOODING_TOPOLOGY"/>, when a LAN is advertised as part of                                             
          the flooding topology, all nodes connected to the LAN are assumed to
          be using the LAN as part of the flooding topology. This assumption
          is made to reduce the size of the flooding topology
          advertisement.</t>
        </section>
        <section>
          <name>Use of LANs in Distributed Mode</name>
          <t>In distributed mode, the flooding topology is NOT
          advertised; thus, the space consumed to advertise it is
          not a concern. Therefore, it is possible to assign only a
          subset of the nodes connected to the LAN to use the LAN as
          part of the flooding topology. Doing so may further optimize
          flooding by reducing the amount of redundant flooding on a
          LAN. However, support of flooding by a subset of the nodes
          connected to a LAN requires some modest but
          backward-compatible changes in the way flooding is
          performed on a LAN.</t>
          <section>
            <name>Partial Flooding on a LAN in IS-IS</name>
            <t>The Designated Intermediate System (DIS) for a LAN <bcp14>MUST</bcp14>
            use the standard flooding behavior.</t>
            <t>Non-DIS nodes whose connection to the LAN is included in the
            flooding topology <bcp14>MUST</bcp14> use the standard flooding behavior.</t>
            <t>Non-DIS nodes whose connection to the LAN is NOT included in
            the flooding topology behave as follows:</t>
            <ul spacing="normal">
              <li>
                <t>Received CSNPs from the DIS are ignored.</t>
              </li>
              <li>
                <t>Partial Sequence Number PDUs (PSNPs)
                are NOT originated on the LAN.</t>
              </li>
              <li>
                <t>An LSP that is received on the LAN and is newer than the
                corresponding LSP present in the Link State PDU Database (LSPDB) is retained and
                flooded on all local circuits that are part of the flooding
                topology (i.e., do not discard newer LSPs simply because they
                were received on a LAN that the receiving node is not using
                for flooding).</t>
              </li>
              <li>
                <t>An LSP received on the LAN that is older or the same as the
                corresponding LSP in the LSPDB is silently
                discarded.</t>
              </li>
              <li>
                <t>LSPs received on links other than the LAN are NOT flooded
                on the LAN.</t>
              </li>
            </ul>
            <t>NOTE: If any node connected to the LAN requests the enablement
            of temporary flooding, all nodes <bcp14>MUST</bcp14> revert to the standard flooding
            behavior on the LAN.</t>
          </section>
          <section>
            <name>Partial Flooding on a LAN in OSPF</name>
            <t>The Designated Router (DR) and Backup Designated Router (BDR)
            for LANs <bcp14>MUST</bcp14> use the standard flooding
            behavior.</t>
            <t>Non-DR/BDR nodes with a connection to a LAN that is
            included in the flooding topology use the standard
            flooding behavior on that LAN.</t>
            <t>Non-DR/BDR nodes with a connection to a LAN that is NOT
            included in the flooding topology behave as follows:</t>
            <ul spacing="normal">
              <li>
                <t>LSAs received on the LAN are acknowledged to the DR/BDR.</t>
              </li>
              <li>
                <t>LSAs received on interfaces other than the LAN are NOT
                flooded on the LAN.</t>
              </li>
            </ul>
            <t>NOTE: If any node connected to the LAN requests the enablement
            of temporary flooding, all nodes revert to the standard flooding
            behavior.</t>
            <t>NOTE: The sending of LSA Acknowledgements by nodes NOT using the LAN as
            part of the flooding topology eliminates the need for changes on
            the part of the DR/BDR, which might include nodes that do
            not support the dynamic flooding algorithm.</t>
          </section>
        </section>
      </section>
      <section anchor="FLOODING_BEHAVIOR">
        <name>Flooding Behavior</name>
        <t>Nodes that support dynamic flooding <bcp14>MUST</bcp14> use the flooding topology
        for flooding when possible and <bcp14>MUST NOT</bcp14> revert to standard flooding
        when a valid flooding topology is available.</t>
        <t>In some cases, a node that supports dynamic flooding may need to add
        local links to the flooding topology temporarily, even though the
        links are not part of the calculated flooding topology. This is
        termed "temporary flooding" and is discussed in <xref target="TEMP_FLOOD"/>.</t>
        <t>In distributed mode, the flooding topology is calculated locally.
        In centralized mode, the flooding topology is
        advertised in the area LSDB. Received link-state
        updates, whether received on a link that is in the flooding topology
        or on a link that is not in the flooding topology, <bcp14>MUST</bcp14> be flooded on
        all links that are in the flooding topology except for the link on
        which the update was received.</t>
        <t>
	  In centralized mode, new information in the form of new
	  paths or new node ID assignments can be received at any
	  time. This may replace some or all of the existing
	  information about the flooding topology. There may be
	  transient conditions where the information that a node has
	  is inconsistent or incomplete. If a node detects that its
	  current information is inconsistent, then the node may wait
	  for an implementation-specific amount of time, expecting more
	  information to arrive that will provide a consistent,
	  complete view of the flooding topology.
        </t>
        <t>
	  In both centralized and distributed mode, if a node
	  determines that some of its adjacencies are to be added to
	  the flooding topology, it should add those and begin
	  flooding on those adjacencies immediately.  If a node
	  determines that adjacencies are to be removed from the
	  flooding topology, then it should wait for an
	  implementation-specific amount of time before acting on that
	  information. This serves to ensure that new information is
	  flooded promptly and completely, allowing all nodes to
	  receive updates in a timely fashion.
        </t>
      </section>
      <section>
        <name>Treatment of Topology Events</name>
        <t>This section explicitly considers a variety of different
        topological events in the network and how dynamic flooding should
        address them.</t>
        <section anchor="TEMP_FLOOD">
          <name>Temporary Addition of Links to the Flooding Topology</name>
          <t>When temporary flooding is enabled on the link, the flooding
          needs to be enabled in both directions. To achieve
          that, the following steps <bcp14>MUST</bcp14> be performed: </t>
          <ul spacing="normal">
	    <li>The LSDB needs to be resynchronised on the link.
            This is done using the standard protocol mechanisms. In the case
            of IS-IS, this results in setting the SRM bit for all LSPs on the
            circuit and sending a complete set of CSNPs on the link. In OSPF,
            the mechanism specified in <xref target="RFC4811"/> is used.</li>
            <li>Flooding is enabled locally on the link.</li>
            <li>Flooding is requested from the neighbor using the mechanism
              specified in Sections <xref target="ISIS_FLOODING_REQUEST_TLV" format="counter"/>
              or <xref target="OSPF_FLOODING_REQUEST_BIT" format="counter"/>.</li>
          </ul>
          <t>
              The request for temporary flooding <bcp14>MUST</bcp14> be withdrawn on
              the link when all of the following conditions are met:
          </t>
          <ul spacing="normal">
              <li>The node itself is connected to the current flooding
              topology.</li>
              <li>The adjacent node is connected to the current
              flooding topology.</li>
          </ul>
          <t>
          Any change in the flooding topology <bcp14>MUST</bcp14> result in an
          evaluation of the above conditions for any link on which
          temporary flooding was enabled.
          </t>
          <t>Temporary flooding is stopped on the link when both adjacent
          nodes stop requesting temporary flooding on the link.</t>
        </section>
        <section anchor="LOCAL_LINK_ADD">
          <name>Local Link Addition</name>
          <t>If a local link is added to the topology, the protocol will form
          a normal adjacency on the link and update the appropriate LSAs for the nodes on either end of the link. These link
          state updates will be flooded on the flooding topology.</t>
	  <t>In centralized mode, the Area Leader may choose to retain the
	  existing flooding topology or modify the flooding topology upon
	  receiving these updates. If the Area Leader decides to change the
	  flooding topology, it will update the flooding topology in the LSDB
	  and flood it using the new flooding topology.</t>
          <t>In distributed mode, any change in the topology, including the link addition, <bcp14>MUST</bcp14> trigger the flooding topology
          recalculation.  This is done to ensure that all nodes converge to
          the same flooding topology, regardless of the time of the
          calculation.</t>
          <t>Temporary flooding <bcp14>MUST</bcp14> be enabled on the newly added local link
          as long as at least one of the following conditions are met: </t>
          <ul spacing="normal">
            <li>The node on which the local link was added is not connected
              to the current flooding topology.</li>
            <li>The new adjacent node is not connected to the current
              flooding topology.</li>
          </ul>
          <t>Note that in this case there is no need to perform a database
          synchronization as part of the enablement of the temporary flooding
          because it was part of the adjacency bring-up itself.</t>
          <t>If multiple local links are added to the topology before the
          flooding topology is updated, temporary flooding <bcp14>MUST</bcp14> be enabled on
          a subset of these links per the conditions discussed in
          <xref target="RATE_LIMIT"/>.</t>
        </section>
        <section anchor="NODE_ADDITION">
          <name>Node Addition</name>
          <t>If a node is added to the topology, then at least one link is
          also added to the topology. <xref target="LOCAL_LINK_ADD"/>
          applies.</t>
          <t>A node that has a large number of neighbors is at risk of
          introducing a local flooding storm if all neighbors are brought up
          at once and temporary flooding is enabled on all links
          simultaneously. The most robust way to address this is to limit the
          rate of initial adjacency formation following bootup. This
          reduces unnecessary redundant flooding as part of initial database
          synchronization and minimizes the need for temporary flooding, as it
          allows time for the new node to be added to the flooding topology
          after only a small number of adjacencies have been formed.</t>
          <t>In the event a node elects to bring up a large number of
          adjacencies simultaneously, a significant amount of redundant
          flooding may be introduced as multiple neighbors of the new node
          enable temporary flooding to the new node, which initially is not
          part of the flooding topology.</t>
        </section>
        <section anchor="FAIL_NOT_ON_TOPO">
          <name>Failures of Links Not on the Flooding Topology</name>
          <t>If a link that is not part of the flooding topology fails, then
          the adjacent nodes will update their LSAs and
          flood them on the flooding topology.</t>
	  <t>In centralized mode, the Area Leader may choose to retain the
	  existing flooding topology or modify the flooding topology upon
	  receiving these updates. If it elects to change the flooding
	  topology, it will update the flooding topology in the LSDB and flood
	  it using the new flooding topology.</t>
          <t>In distributed mode, any change in the topology, including the
          failure of the link that is not part of the flooding topology, <bcp14>MUST</bcp14>
          trigger the flooding topology recalculation. This is done to ensure
          that all nodes converge to the same flooding topology, regardless of
          the time of the calculation.</t>
        </section>
        <section anchor="FAIL_ON_TOPO">
          <name>Failures of Links On the Flooding Topology</name>
          <t>If there is a failure on the flooding topology, the adjacent
          nodes will update their LSAs and flood them. If
          the original flooding topology is biconnected, the flooding
          topology should still be connected despite a single failure.</t>
          <t>If the failed local link represented the only connection to the
          flooding topology on the node where the link failed, the node <bcp14>MUST</bcp14>
          enable temporary flooding on a subset of its local links. This
          allows the node to send its updated LSAs and
          receive link-state updates from other nodes in the
          network before the new flooding topology is calculated and
          distributed (in the case of centralized mode).</t>
          <t>In centralized mode, the Area Leader will notice the change in
          the flooding topology, recompute the flooding topology, and flood it
          using the new flooding topology.</t>
          <t>In distributed mode, all nodes supporting dynamic flooding will
          notice the change in the topology and recompute the new flooding
          topology.</t>
        </section>
        <section anchor="NODE_DEL">
          <name>Node Deletion</name>
          <t>If a node is deleted from the topology, then at least one link is
          also removed from the topology. <xref target="FAIL_NOT_ON_TOPO"/>
          and <xref target="FAIL_ON_TOPO"/> apply.</t>
        </section>
        <section anchor="LINK_ADD_FLOOD">
          <name>Local Link Addition to the Flooding Topology</name>
          <t>
            If the flooding topology changes and a local link that was
            not part of the flooding topology is now part of the
            flooding topology, then the node <bcp14>MUST</bcp14>:
          </t>
          <ul spacing="normal">
            <li>Resynchronize the LSDB over the link. This is
              done using the standard protocol mechanisms. In the case of
              IS-IS, this requires sending a complete set of CSNPs. In OSPF, the
              mechanism specified in <xref target="RFC4811"/> is used.</li>
            <li>Make the link part of the flooding topology and start
              flooding on it.</li>
          </ul>
        </section>
        <section anchor="LOCAL_LINK_DEL">
          <name>Local Link Deletion from the Flooding Topology</name>
          <t>
            If the flooding topology changes and a local link that was
            part of the flooding topology is no longer part of the
            flooding topology, then the node <bcp14>MUST</bcp14> remove the link from
            the flooding topology.
          </t>
          <t>The node <bcp14>MUST</bcp14> keep flooding on such link for a limited amount of
          time to allow other nodes to migrate to the new flooding
          topology.</t>
          <t>If the removed local link represented the only connection to the
          flooding topology on the node, the node <bcp14>MUST</bcp14> enable temporary
          flooding on a subset of its local links. This allows the node to
          send its updated LSAs and receive
          link-state updates from other nodes in the network before the new
          flooding topology is calculated and distributed (in the case of
          centralized mode).</t>
        </section>
        <section anchor="TREAT_DISC">
          <name>Treatment of Disconnected Adjacent Nodes</name>
          <t>
	    Every time there is a change in the flooding topology, a
	    node <bcp14>MUST</bcp14> check if any adjacent nodes are disconnected
	    from the current flooding topology. Temporary flooding
	    <bcp14>MUST</bcp14> be enabled towards a subset of the disconnected nodes
	    per Sections <xref target="RATE_LIMIT" format="counter"/> and
	    <xref target="FLOODING_BEHAVIOR" format="counter"/>.
          </t>
        </section>
        <section anchor="FAIL_LEADER">
          <name>Failure of the Area Leader</name>
          <t>The failure of the Area Leader can be detected by observing that
          it is no longer reachable. In this case, the Area Leader election
          process is repeated and a new Area Leader is elected.</t>
          <t>To minimize disruption to dynamic flooding if the Area
          Leader becomes unreachable, the node that has the
          second-highest priority for becoming Area Leader (including
          the system identifier / Router ID tiebreaker if necessary)
          <bcp14>SHOULD</bcp14> advertise the same algorithm in its Area Leader
          Sub-TLV as the Area Leader and (in centralized mode) <bcp14>SHOULD</bcp14>
          advertise a flooding topology. This <bcp14>SHOULD</bcp14> be done even when
          the Area Leader is reachable.</t>
          <t>In centralized mode, the new Area Leader will compute a new
          flooding topology and flood it using the new flooding topology. To
          minimize disruption, the new flooding topology <bcp14>SHOULD</bcp14> have as much in
          common as possible with the old flooding topology.  This will
          minimize the risk of excess flooding with the new flooding topology.</t>
          <t>In the distributed mode, the new flooding topology will be
          calculated on all nodes that support the algorithm that is
          advertised by the new Area Leader. Nodes that do not support the
          algorithm advertised by the new Area Leader will no longer
          participate in dynamic flooding and will revert to standard
          flooding.</t>
        </section>
        <section anchor="PARTITIONED_FT">
          <name>Recovery from Multiple Failures</name>
          <t>In the event of multiple failures on the flooding
          topology, it may become partitioned. The nodes that remain active on
          the edges of the flooding topology partitions will recognize this
          and will try to repair the flooding topology locally by enabling
          temporary flooding towards the nodes that they consider disconnected
          from the flooding topology until a new flooding topology becomes
          connected again.</t>
          <t>Nodes, where local failure was detected, update their LSAs and flood them on the remainder of the
          flooding topology.</t>
          <t>In centralized mode, the Area Leader will notice the change in
          the flooding topology, recompute the flooding topology, and flood it
          using the new flooding topology.</t>
          <t>In distributed mode, all nodes that actively participate in
          dynamic flooding will compute the new flooding topology.</t>
          <t>Note that this is very different from the area partition because
          there is still a connected network graph between the nodes in the
          area. The area may remain connected and forwarding may still be
          functioning correctly.</t>
        </section>
        <section anchor="RATE_LIMIT">
          <name>Rate-Limiting Temporary Flooding</name>
          <t>As discussed in the previous sections, some events
          require the introduction of temporary flooding on edges that
          are not part of the current flooding topology. This can
          occur regardless of whether the area is operating in
          centralized mode or distributed mode.</t>
          <t>Nodes that decide to enable temporary flooding also have
          to decide whether to do so on a subset of the edges that are
          currently not part of the flooding topology or on all the
          edges that are currently not part of the flooding
          topology. Doing the former risks a longer convergence time
          as it may miss vital edges and not fully repair the flooding
          topology. Doing the latter risks introducing a flooding
          storm that destabilizes the network.</t>
          <t>It is recommended that a node rate limit the number of
          edges on which it chooses to enable temporary flooding.
          Initial values for the number of edges on which to enable
          temporary flooding and the rate at which additional edges
          may subsequently be enabled is left as an implementation
          decision.</t>
        </section>
      </section>
    </section>
    <section anchor="IANA">
      <name>IANA Considerations</name>
      <section>
        <name>IS-IS</name>
        <t>
          The following code points have been assigned in the "IS-IS 
          Sub-TLVs for IS-IS Router CAPABILITY TLV" registry (IS-IS TLV 242).
        </t>
<!--Action 3-->
<table anchor="IS-IS-Router-CAPABILITY-TLV">
  <name></name>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
      <th>Reference</th>
    </tr>
  </thead>
  <tbody>      
    <tr>
      <td>27</td>
      <td>IS-IS Area Leader</td>
      <td>RFC 9667 (<xref target="ISIS_AREA_LEADER_SUBTLV"/>)</td>
    </tr>
    <tr>
      <td>28</td>
      <td>IS-IS Dynamic Flooding</td>
      <td>RFC 9667 (<xref target="ISIS_DYNAMIC_FLOODING_SUBTLV"/>)</td>
      </tr>
  </tbody>
</table>

        <t>
          IANA has assigned code
          points from the "IS-IS Top-Level TLV Codepoints" registry,
          one for each of the following TLVs:
        </t>
<!--Action 1 -->
<table anchor="IS-IS-Top-Level-TLV-Codepoints">  <!-- Assign an anchor -->
  <name></name>    
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
      <th>Reference</th>
    </tr>
  </thead>
  <tbody>          
    <tr>
      <td>17</td>
      <td>IS-IS Area Node IDs</td>
      <td>RFC 9667 (<xref target="ISIS_AREA_SYSTEM_ID_TLV"/>)</td>
    </tr>
    <tr>
      <td>18</td>
      <td>IS-IS Flooding Path</td>
      <td>RFC 9667 (<xref target="ISIS_FLOOD_PATH_TLV"/>)</td>
    </tr>
    <tr>
      <td>19</td>
      <td>IS-IS Flooding Request</td>
      <td>RFC 9667 (<xref target="ISIS_FLOODING_REQUEST_TLV"/>)</td>
    </tr>
  </tbody>
</table>


        <t>
          IANA has extended the "IS-IS Neighbor
          Link-Attribute Bit Values" registry to contain an "L2BM"
          column that indicates if a bit may appear in an L2 Bundle
          Member Attributes TLV. All existing rows 
          have the value "N" for "L2BM". The following explanatory
          note has been added to the registry:
        </t>
        <blockquote>
          <t>
            The "L2BM" column indicates applicability to the L2 Bundle Member
            Attributes TLV. The options for the "L2BM" column are:
          </t>
          <t>
            Y - This bit <bcp14>MAY</bcp14> appear in the L2
            Bundle Member Attributes TLV.
          </t>
          <t>
            N - This bit <bcp14>MUST NOT</bcp14> appear in the
            L2 Bundle Member Attributes TLV.
          </t>
        </blockquote>
        <t>
          IANA has allocated a new bit-value
          from the "IS-IS Neighbor Link-Attribute Bit Values"
          registry.
        </t>
<!-- Action 2 -->
<table anchor="IS-IS-Neighbor-Link-Attribute-Bit-Values">  
  <name></name>    
  <thead>
    <tr>
      <th>Value</th>    
      <th>L2BM</th>
      <th>Name</th>
      <th>Reference</th>
    </tr>
  </thead>
<tbody>
 <tr>
   <td>0x4</td>
   <td>N</td>
   <td>Local Edge Enabled for Flooding (LEEF)</td>
   <td>RFC 9667</td>
 </tr>
 </tbody>
</table>
      </section>
      <section>
        <name>OSPF</name>
        <t>The following code points have been assigned in the "OSPF
        Router Information (RI) TLVs" registry: </t>
<!-- Action 4
https://www.iana.org/assignments/ospf-parameters/ospf-parameters.xhtml#ri-tlv
 -->
<table anchor="OSPF-RI-TLVs">
  <name></name>   
  <thead>
    <tr>
      <th>Value</th>   
      <th>TLV Name</th>
      <th>Reference</th>
    </tr>
  </thead>
  <tbody>         
    <tr>
      <td>17</td>
      <td>OSPF Area Leader</td>
      <td>RFC 9667 (<xref target="OSPF_AREA_LEADER_SUBTLV"/>)</td>
    </tr>
    <tr>
      <td>18</td>
      <td>OSPF Dynamic Flooding</td>
      <td>RFC 9667 (<xref target="OSPF_DYNAMIC_FLOODING_SUBTLV"/>)</td>
    </tr>
  </tbody>
</table>


        <t>The following code points have been assigned in the "Opaque
      Link-State Advertisements (LSA) Option Types" registry: </t>
<!--Action 8
https://www.iana.org/assignments/ospf-opaque-types/ospf-opaque-types.xhtml#ospf-opaque-types-2
-->
<table anchor="Opaque-LSA-Option-Types">
  <name></name>  
  <thead>
    <tr>
      <th>Value</th>  
      <th>Opaque Type</th>
      <th>Reference</th>
    </tr>
  </thead>
  <tbody>        
    <tr>
      <td>10</td>
      <td>OSPFv2 Dynamic Flooding Opaque LSA</td>
      <td>RFC 9667 (<xref target="OSPFV2_DYNAMIC_FLOOD_LSA"/>)</td>
    </tr>
  </tbody>
</table>
        <t>The following code point has been assigned in the "OSPFv3
        LSA Function Codes" registry: </t>
<!-- Action 5 
https://www.iana.org/assignments/ospfv3-parameters/ospfv3-parameters.xhtml#ospfv3-parameters-3
-->
<table anchor="OSPFv3-LSA-Function-Codes">
  <name></name>
  <thead>
    <tr>
      <th>Value</th>
      <th>LSA Function Code Name</th>
      <th>Reference</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>16</td>
      <td>OSPFv3 Dynamic Flooding LSA</td>
      <td>RFC 9667 (<xref target="OSPFV3_DYNAMIC_FLOOD_LSA"/>)</td>
    </tr>
  </tbody>
</table>

        <t>IANA has assigned a new bit in the "LLS Type 1 Extended Options and
        Flags" registry: </t>
<!--Action 7 -->
<table anchor="LLS-Type-1">  
  <name></name>    
  <thead>
    <tr>
      <th>Bit Position</th>    
      <th>Description</th>
      <th>Reference</th>
    </tr>
  </thead>
  <tbody>          
    <tr>
      <td>0x00000020</td>
      <td>Flooding Request bit</td>
      <td>RFC 9667 (<xref target="OSPF_FLOODING_REQUEST_BIT"/>)</td>
    </tr>
  </tbody>
</table>

        <t>The following code point has been assigned in the
        "OSPFv2 Extended Link TLV Sub-TLVs" registry:</t>
<!--Action 9-->
<table anchor="OSPFv2-Extended-Link-TLV-Sub-TLVs">
  <name></name>  
  <thead>
    <tr>
      <th>Type</th>  
      <th>Description</th>
      <th>Reference</th>
      <th>L2 Bundle Member Attributes (L2BM)</th>
    </tr>
  </thead>
  <tbody>        
    <tr>
      <td>21</td>
      <td>OSPFv2 Link Attributes Bits Sub-TLV</td>
      <td>RFC 9667 (<xref target="OSPF_LEEF_ADVERTISEMENT"/>)</td>
      <td>Y</td>
    </tr>
  </tbody>
</table>

        <t>The following code point has been assigned in the
        "OSPFv3 Extended LSA Sub-TLVs" registry:</t>
<!--Action 6 -->
<table anchor="OSPFv3-Extended-LSA-Sub-TLVs">  
  <name></name>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
      <th>Reference</th>
      <th>L2 Bundle Member Attributes (L2BM)</th>
    </tr>
  </thead>
  <tbody>      
    <tr>
      <td>10</td>
      <td>OSPFv3 Link Attributes Bits Sub-TLV</td>
      <td>RFC 9667 (<xref target="OSPF_LEEF_ADVERTISEMENT"/>)</td>
      <td>Y</td>
    </tr>
  </tbody>
</table>

        <section>
          <name>OSPF Dynamic Flooding LSA TLVs Registry</name>
          <t>A new registry has been created: "OSPF Dynamic
          Flooding LSA TLVs". New values can be allocated via IETF Review or
          IESG Approval.</t>
          <t>The "OSPF Dynamic Flooding LSA TLVs" registry defines
          top-level TLVs for the OSPFv2 Dynamic Flooding Opaque LSA and OSPFv3
          Dynamic Flooding LSAs. It has been added to the "Open Shortest Path
          First (OSPF) Parameters" registry group.</t>
          <t>The following initial values have been allocated:</t>
<!--Action 10-->
<table anchor="OSPF-Parameters">
  <name></name>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
      <th>Reference</th>
    </tr>
  </thead>
  <tbody>      
    <tr>
      <td>0</td>
      <td>Reserved</td>
      <td>RFC 9667</td>
    </tr>
    <tr>
      <td>1</td>
      <td>OSPF Area Router IDs</td>
      <td>RFC 9667 (<xref target="OSPF_AREA_ROUTER_ID_TLV"/>)</td>
    </tr>
    <tr>
      <td>2</td>
      <td>OSPF Flooding Path</td>
      <td>RFC 9667 (<xref target="OSPF_FLOOD_PATH_TLV"/>)</td>
    </tr>
  </tbody>
</table>
          <t>Types in the range 32768-33023 are Reserved for Experimental Use; these
          will not be registered with IANA and <bcp14>MUST NOT</bcp14> be mentioned by
          RFCs.</t>
	  <t>Types in the range 33024-65535 are Reserved. They are not to be assigned at this
          time. Before any assignments can be made in the 33024-65535 range,
          there <bcp14>MUST</bcp14> be an IETF specification that specifies IANA
          Considerations that cover the range being assigned.</t>
        </section>
        <section>
          <name>OSPF Link Attributes Sub-TLV Bit Values Registry</name>
          <t>A new registry has been created: "OSPF Link
          Attributes Sub-TLV Bit Values". New values can be allocated via IETF
          Review or IESG Approval.</t>
          <t>The "OSPF Link Attributes Sub-TLV Bit Values" registry defines
          Link Attribute bit-values for the OSPFv2 Link Attributes Sub-TLV and
          OSPFv3 Link Attributes Sub-TLV. It has been added to the "Open
          Shortest Path First (OSPF) Parameters" registry
          group. This registry contains a column "L2BM" that
          indicates if a bit may appear in an L2 Bundle Member
          Attributes (L2BM) Sub-TLV. The following explanatory note
          has been added to the registry:</t>
          <blockquote>
            <t>
              The "L2BM" column indicates applicability to the L2 Bundle Member
              Attributes sub-TLV. The options for the "L2BM" column are:
            </t>
            <t>
              Y - This bit <bcp14>MAY</bcp14> appear in the L2
              Bundle Member Attributes sub-TLV.
            </t>
            <t>
              N - This bit <bcp14>MUST NOT</bcp14> appear in the
              L2 Bundle Member Attributes sub-TLV.
            </t>
          </blockquote>
          <t>The following initial value is allocated:</t>
<!--Action 10-->
<table anchor="L2BM-sub-TLV">
  <name></name>
  <thead>
    <tr>
      <th>Bit Number</th>
      <th>Description</th>
      <th>Reference</th>
      <th>L2 Bundle Member Attributes (L2BM)</th>
    </tr>
  </thead>
  <tbody>      
    <tr>
      <td>0</td>
      <td>Local Edge Enabled for Flooding (LEEF)</td>
      <td>RFC 9667 (<xref target="OSPF_LEEF_ADVERTISEMENT"/>)</td>
      <td>N</td>
    </tr>
  </tbody>
</table>
        </section>
      </section>
      <section anchor="IGP_IANA">
        <name>IGP</name>
        <t>IANA has created a registry called "IGP Algorithm Type
        For Computing Flooding Topology" in the existing "Interior Gateway
        Protocol (IGP) Parameters" registry group.</t>
        <t>
	  The registration policy for this registry is Expert Review.
        </t>
        <t>Values in this registry come from the range 0-255.</t>
        <t>The initial values in the "IGP Algorithm Type For Computing Flooding
        Topology" registry are as follows:</t>

<!--Action 11-->
<table anchor="IGP-Algorithm-Type-For-Computing-Flooding-Topology">
  <name></name>
  <thead>
    <tr>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>      
    <tr>
      <td>0</td>
      <td>Reserved for centralized mode</td>
    </tr>
    <tr>
      <td>1-127</td>
      <td>Unassigned. Individual values are to be assigned according to the "Expert
      Review" policy defined in <xref target="RFC8126"/>. The designated
      experts should require a clear, public specification of the algorithm
      and comply with <xref target="RFC7370"/>.</td>
    </tr>
    <tr>
      <td>128-254</td>
      <td>Reserved for Private Use</td>
    </tr>
    <tr>
      <td>255</td>
      <td>Reserved</td>
    </tr>
  </tbody>
</table>
      </section>
    </section>
    <section anchor="Security">
      <name>Security Considerations</name>
      <t>This document introduces no new security issues. Security of routing
      within a domain is already addressed as part of the routing protocols
      themselves. This document proposes no changes to those security
      architectures.</t>
      <t>An attacker could become the Area Leader and
      introduce a flawed flooding algorithm into the network thus compromising
      the operation of the protocol. Authentication methods as described in
      <xref target="RFC5304"/> and <xref target="RFC5310"/> for IS-IS, <xref target="RFC2328"/> and <xref target="RFC7474"/> for OSPFv2, and <xref target="RFC5340"/> and <xref target="RFC4552"/> for OSPFv3 <bcp14>SHOULD</bcp14> be
      used to prevent such attacks.</t>
    </section>
  </middle>

  <back>

    <references>
      <name>References</name>
      <references>
        <name>Normative References</name>
        <reference anchor="ISO10589" target="https://www.iso.org/standard/30932.html">
          <front>
            <title>Information technology - Telecommunications and information exchange between systems - Intermediate System to Intermediate System intra-domain routeing information exchange protocol for use in conjunction with the protocol for providing the connectionless-mode network service (ISO 8473)</title>
            <author>
              <organization abbrev="ISO">International Organization for
            Standardization</organization>
            </author>
            <date month="11" year="2002"/>
          </front>
          <seriesInfo name="ISO/IEC" value="10589:2002"/>
	      <refcontent>Second Edition</refcontent>
        </reference>

        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2328.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.4552.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5029.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5250.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5304.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5310.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5340.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5613.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7356.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7474.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7684.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7770.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7981.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8126.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8362.xml"/>
      </references>
      <references>
        <name>Informative References</name>

        <reference anchor="Bondy" target="https://www.zib.de/groetschel/teaching/WS1314/BondyMurtyGTWA.pdf">
          <front>
            <title>Graph Theory With Applications</title>
            <author fullname="John Adrian Bondy" initials="J. A." surname="Bondy"/>
            <author fullname="U. S. R. Murty" initials="U. S. R." surname="Murty"/>
            <date year="1976"/>
          </front>
          <refcontent>Elsevier Science Publishing Co., Inc.</refcontent>
          <seriesInfo name="ISBN" value="0-444-19451-7"/>
        </reference>

        <reference anchor="Clos">
          <front>
            <title>A study of non-blocking switching networks</title>
            <author fullname="Charles Clos" initials="C." surname="Clos"/>
            <date month="March" year="1953"/>
          </front>
          <seriesInfo name="DOI" value="10.1002/j.1538-7305.1953.tb01433.x"/>
          <refcontent>The Bell System Technical Journal, Volume 32, Issue 2, pp. 406-424</refcontent>
        </reference>

        <reference anchor="Leiserson">
          <front>
           <title>Fat-trees: Universal networks for hardware-efficient supercomputing</title>
            <author fullname="C. E. Leiserson" initials="C. E." surname="Leiserson"/>
            <date month="10" year="1985"/>
          </front>
         <seriesInfo name="DOI" value="10.1109/TC.1985.6312192"/>
         <refcontent>IEEE Transactions on Computers, Volume C-34, Issue 10, pp. 892-901</refcontent>
        </reference>


        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2973.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3630.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.4811.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7370.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7938.xml"/>

      </references>
    </references>
    <section anchor="Acknowledgements" numbered="false">
      <name>Acknowledgements</name>
      <t>The authors would like to thank <contact fullname="Sarah Chen"/>,
      <contact fullname="Tony Przygienda"/>, <contact fullname="Dave
      Cooper"/>, <contact fullname="Gyan Mishra"/>, and <contact fullname="Les
      Ginsberg"/> for their contributions to this work. The authors would also
      like to thank Arista Networks for supporting the development of this
      technology.</t>
      <t>The authors would like to thank <contact fullname="Zeqing (Fred)
      Xia"/>, <contact fullname="Naiming Shen"/>, <contact fullname="Adam
      Sweeney"/>, <contact fullname="Acee Lindem"/>, and <contact
      fullname="Olufemi Komolafe"/> for their helpful comments.</t>
      <t>The authors would like to thank <contact fullname="Tom Edsall"/> for initially introducing                                         
      them to the problem.</t>
      <t>Advertising Local Edges Enabled for Flooding (LEEF) is based on an
      idea proposed by <contact fullname="Huaimo Chen"/>, <contact
      fullname="Mehmet Toy"/>, <contact fullname="Yi Yang"/>, <contact
      fullname="Aijun Wang"/>, <contact fullname="Xufeng Liu"/>, <contact
      fullname="Yanhe Fan"/>, and <contact fullname="Lei Liu"/>.  The authors wish to
      thank them for their contributions.</t>
    </section>
  </back>
</rfc>
