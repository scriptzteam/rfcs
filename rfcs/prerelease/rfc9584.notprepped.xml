<?xml version='1.0' encoding='UTF-8'?>

<!DOCTYPE rfc [
  <!ENTITY nbsp    "&#160;">
  <!ENTITY zwsp   "&#8203;">
  <!ENTITY nbhy   "&#8209;">
  <!ENTITY wj     "&#8288;">
]>

<rfc xmlns:xi="http://www.w3.org/2001/XInclude" ipr="trust200902" docName="draft-ietf-avtcore-rtp-evc-07" number="9584" category="std" consensus="true" submissionType="IETF" obsoletes="" updates="" tocInclude="true" sortRefs="true" symRefs="true" version="3" xml:lang="en">

  <front>
    <title abbrev="RTP Payload Format for EVC">RTP Payload Format for Essential Video Coding (EVC)</title>
    <seriesInfo name="RFC" value="9584"/>
    <author initials="S." surname="Zhao" fullname="Shuai Zhao">
      <organization>Intel</organization>
      <address>
        <postal>
          <street>2200 Mission College Blvd</street>
          <city>Santa Clara</city><region>California</region>
          <code>95054</code>
          <country>United States of America</country>
        </postal>
        <email>shuai.zhao@ieee.org</email>
      </address>
    </author>
    <author initials="S." surname="Wenger" fullname="Stephan Wenger">
      <organization>Tencent</organization>
      <address>
        <postal>
          <street>2747 Park Blvd</street>
          <city>Palo Alto</city><region>California</region>
          <code>94588</code>
          <country>United States of America</country>
        </postal>
        <email>stewe@stewe.org</email>
      </address>
    </author>
    <author initials="Y." surname="Lim" fullname="Youngkwon Lim">
      <organization>Samsung Electronics</organization>
      <address>
        <postal>
          <street>6625 Excellence Way</street>
          <city>Plano</city><region>Texas</region>
          <code>75013</code>
          <country>United States of America</country>
        </postal>
        <email>yklwhite@gmail.com</email>
      </address>
    </author>

    <date year="2024" month="June"/>

    <area>WIT</area>
    <workgroup>avtcore</workgroup>

    <keyword>EVC</keyword>
    <keyword>ISO/IEC 23094-1</keyword>
    <keyword>Essential Video Coding</keyword>

    <abstract>
      <t>This document describes an RTP payload format for the Essential Video
      Coding (EVC) standard, published as ISO/IEC International Standard
      23094-1. EVC was developed by the MPEG. The RTP payload format allows
      for the packetization of one or more Network Abstraction Layer (NAL)
      units in each RTP packet payload and the fragmentation of a NAL unit
      into multiple RTP packets. The payload format has broad applicability in
      videoconferencing, Internet video streaming, and high-bitrate
      entertainment-quality video, among other applications.</t>
    </abstract>
  </front>
  <middle>


<section anchor="introduction">
      <name>Introduction</name>
      <t>The Essential Video Coding <xref target="EVC"/> standard,  which is formally designated as ISO/IEC International Standard 23094-1 <xref target="EVC"/>, was published in 2020.  One of MPEG's goals is to keep EVC's Baseline profile essentially royalty-free by using technologies published more than 20 years ago or otherwise known to be available for use without a requirement for paying royalties, whereas more advanced profiles follow a reasonable and non-discriminatory licensing terms policy. Both the Baseline profile and higher profiles of EVC <xref target="EVC"/> are reported to provide coding efficiency gains over High Efficiency Video Coding <xref target="HEVC"/> and Advanced Video Coding <xref target="AVC"/> under certain configurations.</t>
      <t>This document describes an RTP payload format for EVC. It shares its basic design with the NAL unit-based RTP payload formats of H.264 Video Coding <xref target="RFC6184"/>, Scalable Video Coding (SVC) <xref target="RFC6190"/>, High Efficiency Video Coding (HEVC) <xref target="RFC7798"/>, and Versatile Video Coding (VVC) <xref target="RFC9328"/>.  With respect to design philosophy, security, congestion control, and overall implementation complexity, it has similar properties to those earlier payload format specifications.  This is a conscious choice, as at least the RTP Payload Format for H.264 video as described in <xref target="RFC6184"/> is widely deployed and generally known in the relevant implementer communities.  Certain mechanisms described in <xref target="RFC6190"/> were incorporated, as EVC supports temporal scalability. EVC currently does not offer higher forms of scalability.</t>
      <section anchor="overview-of-the-evc-codec">
        <name>Overview of the EVC Codec</name>
        <t>The codings described in <xref target="EVC"/>, <xref target="AVC"/>, <xref target="HEVC"/>, and <xref target="VVC"/> share a similar hybrid video codec design.  In this document, we provide a very brief overview of those features of EVC that are, in some form, addressed by the payload format specified herein.  Implementers have to read, understand, and apply the ISO/IEC standard pertaining to EVC <xref target="EVC"/> to arrive at interoperable, well-performing implementations. The EVC standard has a Baseline profile and a Main profile, the latter being a superset of the Baseline profile but including more advanced features.  EVC also includes still image variants of both Baseline and Main profiles, in each of which the bitstream is restricted to a single IDR picture. EVC facilitates certain walled garden implementations under commercial constraints imposed by intellectual property rights by including syntax elements that allow encoders to mark a bitstream as to what of the many independent coding tools are exercised in the bitstream, in a spirit similar to the general_constraint_info of <xref target="VVC"/>.</t>
        <t>Conceptually, all EVC, AVC, HEVC, and VVC include a Video Coding Layer (VCL), a term that is often used to refer to the coding-tool features, and a Network Abstraction Layer (NAL), which usually refers to the systems and transport interface aspects of the codecs.</t>
        <section anchor="coding-tool-features-informative">
          <name>Coding-Tool Features (Informative)</name>

       <dl newline="true">
          <dt>Coding blocks and transform structure</dt>
          <dd><t>EVC uses a traditional block-based coding structure, which
          divides the encoded image into blocks of up to 64x64 luma samples
          for the Baseline profile and 128x128 luma samples for the Main
          profile that can be recursively divided into smaller blocks.  The
          Baseline profiles utilize HEVC-like quad-tree-blocks partitioning
          that allows a block to be divided horizontally and vertically into
          four smaller square blocks. The Main profile adds two advanced
          coding structure tools: 1) Binary Ternary Tree (BTT) partitioning
          that allows non-square coding units and 2) Split Unit Coding Order
          segmentation that changes the processing order of the blocks from
          traditional left-to-right and top-to-bottom scanning order
          processing to an alternative right-to-left and bottom-to-top
          scanning order. In the Main profile, the picture can be divided into
          slices and tiles, which can be independently encoded and/or decoded
          in parallel.</t>
          <t>EVC also uses a traditional video codecs prediction model assuming two general types of predictions: Intra (spatial) and Inter (temporal) predictions. A residue block is calculated by subtracting predicted data from the original (encoded) one. The Baseline profile allows only discrete cosine transform (DCT-2) and scalar quantization to transform and quantize residue data, wherein the Main profile additionally has options to use discrete sine transform (DST-7) and another type of discrete cosine transform (DCT-8). In addition, for the Main profile, Improved Quantization and Transform (IQT) uses a different mapping or clipping function for quantization. An inverse zig-zag scanning order is used for coefficient coding. Advanced Coefficient Coding (ADCC) in the Main profile can code coefficient values more efficiently, for example, indicated by the last non-zero coefficient. The Baseline profile uses a straightforward RLE-based approach to encode the quantized coefficients.</t></dd>
          <dt>Entropy coding</dt>
          <dd><t>EVC uses a similar binary arithmetic coding mechanism as HEVC CABAC (context adaptive binary arithmetic coding) and VVC. The mechanism includes a binarization step and a probability update defined by a lookup table. In the Main profile, the derivation process of syntax elements based on adjacent blocks makes the context modeling and initialization process more efficient.</t>
</dd>

          <dt>In-loop filtering</dt>
          <dd><t>The Baseline profile of EVC uses the deblocking filter defined in H.263 Annex J <xref target="VIDEO-CODING" format="default"/>. In the Main profile, an Advanced Deblocking Filter (ADDB) can be used as an alternative, which can further reduce undesirable compression artifacts. The Main profile also defines two additional in-loop filters that can be used to improve the quality of decoded pictures before output and/or for Inter prediction. A Hadamard Transform Domain Filter (HTDF) is applied to the luma samples before deblocking, and a lookup  table is used to determine four adjacent samples for filtering. An adaptive Loop Filter (ALF) allows signals of up to 25 different filters to be sent for the luma components; the best filter can be selected through the classification process for each 4x4 block. Similarly to VVC, the filter parameters of ALF are signaled in the Adaptation Parameter Set (APS).</t></dd>

          <dt>Inter prediction</dt>
          <dd><t>The basis of EVC's Inter prediction is motion compensation using interpolation filters with a quarter sample resolution. In the Baseline profile, a motion vector is transmitted using one of three spatially neighboring motion vectors and a temporally collocated motion vector as a predictor. A motion vector difference may be signaled relative to the selected predictor, but there is a case where no motion vector difference is signaled, and there is no remaining data in the block. This mode is called a "skip" mode. The Main profile includes six additional tools to provide improved Inter prediction. With Advanced Motion Vectors Prediction (ADMVP), adjacent blocks can be conceptually merged to indicate that they use the same motion, but more advanced schemes can also be used to create predictions from the basic model list of candidate predictors. The Merge with Motion Vector Difference (MMVD) tool uses a process similar to the concept of merging neighboring blocks but also allows the use of expressions that include a starting point, motion amplitude, and direction of motion to send a motion vector signal. Using Advanced Motion Vector Prediction (AMVP), candidate motion vector predictions for the block can be derived from its neighboring blocks in the same picture and collocated blocks in the reference picture. The Adaptive Motion Vector Resolution (AMVR) tool provides a way to reduce the accuracy of a motion vector from a quarter sample to half sample, full sample, double sample, or quad sample, which provides an efficiency advantage, such as when sending large motion vector differences. The Main profile also includes the Decoder-side Motion Vector Refinement (DMVR), which uses a bilateral template matching process to refine the motion vectors without additional signaling.</t></dd>

          <dt>Intra prediction and intra coding</dt>
          <dd><t>Intra prediction in EVC is performed on adjacent samples of coding units in a partitioned structure. For the Baseline profile, when all coding units are square, there are five different prediction modes: DC (mean value of the neighborhood), horizontal, vertical, and two different diagonal directions. In the Main profile, intra prediction can be applied to any rectangular coding unit, and 28 additional direction modes are available in the Enhanced Intra Prediction Directions (EIPDs). In the Main profile, an encoder can also use Intra Block Copy (IBC), where previously decoded sample blocks of the same picture are used as a predictor. A displacement vector in integer sample precision is signaled to indicate where the prediction block in the current picture is used for this mode.</t></dd>

          <dt>Reference frames management</dt>
          <dd><t>In EVC, decoded pictures can be stored in a decoded picture buffer (DPB) for predicting pictures that follow them in the decoding order. In the Baseline profile, the management of the DPB (i.e., the process of adding and deleting reference pictures) is controlled by a straightforward AVC-like sliding window approach with very few parameters from the sequence parameter set (SPS). For the Main profile, DPB management can be handled much more flexibly using explicitly signaled Reference Picture Lists (RPLs) in the SPS or slice level.</t></dd>
	</dl>
        </section>
        <section anchor="systems-and-transport-interfaces">
          <name>Systems and Transport Interfaces</name>
          <t>EVC inherits the basic systems and transport interface designs from AVC and HEVC. These include the NAL-unit-based syntax, hierarchical syntax and data unit structure, and Supplemental Enhancement Information (SEI) message mechanism. The hierarchical syntax and data unit structure consists of a sequence-level parameter set (i.e., SPS), two picture-level parameter sets (i.e., PPS and APS, each of which can apply to one or more pictures), slice-level header parameters, and lower-level parameters.</t>
          <t>A number of key components that influenced the NAL design of EVC as well as this document are described below:</t>
          
          <dl newline="true">
	    <dt>Sequence parameter set</dt>
              <dd><t>The Sequence Parameter Set (SPS) contains syntax elements pertaining to a Coded Video Sequence (CVS), which is a group of pictures, starting with a random access point picture and followed by zero or more pictures that may depend on each other and the random access point picture. In MPEG-2, the equivalent of a CVS is a Group of Pictures (GOP), which generally starts with an I frame and is followed by P and B frames. While more complex in its options of random access points, EVC retains this basic concept. In many TV-like applications, a CVS contains a few hundred milliseconds to a few seconds of video. In video conferencing (without switching Multipoint Control Units (MCUs) involved), a CVS can be as long in duration as the whole session.</t></dd>
              <dt>Picture and adaptation parameter set</dt>
              <dd><t>The Picture Parameter Set (PPS) and the Adaptation Parameter Set (APS) carry information pertaining to a single picture. The PPS contains information that is likely to stay constant from picture to picture, at least for pictures of a certain type; whereas the APS contains information, such as adaptive loop filter coefficients, that are likely to change from picture to picture.</t></dd>
	      <dt>Profile, level, and toolsets</dt>
              <dd><t>Profiles and levels follow the same design considerations known from AVC, HEVC, and video codecs as old as MPEG-1 Video. The profile defines a set of tools (not to be confused with the "toolset" discussed below) that a decoder compliant with this profile has to support. In EVC, profiles are defined in Annex A of <xref target="EVC"/>.  Formally, they are defined as a set of constraints that a bitstream needs to conform to. In EVC, the Baseline profile is much more severely constrained than the Main profile, reducing implementation complexity. Levels relate to bitstream complexity in dimensions such as maximum sample decoding rate, maximum picture size, and similar parameters directly related to computational complexity and/or memory demands.</t>
<t>Profiles and levels are signaled in the highest parameter set available, the SPS.</t>
  <t>EVC contains another mechanism related to the use of coding tools, known as the toolset syntax elements. These syntax elements, toolset_idc_h and toolset_idc_l (located in the SPS), are bitmasks that allow encoders to indicate which coding tools they are using within the menu of profiles offered by the profile that is also signaled. No decoder conformance point is associated with the toolset, but a bitstream that was using a coding tool that is indicated as not being used in the toolset syntax element would be non-compliant. While MPEG specifically rules out the use of the toolset syntax element as a conformance point, walled garden implementations could do so without incurring the interoperability problems MPEG fears and create bitstreams and decoders that do not support one or more given tools. That, in turn, may be useful to mitigate certain intellectual property-related risks.</t> </dd>

          <dt>Bitstream and elementary stream</dt>
          <dd><t>Above the Coded Video Sequence (CVS), EVC defines a video bitstream that can be used as an elementary stream in the MPEG systems context. For this document, the video bitstream syntax level is not relevant.</t></dd>
          <dt>Random access support</dt>
          <dd><t>EVC supports random access mechanisms based on IDR and clean random access (CRA) access units.</t></dd>
          <dt>Temporal scalability support</dt>
          <dd><t>EVC supports temporal scalability through the generalized reference picture selection approach known since AVC/SVC. Up to six temporal layers are supported. The temporal layer is signaled in the NAL unit header (which co-serves as the payload header in this document), in the nuh_temporal_id field.</t></dd>

          <dt>Reference picture management</dt>
          <dd><t>EVC's reference picture management is POC-based, similar to HEVC. In the Main profile, substantially all reference picture list manipulations available in HEVC are specified, including explicit transmissions or updates of reference picture lists. Although for reference pictures management purposes, EVC uses a modern VVC-like RPL approach, which is conceptually simpler than the HEVC one. In the Baseline profile, reference picture management is more restricted, allowing for a comparatively simple group of picture structures only.</t></dd>
          <dt>SEI Message</dt>
          <dd><t>EVC inherits many of HEVC's SEI messages, occasionally with syntax and/or semantics changes, making them applicable to EVC. 
In addition, some of the codec-agnostic SEI messages of the VSEI specification <xref target="VSEI"/> are also mapped.</t></dd>
            </dl>
        </section>
        <section anchor="parallel-processing-support-informative">
          <name>Parallel Processing Support (Informative)</name>

          <t>EVC's Baseline profile includes no tools specifically addressing
          parallel-processing support. The Main profile includes independently
          decodable slices for parallel processing.  The slices are defined as
          any rectangular region within a picture. They can be encoded to have
          coding dependencies with other slices from the previous picture but
          not with other slices in the same picture. No specific support for
          parallel processing is specified in this RTP payload format.</t>

        </section>
        <section anchor="NALUnitHeader">
          <name>NAL Unit Header</name>
          <t>EVC maintains the NAL unit concept of <xref target="VVC"/> with different parameter options. EVC also uses a two-byte NAL unit header, as shown in <xref target="evc-nuh"/>.  The payload of a NAL unit refers to the NAL unit excluding the NAL unit header.</t>
          <figure anchor="evc-nuh">
	    <name>The Structure of the EVC NAL Unit Header</name>
            <artwork><![CDATA[
                     0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 
                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                    |F|   Type    | TID | Reserve |E|
                    +-------------+-----------------+]]></artwork>
          </figure>
          <t>The semantics of the fields in the NAL unit header are as specified in EVC and described briefly below for convenience. In addition to the name and size of each field, the corresponding syntax element name in EVC is also provided.</t>

	  <dl>
            <dt>F:</dt>
	    <dd><t>1 bit</t>
	    <dl>
            <dt>forbidden_zero_bit:</dt>
	    <dd>Required to be zero in EVC. Note that the
            inclusion of this bit in the NAL unit header was included to
            enable transport of EVC video over MPEG-2 transport systems
            (avoidance of start code emulations) <xref target="MPEG2S"/>. In
            this document, the value 1 may be used to indicate a syntax
            violation, e.g., for a NAL unit resulting from aggregating a
            number of fragmented units of a NAL unit but missing the last
            fragment, as described in <xref target="funits"/>.</dd></dl>
	    </dd>
            <dt>Type:</dt>
	    <dd>
	      <t>6 bits</t>
	      <dl>
	      <dt>nal_unit_type_plus1:</dt>
	      <dd><t>This field allows the NAL Unit Type to
	      be computed. The NAL Unit Type (NalUnitType) is equal to the
	      value found in this field, minus 1; in other words:</t>
	      <t>NalUnitType = nal_unit_type_plus1 - 1.</t>
	      <t>The NAL unit type is detailed in Table 4 of <xref
	      target="EVC"/>. If the value of NalUnitType is less than or
	      equal to 23, the NAL unit is a VCL NAL unit.  Otherwise, the NAL
	      unit is a non-VCL NAL unit.  For a reference of all currently
	      defined NAL unit types and their semantics, please refer to
	      Section 7.4.2.2 of <xref target="EVC"/>. Note that
	      nal_unit_type_plus1 <bcp14>MUST NOT</bcp14> be zero.</t></dd></dl>
            </dd>
            <dt>TID:</dt>
	    <dd><t>3 bits</t>
	    <dl>
            <dt>nuh_temporal_id:</dt>
	    <dd>This field specifies the temporal identifier
            of the NAL unit. The value of TemporalId is equal to
            TID. TemporalId shall be equal to 0 if it is an IDR NAL unit type
            (NAL unit type 1).</dd></dl>
            </dd>
            <dt>Reserve:</dt>
	    <dd><t>5 bits</t>
	    <dl>
	    <dt>nuh_reserved_zero_5bits:</dt>
	    <dd>This field shall be equal to the version of the EVC
	    standard. Values of nuh_reserved_zero_5bits greater than 0 are
	    reserved for future use by ISO/IEC. Decoders conforming to a
	    profile specified in Annex A of <xref target="EVC"/> shall ignore
	    (i.e., remove from the bitstream and discard) all NAL units with
	    values of nuh_reserved_zero_5bits greater than 0.</dd></dl>
            </dd>
            <dt>E:</dt>
	    <dd><t>1 bit</t>
	    <dl>
	    <dt>nuh_extension_flag:</dt>
	    <dd>This field shall be equal to the version of
	    the EVC standard. The value of nuh_extension_flag equal to 1 is
	    reserved for future use by ISO/IEC. Decoders conforming to a
	    profile specified in Annex A of <xref target="EVC"/> shall ignore
	    (i.e., remove from the bitstream and discard) all NAL units with
	    values of nuh_extension_flag equal to 1.</dd></dl>
            </dd>
          </dl>
        </section>
      </section>
      <section anchor="overview-of-the-payload-format">
        <name>Overview of the Payload Format</name>
        <t>This payload format defines the following processes required for transport of EVC-coded data over RTP <xref target="RFC3550"/>:</t>
        <ul spacing="normal">
          <li>usage of RTP header with this payload format</li>
          <li>packetization of EVC-coded NAL units into RTP packets using
          three types of payload structures: a single NAL unit, aggregation,
          and fragment unit</li>
          <li>transmission of EVC NAL units of the same bitstream within a
          single RTP stream</li>
          <li>usage of media type parameters to be used with the Session
          Description Protocol (SDP) <xref target="RFC8866"/></li>
          <li>usage of RTCP feedback messages</li>
        </ul>
      </section>
    </section>
    <section anchor="conventions">
      <name>Conventions</name>
        <t>
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>",
    "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>",
    "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>",
    "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be
    interpreted as described in BCP&nbsp;14 <xref target="RFC2119"/> <xref
    target="RFC8174"/> when, and only when, they appear in all capitals, as
    shown here.
        </t>


    </section>
    <section anchor="definitionsandabbr">
      <name>Definitions and Abbreviations</name>
      <section anchor="definitions">
        <name>Definitions</name>
        <t>This document uses the terms and definitions of EVC.  <xref target="definitionforevc"/>
lists relevant definitions from <xref target="EVC"/> for convenience.  <xref target="def"/>
provides definitions specific to this document.</t>
        <section anchor="definitionforevc">
          <name>Definitions from the EVC Standard</name>
	  <dl spacing="normal" newline="true">
            <dt>Access Unit (AU):</dt>
	    <dd>A set of NAL units that are associated with each other
	    according to a specified classification rule, are consecutive in
	    decoding order, and contain exactly one coded picture.</dd>
            <dt>Adaptation Parameter Set (APS):</dt>
	    <dd>A syntax structure containing syntax elements that apply to
	    zero or more slices as determined by zero or more syntax elements
	    found in slice headers.</dd>
            <dt>Bitstream:</dt>
	    <dd>A sequence of bits, in the form of a NAL unit stream or a byte
	    stream, that forms the representation of coded pictures and
	    associated data forming one or more CVSs.</dd>
            <dt>Coded Picture:</dt>
	    <dd>A coded representation of a picture containing all CTUs of the
	    picture.</dd>
            <dt>Coded Video Sequence (CVS):</dt>
	    <dd>A sequence of access units that consists, in decoding order,
	    of an IDR access unit, followed by zero or more access units that
	    are not IDR access units, including all subsequent access units up
	    to but not including any subsequent access unit that is an IDR
	    access unit.</dd>
            <dt>Coding Tree Block (CTB):</dt>
	    <dd>An NxN block of samples for some value of N such that the
	    division of a component into CTBs is a partitioning.</dd>
            <dt>Coding Tree Unit (CTU):</dt>

	    <dd>A CTB of luma samples, two corresponding CTBs of chroma
	    samples of a picture that has three sample arrays, or a CTB of
	    samples of a monochrome picture or a picture that is coded using
	    three separate color planes and syntax structures used to code
	    the samples.</dd>
            <dt>Decoded Picture:</dt>
	    <dd>A decoded picture is derived by decoding a coded picture.</dd>
            <dt>Decoded Picture Buffer (DPB):</dt>
	    <dd>A buffer holding decoded pictures for reference, output
	    reordering, or output delay specified for the hypothetical
	    reference decoder in Annex C of the <xref target="EVC"/>
	    standard.</dd>
            <dt>Dynamic Range Adjustment (DRA):</dt>
	    <dd>A mapping process that is applied to the decoded picture prior to
	    cropping and output as part of the decoding process; it is
	    controlled by parameters conveyed in an Adaptation Parameter Set
	    (APS).</dd>
            <dt>Hypothetical Reference Decoder (HRD):</dt>
	    <dd>A hypothetical decoder model that specifies constraints on the
	    variability of conforming NAL unit streams or conforming byte
	    streams that an encoding process may produce.</dd>
            <dt>IDR Access Unit:</dt>
	    <dd>An access unit in which the coded picture is an IDR picture.</dd>
            <dt>IDR Picture:</dt>
	    <dd>The coded picture for which each VCL NAL unit has NalUnitType equal to IDR_NUT.</dd>
            <dt>Level:</dt>
	    <dd>A defined set of constraints on the values that may be taken
	    by the syntax elements and variables of this document, or the
	    value of a transform coefficient prior to scaling.</dd>
            <dt>Network Abstraction Layer (NAL) Unit:</dt>
	    <dd>A syntax structure containing an indication of the type of
	    data to follow and bytes containing that data in the form of an
	    RBSP interspersed as necessary.</dd>
            <dt>Network Abstraction Layer (NAL) Unit Stream:</dt>
	    <dd>A sequence of NAL units.</dd>
            <dt>Non-IDR Picture:</dt>
	    <dd>A coded picture that is not an IDR picture.</dd>
            <dt>Non-VCL NAL Unit:</dt>
	    <dd>A NAL unit that is not a VCL NAL unit.</dd>
            <dt>Picture Parameter Set (PPS):</dt>
	    <dd>A syntax structure containing syntax elements that apply to
	    zero or more entire coded pictures as determined by a syntax
	    element found in each slice header.</dd>
            <dt>Picture Order Count (POC):</dt>
	    <dd>A variable that is associated with each picture, uniquely
	    identifies the associated picture among all pictures in the CVS,
	    and (when the associated picture is to be output from the DPB) indicates the position of the associated picture
	    in output order relative to the output order positions of the
	    other pictures in the same CVS that are to be output from the
	    DPB.</dd>
            <dt>Raw Byte Sequence Payload (RBSP):</dt>
	    <dd>A syntax structure containing an integer number of bytes that
	    is encapsulated in a NAL unit and that is either empty or has the
	    form of a string of data bits containing syntax elements followed
	    by an RBSP stop bit and zero or more subsequent bits equal to
	    0.</dd>
            <dt>Sequence Parameter Set (SPS):</dt>
	    <dd>A syntax structure containing syntax elements that apply to
	    zero or more entire CVSs as determined by the content of a syntax
	    element found in the PPS referred to by a syntax element found in
	    each slice header.</dd>
            <dt>Slice:</dt>
	    <dd>An integer number of tiles of a picture in the tile scan of
	    the picture, exclusively contained in a single NAL unit.</dd>
            <dt>Tile:</dt>
	    <dd>A rectangular region of CTUs within a particular tile column and
	    a particular tile row in a picture.</dd>
            <dt>Tile Column:</dt>
	    <dd>A rectangular region of CTUs having a height equal to the height
	    of the picture and width specified by syntax elements in the
	    PPS.</dd>
            <dt>Tile Row:</dt>
	    <dd>A rectangular region of CTUs having a height specified by
	    syntax elements in the PPS and a width equal to the width of the
	    picture.</dd>
            <dt>Tile Scan:</dt>
	    <dd>A specific sequential ordering of CTUs partitioning a picture
	    in which the CTUs are ordered consecutively in CTU raster scan in
	    a tile, whereas tiles in a picture are ordered consecutively in a
	    raster scan of the tiles of the picture.</dd>
            <dt>Video Coding Layer (VCL) NAL Unit:</dt>
	    <dd>A collective term for coded slice NAL units and the subset of
	    NAL units that have reserved values of NalUnitType that are
	    classified as VCL NAL units in this document.</dd>
	  </dl>
        </section>
        <section anchor="def">
          <name>Definitions Specific to This Document</name>
	  <dl newline="true" spacing="normal">
            <dt>Media-Aware Network Element (MANE):</dt><dd><t>A network
            element, such as a middlebox, selective forwarding unit, or
            application-layer gateway, that is capable of parsing certain
            aspects of the RTP payload headers or the RTP payload and reacting
            to their contents.</t>
	    <aside><t>Informative note: The concept of a MANE goes beyond normal
	    routers or gateways in that a MANE has to be aware of the
	    signaling (e.g., to learn about the payload type mappings of the
	    media streams), and in that it has to be trusted when working with
	    Secure RTP (SRTP).  The advantage of using MANEs is that they
	    allow packets to be dropped according to the needs of the media
	    coding.  For example, if a MANE has to drop packets due to
	    congestion on a certain link, it can identify and remove those
	    packets whose elimination produces the least adverse effect on the
	    user experience.  After dropping packets, MANEs must rewrite RTCP
	    packets to match the changes to the RTP stream, as specified in
	    <xref target="RFC3550" section="7" sectionFormat="of"/>.</t></aside>
	  </dd>
	  <dt>NAL unit decoding order:</dt><dd>A NAL unit order that conforms
	  to the constraints on NAL unit order given in Section 7.4.2.3 of
	  <xref target="EVC"/> and follows the order of NAL units in the
	  bitstream.</dd>
          <dt>NALU-time:</dt><dd>The value that the RTP timestamp would have
          if the NAL unit would be transported in its own RTP packet.</dd>
          <dt>NAL unit output order:</dt><dd>A NAL unit order in which NAL
          units of different access units are in the output order of the
          decoded pictures corresponding to the access units, as specified in
          <xref target="EVC"/>, and in which NAL units within an access unit
          are in their decoding order.</dd>
          <dt>RTP stream:</dt><dd>See <xref target="RFC7656"/>.  Within the
          scope of this document, one RTP stream is utilized to transport an
          EVC bitstream, which may contain one or more temporal
          sub-layers.</dd>
          <dt>Transmission order:</dt><dd>The order of packets in ascending
          RTP sequence number order (in modulo arithmetic).  Within an
          Aggregation Packet (AP), the NAL unit transmission order is the same as
          the order of appearance of NAL units in the packet.</dd>
	  </dl>
        </section>
      </section>
      <section anchor="abbreviations">
        <name>Abbreviations</name>
	<dl newline="false" spacing="normal" indent="9">
          <dt>AU</dt>
          <dd>Access Unit</dd>
          <dt>AP</dt>
	  <dd>Aggregation Packet</dd>
          <dt>APS</dt>
	  <dd>Adaptation Parameter Set</dd>
          <dt>ATS</dt>
	  <dd>Adaptive Transform Selection</dd>
          <dt>B</dt>
	  <dd>Bi-predictive</dd>
          <dt>CBR</dt>
	  <dd>Constant Bit Rate</dd>
          <dt>CPB</dt>
	  <dd>Coded Picture Buffer</dd>
          <dt>CTB</dt>
	  <dd>Coding Tree Block</dd>
          <dt>CTU</dt>
	  <dd>Coding Tree Unit</dd>
          <dt>CVS</dt>
	  <dd>Coded Video Sequence</dd>
          <dt>DPB</dt>
	  <dd>Decoded Picture Buffer</dd>
          <dt>HRD</dt>
	  <dd>Hypothetical Reference Decoder</dd>
          <dt>HSS</dt>
	  <dd>Hypothetical Stream Scheduler</dd>
          <dt>I</dt>
	  <dd>Intra</dd>
          <dt>IDR</dt>
	  <dd>Instantaneous Decoding Refresh</dd>
          <dt>LSB</dt>
	  <dd>Least Significant Bit</dd>
          <dt>LTRP</dt>
	  <dd>Long-Term Reference Picture</dd>
          <dt>MMVD</dt>
	  <dd>Merge with Motion Vector Difference</dd>
          <dt>MSB</dt>
	  <dd>Most Significant Bit</dd>
          <dt>NAL</dt>
	  <dd>Network Abstraction Layer</dd>
          <dt>P</dt>
	  <dd>Predictive</dd>
          <dt>POC</dt>
	  <dd>Picture Order Count</dd>
          <dt>PPS</dt>
	  <dd>Picture Parameter Set</dd>
          <dt>QP</dt>
	  <dd>Quantization Parameter</dd>
          <dt>RBSP</dt>
	  <dd>Raw Byte Sequence Payload</dd>
          <dt>RGB</dt>
	  <dd>Red, Green, and Blue</dd>
          <dt>SAR</dt>
	  <dd>Sample Aspect Ratio</dd>
          <dt>SEI</dt>
	  <dd>Supplemental Enhancement Information</dd>
          <dt>SODB</dt>
	  <dd>String Of Data Bits</dd>
          <dt>SPS</dt> 
	  <dd>Sequence Parameter Set</dd>
          <dt>STRP</dt>
	  <dd>Short-Term Reference Picture</dd>
          <dt>VBR</dt>
	  <dd>Variable Bit Rate</dd>
          <dt>VCL</dt>
	  <dd>Video Coding Layer</dd>
	  </dl>
      </section>
    </section>
    <section anchor="RTPPayloadFormat">
      <name>RTP Payload Format</name>
      <section anchor="RTPHeaderUsage">
        <name>RTP Header Usage</name>
        <t>The format of the RTP header is specified in <xref target="RFC3550"/> (included as
<xref target="rtp-header"/> for convenience).  This payload format uses the fields of
the header in a manner consistent with that specification.</t>
        <t>The RTP payload (and the settings for some RTP header bits) for
APs and Fragmentation Units (FUs) are specified in Sections 
<xref target="aps" format="counter"/> and <xref target="funits" format="counter"/>, respectively.</t>

        <figure anchor="rtp-header">
	  <name>RTP Header According to RFC 3550</name>
          <artwork><![CDATA[
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |V=2|P|X|  CC   |M|     PT      |       sequence number         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                           timestamp                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           synchronization source (SSRC) identifier            |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |            contributing source (CSRC) identifiers             |
   |                             ....                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]></artwork>
        </figure>

        <t>The RTP header information to be set according to this RTP payload format is set as follows:</t>
	<dl newline="false" spacing="normal">
          <dt>Marker bit (M):</dt>
	  <dd><t>1 bit</t>
	  <t>Set for the last packet of the access unit and carried in the
	  current RTP stream.  This is in line with the normal use of the M
	  bit in video formats to allow an efficient playout buffer
	  handling.</t>
          </dd>
          <dt>Payload Type (PT):</dt>
	  <dd><t>7 bits</t> 
	  <t>The assignment of an RTP payload type for this new payload format
	  is outside the scope of this document and will not be specified
	  here.  The assignment of a payload type has to be performed either
	  through the profile used or in a dynamic way.</t>
          </dd>
	  <dt>Sequence Number (SN):</dt>
	  <dd><t>16 bits</t>
	  <t>Set and used in accordance with <xref target="RFC3550"/>.</t>
	  </dd>
          <dt>Timestamp:</dt>
	  <dd><t>32 bits</t>
	  <t>The RTP timestamp is set to the sampling timestamp of the
	  content. A 90 kHz clock rate <bcp14>MUST</bcp14> be used.  If the
	  NAL unit has no timing properties of its own (e.g., parameter sets
	  or certain SEI NAL units), the RTP timestamp <bcp14>MUST</bcp14> be
	  set to the RTP timestamp of the coded picture of the access unit in
	  which the NAL unit is included.  For SEI messages, this information
	  is specified in Annex D of <xref target="EVC"/>. Receivers
	  <bcp14>MUST</bcp14> use the RTP timestamp for the display process,
	  even when the bitstream contains picture timing SEI messages or
	  decoding unit information SEI messages as specified in <xref
	  target="EVC"/>.</t>
          </dd>
          <dt>Synchronization source (SSRC):</dt>
	  <dd><t>32 bits</t>
	  <t>Used to identify the source of the RTP packets.  According to
	  this document, a single SSRC is used for all parts of a single
	  bitstream.</t>
          </dd>
        </dl>

      </section>
      <section anchor="PayloadHeaderUsage">
        <name>Payload Header Usage</name>
        <t>The first two bytes of the payload of an RTP packet are referred to
        as the payload header.  The payload header consists of the same fields
        (F, TID, Reserve, and E) as the NAL unit header, as shown in <xref
        target="NALUnitHeader"/>, irrespective of the type of the payload
        structure.</t>
        <t>The TID value indicates (among other things) the relative
        importance of an RTP packet, for example, because NAL units with
        larger TID values are not used to decode the ones with
        smaller TID values. A lower value of TID indicates a higher
        importance. More important NAL units <bcp14>MAY</bcp14> be better
        protected against transmission losses than less important NAL
        units.</t>
      </section>
      <section anchor="PayloadStructures">
        <name>Payload Structures</name>
        <t>Three different types of RTP packet payload structures are specified. A receiver can identify the type of an RTP packet payload through the Type field in the payload header.</t>
        <t>The three different payload structures are as follows:</t>
        <ul>
          <li>Single NAL unit packet: Contains a single NAL unit in
          the payload, and the NAL unit header of the NAL unit also serves as
          the payload header.  This payload structure is specified in <xref
          target="SingleNALUnit"/>.</li>
          <li>Aggregation Packet (AP): Contains more than one NAL unit
          within one access unit.  This payload structure is specified in
          <xref target="aps"/>.</li>
          <li>Fragmentation Unit (FU): Contains a subset of a single
          NAL unit. This payload structure is specified in <xref
          target="funits"/>.</li>
        </ul>
        <section anchor="SingleNALUnit">
          <name>Single NAL Unit Packets</name>
          <t>A single NAL unit packet contains exactly one NAL unit and
          consists of a payload header as defined in Table 4 of <xref
          target="EVC"/> (denoted as PayloadHdr), followed by a conditional
          16-bit DONL field (in network byte order), and the NAL unit payload
          data (the NAL unit excluding its NAL unit header) of the contained
          NAL unit, as shown in <xref target="single-nhr"/>.</t>

          <figure anchor="single-nhr">
	    <name>The Structure of a Single NAL Unit Packet</name>
            <artwork><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |           PayloadHdr          |      DONL (conditional)       |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  |                  NAL unit payload data                        |
  |                                                               |
  |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                               :...OPTIONAL RTP padding        |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]></artwork>
          </figure>

          <t>The DONL field, when present, specifies the value of the 16 least significant bits of the decoding order number of the contained NAL unit.  If sprop-max-don-diff (defined in <xref target="optionalParameters"/>) is greater than 0, the DONL field <bcp14>MUST</bcp14> be present, and the variable DON for the contained NAL unit is derived as equal to the value of the DONL field.  Otherwise (where sprop-max-don-diff is equal to 0), the DONL field <bcp14>MUST NOT</bcp14> be present.</t>
        </section>
        <section anchor="aps">
          <name>Aggregation Packets (APs)</name>
          <t>Aggregation Packets (APs) enable the reduction of packetization overhead for small NAL units, such as most of the non-VCL NAL units, which are often only a few octets in size.</t>
          <t>An AP aggregates NAL units of one access unit, and it <bcp14>MUST NOT</bcp14> contain NAL units from more than one AU. Each NAL unit to be carried in an AP is encapsulated in an aggregation unit. NAL units aggregated in one AP are included in NAL-unit-decoding order.</t>
          <t>An AP consists of a payload header, as defined in Table 4 of <xref target="EVC"/> (denoted here as PayloadHdr with Type=56), followed by two or more aggregation units, as shown in <xref target="au-hdr"/>.</t>

          <figure anchor="au-hdr">
	    <name>The Structure of an Aggregation Packet</name>
            <artwork><![CDATA[
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |    PayloadHdr (Type=56)       |                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               |
 |                                                               |
 |             two or more aggregation units                     |
 |                                                               |
 |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                               :...OPTIONAL RTP padding        |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]></artwork>
          </figure>

          <t>The fields in the payload header of an AP are set as follows. The F bit <bcp14>MUST</bcp14> be equal to 0 if the F bit of each aggregated NAL unit is equal to zero; otherwise, it <bcp14>MUST</bcp14> be equal to 1. The Type field <bcp14>MUST</bcp14> be equal to 56.</t>
          <t>The value of TID <bcp14>MUST</bcp14> be the smallest value of TID of all the aggregated NAL units. The value of Reserve and E <bcp14>MUST</bcp14> be equal to 0 for this specification.</t>

          <aside><t>Informative note: All VCL NAL units in an AP have the
          same TID value since they belong to the same access unit. However,
          an AP may contain non-VCL NAL units for which the TID value in the
          NAL unit header may be different from the TID value of the VCL NAL
          units in the same AP.</t></aside>

          <t>An AP <bcp14>MUST</bcp14> carry at least two aggregation units
          and can carry as many aggregation units as necessary; however, the
          total amount of data in an AP obviously <bcp14>MUST</bcp14> fit into
          an IP packet, and the size <bcp14>SHOULD</bcp14> be chosen so that
          the resulting IP packet is smaller than the path MTU size so to
          avoid IP layer fragmentation. An AP <bcp14>MUST NOT</bcp14> contain
          FUs specified in <xref target="funits"/>. APs <bcp14>MUST
          NOT</bcp14> be nested; i.e., an AP cannot contain another AP.</t>

	  <aside><t>Informative note: If a receiver encounters nested
	  APs, which is against the aforementioned
	  requirement, it has several options, listed in order of ease of
	  implementation: 1) ignore the nested AP; 2) ignore the nested AP and
	  report a "packet loss" to the decoder, if such functionality exists
	  in the API; and 3) implement support for nested APs and extract the
	  NAL units from these nested APs.</t></aside>

          <t>The first aggregation unit in an AP consists of a conditional 16-bit DONL field (in network byte order) followed by a 16-bit unsigned size information (in network byte order) that indicates the size of the
NAL unit in bytes (excluding these two octets but including the NAL unit header), followed by the NAL unit itself, including its NAL unit header, as shown in <xref target="au-first-nhdr"/>.</t>

          <figure anchor="au-first-nhdr">
	    <name>The Structure of the First Aggregation Unit in an AP</name>
            <artwork><![CDATA[
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |               :       DONL (conditional)      |   NALU size   |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |   NALU size   |                                               |
 +-+-+-+-+-+-+-+-+         NAL unit                              |
 |                                                               |
 |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                               :
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]></artwork>
          </figure>

          <aside><t>Informative note: The first octet of <xref
          target="au-first-nhdr"/> (indicated by the first colon) belongs to a
          previous aggregation unit. It is depicted to emphasize that
          aggregation units are octet aligned only. Similarly, the NAL unit
          carried in the aggregation unit can terminate at the octet
          boundary.</t></aside>

          <t>The DONL field, when present, specifies the value of the 16 least significant bits of the decoding order number of the aggregated NAL unit.</t>
          <t>If sprop-max-don-diff is greater than 0, the DONL field <bcp14>MUST</bcp14> be present in an aggregation unit that is the first aggregation unit in an AP. The variable DON for the aggregated NAL unit is derived as equal to the value of the DONL field, and the variable Decoding Order Number (DON) for an aggregation unit that is not the first aggregation unit in an AP-aggregated NAL unit is derived as equal to the DON of the preceding aggregated NAL unit in the same AP plus 1 modulo 65536. Otherwise (where sprop-max-don-diff is equal to 0), the DONL field <bcp14>MUST NOT</bcp14> be present in an aggregation unit that is the first aggregation unit in an AP.</t>
          <t>An aggregation unit that is not the first aggregation unit in an AP will be followed immediately by a 16-bit unsigned size information (in network byte order) that indicates the size of the NAL unit in bytes (excluding these two octets but including the NAL unit header), followed by the NAL unit itself, including its NAL unit header, as shown in <xref target="au-not-first-nhdr"/>.</t>

          <figure anchor="au-not-first-nhdr">
	    <name> The Structure of an Aggregation Unit That Is Not the First Aggregation Unit in an AP</name>
            <artwork><![CDATA[
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |               :       NALU size               |   NAL unit    |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               |
  |                                                               |
  |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                               :
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]></artwork>
          </figure>

          <aside><t>Informative note: The first octet of <xref
          target="au-not-first-nhdr"/> (indicated by the first colon) belongs
          to a previous aggregation unit. It is depicted to emphasize that
          aggregation units are octet aligned only. Similarly, the NAL unit
          carried in the aggregation unit can terminate at the octet
          boundary.</t></aside>

          <t><xref target="au-wout-donl"/> presents an example of an AP that
          contains two aggregation units, labeled "NALU 1" and "NALU 2",
          without the DONL field being present.</t>

          <figure anchor="au-wout-donl">
	    <name>An Example of an AP Packet Containing Two Aggregation Units without the DONL Field</name>
            <artwork><![CDATA[
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                          RTP Header                           |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |   PayloadHdr (Type=56)        |         NALU 1 Size           |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |          NALU 1 HDR           |                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+         NALU 1 Data           |
 |                   . . .                                       |
 |                                                               |
 +               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |  . . .        | NALU 2 Size                   | NALU 2 HDR    |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 | NALU 2 HDR    |                                               |
 +-+-+-+-+-+-+-+-+              NALU 2 Data                      |
 |                   . . .                                       |
 |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                               :...OPTIONAL RTP padding        |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]></artwork>
          </figure>

          <t><xref target="au-with-donl"/> presents an example of an AP that contains two aggregation
units, labeled "NALU 1" and "NALU 2", with the DONL field being present.</t>

          <figure anchor="au-with-donl">
	    <name>An Example of an AP Containing Two Aggregation Units with the DONL Field</name>
            <artwork><![CDATA[
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                          RTP Header                           |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |   PayloadHdr (Type=56)        |        NALU 1 DONL            |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |          NALU 1 Size          |            NALU 1 HDR         |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                                                               |
 |                 NALU 1 Data   . . .                           |
 |                                                               |
 +        . . .                  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                               :          NALU 2 Size          |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |          NALU 2 HDR           |                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+          NALU 2 Data          |
 |                                                               |
 |        . . .                  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                               :...OPTIONAL RTP padding        |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]></artwork>
          </figure>

        </section>
        <section anchor="funits">
          <name>Fragmentation Units (FUs)</name>
          <t>FUs are introduced to enable fragmenting a single NAL unit into multiple RTP packets, possibly without cooperation or knowledge of the EVC encoder.  A fragment of a NAL unit consists of an integer number of consecutive octets of that NAL unit.  Fragments of the same NAL unit <bcp14>MUST</bcp14> be sent in consecutive order with ascending RTP sequence numbers (with no other RTP packets within the same RTP stream being sent between the first and last fragment).</t>
          <t>When a NAL unit is fragmented and conveyed within FUs, it is referred to as a fragmented NAL unit.  APs <bcp14>MUST NOT</bcp14> be fragmented.  FUs <bcp14>MUST NOT</bcp14> be nested; i.e., an FU must not contain a subset of another FU.</t>
          <t>The RTP timestamp of an RTP packet carrying an FU is set to the NALU-time of the fragmented NAL unit.</t>
          <t>An FU consists of a payload header as defined in Table 4 of <xref target="EVC"/> (denoted as PayloadHdr with Type=57), an FU header of one octet, a conditional 16-bit DONL field (in network byte order), and an FU payload, as shown in <xref target="fu-payload"/>.</t>

          <figure anchor="fu-payload">
	    <name>The Structure of an FU</name>
            <artwork><![CDATA[
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |    PayloadHdr (Type=57)       |   FU header   | DONL (cond)   |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-|
 | DONL (cond)   |                                               |
 |-+-+-+-+-+-+-+-+                                               |
 |                         FU payload                            |
 |                                                               |
 |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                               :...OPTIONAL RTP padding        |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]></artwork>
          </figure>

          <t>The fields in the payload header are set as follows.  The Type field <bcp14>MUST</bcp14> be equal to 57.  The fields F, TID, Reserve, and E <bcp14>MUST</bcp14> be equal to the fields F, TID, Reserve, and E, respectively, of the fragmented NAL unit.</t>
          <t>The FU header consists of an S bit, an E bit, and a 6-bit FuType field, as shown in <xref target="fu-header"/>.</t>

          <figure anchor="fu-header">
	    <name>The Structure of FU Header</name>
            <artwork><![CDATA[
                           0 1 2 3 4 5 6 7
                          +-+-+-+-+-+-+-+-+
                          |S|E|  FuType   |
                          +---------------+]]></artwork>
          </figure>

          <t>The semantics of the FU header fields are as follows:</t>
<dl>
          <dt>S:</dt>
<dd>
<t>1 bit</t>

<t>When set to 1, the S bit indicates the start of a fragmented NAL unit, i.e., the first byte of the FU payload is also the first byte of the payload of the fragmented NAL unit.  When the FU payload is not the start of the fragmented NAL unit payload, the S bit <bcp14>MUST</bcp14> be set to 0.</t>
            </dd>
   
          <dt>E:</dt>
<dd>
<t>1 bit</t>
    
<t>When set to 1, the E bit indicates the end of a fragmented NAL unit, i.e., the last byte of the payload is also the last byte of the fragmented NAL unit.  When the FU payload is not the last fragment of a fragmented NAL unit, the E bit <bcp14>MUST</bcp14> be set to 0.</t>
            </dd>

          <dt>FuType:</dt>
<dd>
<t>6 bits</t>

              <t>The field FuType <bcp14>MUST</bcp14> be equal to the field Type of the fragmented NAL unit.</t>
            </dd>
          </dl>

          <t>The DONL field, when present, specifies the value of the 16 least significant bits of the decoding order number of the fragmented NAL unit.</t>
          <t>If sprop-max-don-diff is greater than 0 and the S bit is equal to 1, the DONL field <bcp14>MUST</bcp14> be present in the FU, and the variable DON for the fragmented NAL unit is derived as equal to the value of the DONL field.  Otherwise (where sprop-max-don-diff is equal to 0, or where the S bit is equal to 0), the DONL field <bcp14>MUST NOT</bcp14> be present in the FU.</t>
          <t>A non-fragmented NAL unit <bcp14>MUST NOT</bcp14> be transmitted in one FU; i.e., the S-bit and E-bit <bcp14>MUST NOT</bcp14> both be set to 1 in the same FU header.</t>
          <t>The FU payload consists of fragments of the payload of the fragmented NAL unit so that if the FU payloads of consecutive FUs, starting with an FU with the S bit equal to 1 and ending with an FU with the E bit equal to 1, are sequentially concatenated, the payload of the fragmented NAL unit can be reconstructed.  The NAL unit header of the fragmented NAL unit is not included as such in the FU payload. Instead, the information of the NAL unit header of the fragmented NAL unit is conveyed in F, TID, Reserve, and E fields of the FU payload headers of the FUs and the FuType field of the FU header of the FUs. An FU payload <bcp14>MUST NOT</bcp14> be empty.</t>
          <t>If an FU is lost, the receiver <bcp14>SHOULD</bcp14> discard all following fragmentation units in transmission order corresponding to the same fragmented NAL unit unless the decoder in the receiver is known to gracefully handle incomplete NAL units.</t>
          <t>A receiver in an endpoint or a MANE <bcp14>MAY</bcp14> aggregate the first n-1 fragments of a NAL unit to an (incomplete) NAL unit, even if fragment n of that NAL unit is not received. In this case, the forbidden_zero_bit of the NAL unit <bcp14>MUST</bcp14> be set to 1 to indicate a syntax violation.</t>
        </section>
      </section>
      <section anchor="DON">
        <name>Decoding Order Number</name>
        <t>For each NAL unit, the variable AbsDon is derived; it represents the
decoding order number that is indicative of the NAL unit decoding
order.</t>
        <t>Let NAL unit n be the n-th NAL unit in transmission order within an
RTP stream.</t>
        <t>If sprop-max-don-diff is equal to 0, then AbsDon[n] (the value of AbsDon for NAL unit n) is derived as equal to n.</t>
        <t>Otherwise (where sprop-max-don-diff is greater than 0), AbsDon[n] is derived as follows, where DON[n] is the value
of the variable DON for NAL unit n:</t>
        <ul spacing="normal">
          <li>If n is equal to 0 (i.e., NAL unit n is the very first NAL unit
          in transmission order), AbsDon[0] is set equal to DON[0].</li>
          <li><t>Otherwise (where n is greater than 0), the following applies
          for derivation of AbsDon[n]:</t>

        <artwork><![CDATA[
If DON[n] == DON[n-1],
   AbsDon[n] = AbsDon[n-1]

If (DON[n] > DON[n-1] and DON[n] - DON[n-1] < 32768),
   AbsDon[n] = AbsDon[n-1] + DON[n] - DON[n-1]

If (DON[n] < DON[n-1] and DON[n-1] - DON[n] >= 32768),
   AbsDon[n] = AbsDon[n-1] + 65536 - DON[n-1] + DON[n]

If (DON[n] > DON[n-1] and DON[n] - DON[n-1] >= 32768),
   AbsDon[n] = AbsDon[n-1] - (DON[n-1] + 65536 - DON[n])

If (DON[n] < DON[n-1] and DON[n-1] - DON[n] < 32768),
   AbsDon[n] = AbsDon[n-1] - (DON[n-1] - DON[n])
]]></artwork></li>
	</ul>
        <t>For any two NAL units (m and n), the following applies:</t>
        <ul spacing="normal">
          <li>When AbsDon[n] is greater than AbsDon[m], the NAL unit n
          follows NAL unit m in NAL unit decoding order.</li>
          <li>When AbsDon[n] is equal to AbsDon[m], the NAL unit decoding
          order of the two NAL units can be in either order.</li>
          <li>When AbsDon[n] is less than AbsDon[m], the NAL unit n precedes
          NAL unit m in decoding order.</li>
	</ul>

	<aside><t>Informative note: When two consecutive NAL units in
	the NAL unit decoding order has different values of AbsDon, the
	absolute difference between the two AbsDon values may be greater than
	or equal to 1.</t></aside>

        <aside><t>Informative note: There are multiple reasons to allow
        the absolute difference of the values of AbsDon for two
        consecutive NAL units in the NAL unit decoding order to be greater
        than one. An increment by one is not required as at the time of
        associating values of AbsDon to NAL units, it may not be known whether
        all NAL units are to be delivered to the receiver. For example, a
        gateway might not forward VCL NAL units of higher sub-layers or some
        SEI NAL units when there is congestion in the network. In another
        example, the first intra-coded picture of a pre-encoded clip is
        transmitted in advance to ensure that it is readily available in the
        receiver. When transmitting the first intra-coded picture, the
        originator still determines how many NAL units will be encoded before
        the first intra-coded picture of the pre-encoded clip follows in
        decoding order. Thus, the values of AbsDon for the NAL units of the
        first intra-coded picture of the pre-encoded clip have to be estimated
        when they are transmitted and gaps in the values of AbsDon may
        occur.</t></aside>

      </section>
    </section>
    <section anchor="PacketizationRules">
      <name>Packetization Rules</name>
      <t>The following packetization rules apply:</t>
      <ul spacing="normal">
        <li>If sprop-max-don-diff is greater than 0, the transmission order of
        NAL units carried in the RTP stream <bcp14>MAY</bcp14> be different
        from the NAL unit decoding order. Otherwise (where sprop-max-don-diff
        equals 0), the transmission order of NAL units carried in the RTP
        stream <bcp14>MUST</bcp14> be the same as the NAL unit decoding
        order.</li>
        <li>A NAL unit of small size <bcp14>SHOULD</bcp14> be encapsulated in
        an AP together with one or more other NAL units to avoid the
        unnecessary packetization overhead for small NAL units. For example,
        non-VCL NAL units, such as access unit delimiters, parameter sets, or
        SEI NAL units, are typically small and can often be aggregated with
        VCL NAL units without violating MTU size constraints.</li>
        <li>Each non-VCL NAL unit <bcp14>SHOULD</bcp14>, when possible from an
        MTU size match viewpoint, be encapsulated in an AP with its associated
        VCL NAL unit as, typically, a non-VCL NAL unit would be meaningless
        without the associated VCL NAL unit being available.</li>
        <li>A single NAL unit packet <bcp14>MUST</bcp14> be used for carrying
        precisely one NAL unit in an RTP packet.</li>
      </ul>
    </section>
    <section anchor="DepacketizationProcess">
      <name>De-packetization Process</name>
      <t>The general concept behind de-packetization is to get the NAL units out of the RTP packets in an RTP stream and pass them to the decoder in the NAL unit decoding order.</t>
      <t>The de-packetization process is implementation dependent. Therefore, the following description should be seen as an example of a suitable implementation. Other schemes may also be used as long as the output for the same input is the same as the process described below. The output is the same when the set of output NAL units and their order are both identical. Optimizations relative to the described algorithms are possible.</t>
      <t>All normal RTP mechanisms related to buffer management apply. In particular, duplicated or outdated RTP packets (as indicated by the RTP sequence number and the RTP timestamp) are removed. To determine the exact time for decoding, factors such as a possible intentional delay to allow for proper inter-stream synchronization must be considered.</t>
      <t>NAL units with NAL unit type values in the range of 0 to 55, inclusive, may be passed to the decoder. NAL-unit-like structures with NAL unit type values in the range of 56 to 62, inclusive, <bcp14>MUST NOT</bcp14> be passed to the decoder.</t>
      <t>The receiver includes a receiver buffer, which is used to compensate for transmission delay jitter within individual RTP streams and to reorder NAL units from transmission order to the NAL unit decoding order. In this section, the receiver operation is described under the assumption that there is no transmission delay jitter within an RTP stream. To clarify the distinction from a practical receiver buffer, which is also used to compensate for transmission delay jitter, the buffer in this section will henceforth be referred to as the "de-packetization" buffer. Receivers should also prepare for transmission delay jitter; that is, either reserve separate buffers for transmission delay jitter buffering and de-packetization buffering, or use a receiver buffer for both transmission delay jitter and de-packetization. Moreover, receivers should take transmission delay jitter into account in the buffering operation, e.g., by additional initial buffering before starting decoding and playback.</t>
      <t>The de-packetization process extracts the NAL units from the RTP packets in an RTP stream as follows. When an RTP packet carries a single NAL unit packet, the payload of the RTP packet is extracted as a single NAL unit, excluding the DONL field, i.e., third and fourth bytes, when sprop-max-don-diff is greater than 0. When an RTP packet carries an AP, several NAL units are extracted from the payload of the RTP packet. In this case, each NAL unit corresponds to the part of the payload of each aggregation unit that follows the NALU size field, as described in <xref target="aps"/>. When an RTP packet carries a Fragmentation Unit (FU), all RTP packets from the first FU (with the S field equal to 1) of the fragmented NAL unit up to the last FU (with the E field equal to 1) of the fragmented NAL unit are collected. The NAL unit is extracted from these RTP packets by concatenating all FU payloads in the same order as the corresponding RTP packets and appending the NAL unit header with the fields F and TID set to equal the values of the fields F and TID in the payload header of the FUs, respectively, and with the NAL unit type set equal to the value of the field FuType in the FU header of the FUs, as described in <xref target="funits"/>.</t>
      <t>When sprop-max-don-diff is equal to 0, the de-packetization buffer size is zero bytes, and the NAL units carried in the single RTP stream are directly passed to the decoder in their transmission order, which is identical to their decoding order.</t>
      <t>When sprop-max-don-diff is greater than 0, the process described in the remainder of this section applies.</t>
      <t>The receiver has two buffering states: initial buffering and buffering while playing. Initial buffering starts when the reception is initialized. After initial buffering, decoding and playback are started, and the buffering-while-playing mode is used.</t>
      <t>Regardless of the buffering state, the receiver stores incoming NAL units in reception order into the de-packetization buffer. NAL units carried in RTP packets are stored in the de-packetization buffer individually, and the value of AbsDon is calculated and stored for each NAL unit.</t>
      <t>Initial buffering lasts until the difference between the greatest and smallest AbsDon values of the NAL units in the de-packetization buffer is greater than or equal to the value of sprop-max-don-diff.</t>
      <t>After initial buffering, whenever the difference between the greatest and smallest AbsDon values of the NAL units in the de-packetization buffer is greater than or equal to the value of sprop-max-don-diff, the following operation is repeatedly applied until this difference is smaller than sprop-max-don-diff:</t>
<t indent="3">The NAL unit in the de-packetization buffer with the smallest value of AbsDon is removed from the de-packetization buffer and passed to the decoder.</t>
      <t>When no more NAL units are flowing into the de-packetization buffer, all NAL units remaining in the de-packetization buffer are removed from the buffer and passed to the decoder in the order of increasing AbsDon values.</t>
</section>
    <section anchor="PayloadFormatParameters">
      <name>Payload Format Parameters</name>
      <t>This section specifies the optional parameters. A mapping of the parameters with the Session Description Protocol (SDP) <xref target="RFC8866"/> is also provided for applications that use SDP.</t>
      <t>Parameters starting with the string "sprop" for stream properties can be used by a sender to provide a receiver with the properties of the stream that is or will be sent. The media sender (and not the receiver) selects whether, and with what values, "sprop" parameters are being sent. This uncommon characteristic of the "sprop" parameters may not be intuitive in the context of some signaling protocol concepts, especially with Offer/Answer.  Please see <xref target="sdpoa"/> for guidance specific to the use of sprop parameters in the Offer/Answer case.</t>

<section anchor="oparams">
        <name>Media Type Registration</name>
        <t>The receiver <bcp14>MUST</bcp14> ignore any parameter unspecified
        in this document.</t>
	<dl spacing="normal" newline="false">
          <dt>Type name:</dt><dd>video</dd>
          <dt>Subtype name:</dt><dd>evc</dd>
          <dt>Required parameters:</dt><dd>N/A</dd>
          <dt>Optional parameters:</dt><dd>profile-id, level-id, toolset-id,
          max-recv-level-id, sprop-sps, sprop-pps, sprop-sei,
          sprop-max-don-diff, sprop-depack-buf-bytes, depack-buf-cap (refer to
          <xref target="optionalParameters"/> for definitions)</dd>
          <dt>Encoding considerations:</dt> <dd>This type is only defined for
          transfer via RTP <xref target="RFC3550" format="default"/>.</dd>
          <dt>Security considerations:</dt> <dd>See <xref target="Security"/>
          of RFC 9584.</dd>
          <dt>Interoperability considerations:</dt><dd>N/A</dd>
          <dt>Published specification:</dt> <dd>Please refer to RFC 9584 and
          EVC standard <xref target="EVC"/>.</dd>
          <dt>Applications that use this media type:</dt> <dd>Any application
          that relies on EVC-based video services over RTP</dd>
          <dt>Fragment identifier considerations:</dt><dd>N/A</dd>
          <dt>Additional information:</dt><dd>N/A</dd> 
	  <dt>Person &amp; email address to contact for further
	  information:</dt> <dd><br/>Stephan Wenger (stewe@stewe.org)</dd>
          <dt>Intended usage:</dt><dd>COMMON</dd>
          <dt>Restrictions on usage:</dt><dd>N/A</dd>
          <dt>Author:</dt><dd>See Authors' Addresses section of RFC 9584.</dd>
          <dt>Change controller:</dt> <dd>IETF &lt;avtcore@ietf.org&gt;</dd>
	</dl>
      </section>
      <section anchor="optionalParameters">
        <name>Optional Parameters Definition</name>
	<dl newline="true">
        <dt>profile-id, level-id, toolset-id:</dt>
          <dd><t>These parameters indicate the profile, the level, and
          constraints of the bitstream carried by the RTP stream or a
          specific set of the profile, the level, and constraints the receiver
          supports.</t>
          <t>More specifications of these parameters, including how they
          relate to syntax elements specified in <xref target="EVC"/> are
          provided below.</t>
          </dd>
    
        <dt>profile-id:</dt>
           <dd><t>When profile-id is not present, a value of 0 (i.e., the
           Baseline profile) <bcp14>MUST</bcp14> be inferred.</t>
           <t>When used to indicate properties of a bitstream, profile-id
           <bcp14>MUST</bcp14> be derived from the profile_idc in the SPS.</t>
           <t>EVC bitstreams transported over RTP using the technologies of
           this document <bcp14>SHOULD</bcp14> refer only to SPSs that have
           the same value in profile_idc, unless the sender has a priori
           knowledge that a receiver can correctly decode the EVC bitstream
           with different profile_idc values (for example, in walled garden
           scenarios).  As exceptions to this rule, if the receiver is known
           to support a Baseline profile, a bitstream could safely end with CVS
           referring to an SPS wherein profile_idc indicates the Baseline
           Still picture profile.  A similar exception can be made for Main
           profile and Main Still picture profile.</t>
          </dd>
  
        <dt>level-id:</dt>
           <dd><t>When level-id is not present, a value of 90 (corresponding
           to level 3, which allows for approximately standard-definition
           television (SD TV) resolution and frame rates; see Annex A of <xref
           target="EVC"/>) <bcp14>MUST</bcp14> be inferred.</t>
           <t>When used to indicate properties of a bitstream, level-id
           <bcp14>MUST</bcp14> be derived from the level_idc in the SPS.</t>
           <t>If the level-id parameter is used for capability exchange, the
           following applies. If max-recv-level-id is not present, the default
           level defined by level-id indicates the highest level the codec
           wishes to support. Otherwise, max-recv-level-id indicates the
           highest level the codec supports for receiving. For either
           receiving or sending, all levels that are lower than the highest
           level supported <bcp14>MUST</bcp14> also be supported.</t>
          </dd>
    
        <dt>toolset-id:</dt>
	<dd>This parameter is a base64-encoding representation (<xref
	target="RFC4648" section="4" sectionFormat="of"/>) of a 64-bit
	unsigned integer bit mask derived from the concatenation, in network
	byte order, of the syntax elements toolset_idc_h and toolset_idc_l.
	When used to indicate properties of a bitstream, its value
	<bcp14>MUST</bcp14> be derived from toolset_idh_h and toolset_idc_l in
	the sequence parameter set.</dd>
    
        <dt>max-recv-level-id:</dt>
        <dd><t>This parameter <bcp14>MAY</bcp14> be used to indicate the
        highest level a receiver supports.</t>
        <t>The value of max-recv-level-id <bcp14>MUST</bcp14> be in the range
        of 0 to 255, inclusive.</t>
        <t>When max-recv-level-id is not present, the value is inferred to be
        equal to level-id.</t>
        <t>max-recv-level-id <bcp14>MUST NOT</bcp14> be present when the
        highest level the receiver supports is not higher than the default
        level.</t></dd>
	
        <dt>sprop-sps:</dt>
	<dd><t>This parameter <bcp14>MAY</bcp14> be used to convey sequence
	parameter set NAL units of the bitstream for out-of-band transmission
	of sequence parameter sets.  The value of the parameter is a
	comma-separated (',') list of base64-encoding representations (<xref
	target="RFC4648" section="4" sectionFormat="of"/>) of the sequence
	parameter set NAL units as specified in Section 7.3.2.1 of <xref
	target="EVC"/>.</t>
	</dd>

        <dt>sprop-pps:</dt>
	<dd><t>This parameter <bcp14>MAY</bcp14> be used to convey picture
	parameter set NAL units of the bitstream for out-of-band transmission
	of picture parameter sets.  The value of the parameter is a
	comma-separated (',') list of base64-encoding representations (<xref
	target="RFC4648" section="4" sectionFormat="of"/>) of the picture
	parameter set NAL units as specified in Section 7.3.2.2 of <xref
	target="EVC"/>.</t></dd>
    
        <dt>sprop-sei:</dt>
	<dd><t>This parameter <bcp14>MAY</bcp14> be used to convey one or more
	SEI messages that describe bitstream characteristics.  When present, a
	decoder can rely on the bitstream characteristics that are described
	in the SEI messages for the entire duration of the session,
	independently from the persistence scopes of the SEI messages as
	specified in <xref target="VSEI"/>.</t>
	<t>The value of the parameter is a comma-separated (',') list of
	base64-encoding representations (<xref target="RFC4648" section="4"
	sectionFormat="of"/>) of SEI NAL units as specified in
	<xref target="VSEI"/>.</t>  
              <aside><t>Informative note: Intentionally, no list of
              applicable or inapplicable SEI messages is specified here.
              Conveying certain SEI messages in sprop-sei may be sensible in
              some application scenarios and meaningless in others.  However,
              a couple of examples are described below.</t>
              <ol type="1">
                <li>In an environment where the bitstream was created from
                film-based source material, and no splicing is going to occur
                during the lifetime of the session, the film grain
                characteristics SEI message is likely meaningful; and sending
                it in sprop-sei rather than in the bitstream at each entry
                point may help with saving bits and allow one to configure
                the renderer only once, avoiding unwanted artifacts.</li>
                <li>Examples for SEI messages that would be meaningless to be
                conveyed in sprop-sei include the decoded picture hash SEI
                message (it is close to impossible that all decoded pictures
                have the same hashtag) or the filler payload SEI message (as
                there is no point in just having more bits in SDP).</li>
              </ol></aside>
            </dd>

        <dt>sprop-max-don-diff:</dt>

           <dd><t>If there is no NAL unit naluA that is followed in transmission order by any NAL unit preceding naluA in decoding order (i.e., the transmission order of the NAL units is the same as the decoding order), the value of this parameter <bcp14>MUST</bcp14> be equal to 0.</t>

            <t>Otherwise, this parameter specifies the maximum absolute difference between the decoding order number (i.e., AbsDon) values of any two NAL units naluA and naluB, where naluA follows naluB in decoding order and precedes naluB in transmission order.</t>

            <t>The value of sprop-max-don-diff <bcp14>MUST</bcp14> be an integer in the range of 0 to 32767, inclusive.</t>

            <t>When not present, the value of sprop-max-don-diff is inferred to be equal to 0.</t>
	   </dd>

           <dt>sprop-depack-buf-bytes:</dt>
	   <dd>

            <t>This parameter signals the required size of the de-packetization buffer in units of bytes.  The value of the parameter <bcp14>MUST</bcp14> be greater than or equal to the maximum buffer occupancy (in units of bytes) of the de-packetization buffer as specified in <xref target="DepacketizationProcess" format="default"/>.</t>

            <t>The value of sprop-depack-buf-bytes <bcp14>MUST</bcp14> be an integer in the range of 0 to 4294967295, inclusive.</t>

            <t>When sprop-max-don-diff is present and greater than 0, this parameter <bcp14>MUST</bcp14> be present and the value <bcp14>MUST</bcp14> be greater than 0.  When not present, the value of sprop-depack-buf-bytes is inferred to be equal to 0.</t>


            <aside><t>Informative note: The value of
            sprop-depack-buf-bytes indicates the required size of the
            de-packetization buffer only.  When network jitter can occur, an
            appropriately sized jitter buffer has to be available as
            well.</t></aside>
	   </dd>

        <dt>depack-buf-cap:</dt>
	<dd>
          <t>This parameter signals the capabilities of a receiver
          implementation and indicates the amount of de-packetization buffer
          space in units of bytes that the receiver has available for
          reconstructing the NAL unit decoding order from NAL units carried in
          the RTP stream.  A receiver is able to handle any RTP stream for
          which the value of the sprop-depack-buf-bytes parameter is smaller
          than or equal to this parameter.</t>
          <t>When not present, the value of depack-buf-cap is inferred to be
          equal to 4294967295.  The value of depack-buf-cap
          <bcp14>MUST</bcp14> be an integer in the range of 1 to 4294967295,
          inclusive.</t>

          <aside><t>Informative note: The value of depack-buf-cap indicates
          the maximum possible size of the de-packetization buffer of the
          receiver only, without allowing for network jitter. When network
          jitter occurs, an appropriately sized jitter buffer has to be
          available as well. </t></aside>
	</dd>
        </dl>
    
      </section>

      <section anchor="sdp-parameters">
        <name>SDP Parameters</name>
        <t>The receiver <bcp14>MUST</bcp14> ignore any parameter unspecified in this document.</t>


<section anchor="mapping-of-payload-type-parameters-to-sdp">
          <name>Mapping of Payload Type Parameters to SDP</name>
          <t>The media type video/evc string is mapped to fields in the Session Description Protocol (SDP) <xref target="RFC8866"/> as follows:</t>
          <ul spacing="normal">
            <li>The media name in the "m=" line of SDP <bcp14>MUST</bcp14>
            be video.</li>
            <li>The encoding name in the "a=rtpmap" line of SDP
            <bcp14>MUST</bcp14> be evc (the media subtype).</li>
            <li>The clock rate in the "a=rtpmap" line <bcp14>MUST</bcp14> be
            90000.</li>

            <li>The <bcp14>OPTIONAL</bcp14> parameters profile-id, level-id,
            toolset-id, max-recv-level-id, sprop-max-don-diff,
            sprop-depack-buf-bytes, and depack-buf-cap, when present,
            <bcp14>MUST</bcp14> be included in the "a=fmtp" line of SDP. The
            "a=fmtp" line is expressed as a media type string, in the form of a
            semicolon-separated list of parameter=value pairs.</li>
            <li>The <bcp14>OPTIONAL</bcp14> parameters sprop-sps, sprop-pps,
            and sprop-sei, when present, <bcp14>MUST</bcp14> be included in
            the "a=fmtp" line of SDP or conveyed using the "fmtp" source
            attribute as specified in <xref target="RFC5576"
            sectionFormat="of" section="6.3"/>. For a particular media format
            (i.e., RTP payload type), sprop-sps, sprop-pps, or sprop-sei
            <bcp14>MUST NOT</bcp14> be both included in the "a=fmtp" line of
            SDP and conveyed using the "fmtp" source attribute. When included
            in the "a=fmtp" line of SDP, those parameters are expressed as a
            media type string, in the form of a semicolon-separated list
            of parameter=value pairs. When conveyed in the "a=fmtp" line of
            SDP for a particular payload type, the parameters sprop-sps,
            sprop-pps, and sprop-sei <bcp14>MUST</bcp14> be applied to each
            SSRC with the payload type. When conveyed using the "fmtp" source
            attribute, these parameters are only associated with the given
            source and payload type as parts of the "fmtp" source
            attribute.</li>
          </ul>
          <aside><t>Informative note: Conveyance of sprop-sps and sprop-pps
          using the "fmtp" source attribute allows for out-of-band transport
          of parameter sets in topologies like Topo-Video-switch-MCU, as
          specified in <xref target="RFC7667"/>.</t></aside>

          <t>A general usage of media representation in SDP is as follows:</t>

<artwork><![CDATA[
m=video 49170 RTP/AVP 98
a=rtpmap:98 evc/90000
a=fmtp:98 profile-id=1;
  sprop-sps=<sequence parameter set data>;
  sprop-pps=<picture parameter set data>;
]]></artwork>

          <t>A SIP Offer/Answer exchange wherein both parties are expected to
          both send and receive could look like the following. Only the media
          codec-specific parts of the SDP are shown.</t>

<artwork><![CDATA[
Offerer->Answerer:
      m=video 49170 RTP/AVP 98
      a=rtpmap:98 evc/90000
      a=fmtp:98 profile-id=1; level_id=90;
]]></artwork>

          <t>The above represents an offer for symmetric video communication
          using <xref target="EVC"/> and its payload specification at the main
          profile and level 3.  Informally speaking, this offer tells the
          receiver of the offer that the sender is willing to receive up to
          xKpxx resolution at the maximum bitrates specified in <xref
          target="EVC"/>. At the same time, if this offer were accepted "as
          is", the offer can expect that the Answerer would be able to receive
          and properly decode EVC media up to and including level 3.</t>

          <artwork><![CDATA[
Answerer->Offerer:
      m=video 49170 RTP/AVP 98
      a=rtpmap:98 evc/90000
      a=fmtp:98 profile-id=1; level_id=60
]]></artwork>

          <aside><t>Informative note: level_id shall be set equal to a
          value of 30 times the level number specified in Table A.1 of
          <xref target="EVC"/>.</t></aside>

          <t>With this answer to the offer above, the system receiving the
          offer advises the Offerer that it is incapable of handling evc at
          level 3 but is capable of decoding level 2. As EVC video codecs
          must support decoding at all levels below the maximum level they
          implement, the resulting user experience would likely be that both
          systems send video at level 2. However, nothing prevents an encoder
          from further downgrading its sending to, for example, level 1 if it
          were short of cycles or bandwidth or for other reasons.</t>
	</section>
        <section anchor="sdpoa">
          <name>Usage with SDP Offer/Answer Model</name>
          <t>This section describes the negotiation of unicast messages using the Offer/Answer model described in <xref target="RFC3264"/> and its updates.</t>
          <t>This section applies to all profiles defined in <xref target="EVC"/>, specifically to Baseline, Main, and the associated still image profiles.</t>
          <t>The following limitations and rules pertaining to the media configuration apply:</t>
          <t>The parameters identifying a media format configuration for EVC are profile-id and level-id. Profile_id <bcp14>MUST</bcp14> be used symmetrically.</t>

          <t>The Answerer <bcp14>MUST</bcp14> structure its answer according to one of the following two options:</t>
          <ul spacing="normal">
            <li>maintain all configuration parameters with the values
            remaining the same as in the offer for the media format (payload
            type), with the exception that the value of level-id is changeable
            as long as the highest level indicated by the answer is not higher
            than that indicated by the offer; or</li>
            <li>remove the media format (payload type) completely (when one or
            more of the parameter values are not supported).</li>
          </ul>

          <aside><t>Informative note: The above requirement for symmetric use does not apply for level-id and does not apply for the other bitstream or RTP stream properties and capability parameters, as described in <xref target="formatconfig"/> ("Payload Format Configuration").</t></aside>
          <t>To simplify handling and matching of these configurations, the same RTP payload type number used in the offer <bcp14>SHOULD</bcp14> also be used in the answer, as specified in <xref target="RFC3264"/>.</t>
          <t>The answer <bcp14>MUST NOT</bcp14> contain a payload type number used in the offer for the media subtype unless the configuration is the same as in the offer or the configuration in the answer only differs from that in the offer with a different value of level-id.</t>

<section anchor="formatconfig">
            <name>Payload Format Configuration</name>
            <t>The following limitations and rules pertain to the configuration of the payload format buffer management.</t>
	    <ul spacing="normal">
              <li><t>The parameters sprop-max-don-diff and sprop-depack-buf-bytes describe the properties of an RTP stream that the Offerer or the Answerer is sending for the media format configuration. This differs from the normal usage of the Offer/Answer parameters; normally, such parameters declare the properties of the bitstream or RTP stream that the Offerer or the Answerer is able to receive. When dealing with EVC, the Offerer assumes that the Answerer will be able to receive media encoded using the configuration being offered.</t></li>
	    </ul>
            <aside><t>Informative note: The above parameters apply for any RTP stream, when present, sent by a declaring entity with the same configuration. In other words, the applicability of the above parameters to RTP streams depends on the source endpoint. Rather than being bound to the payload type, the values may have to be applied to another payload type when being sent, as they apply for the configuration.</t></aside>
	    <ul spacing="normal">
              <li><t>When an Offerer offers an interleaved stream, indicated
              by the presence of sprop-max-don-diff with a value larger than
              zero, the Offerer <bcp14>MUST</bcp14> include the size of the
              de-packetization buffer sprop-depack-buf-bytes.</t></li>
              <li><t>To enable the Offerer and Answerer to inform each other
              about their capabilities for de-packetization buffering in
              receiving RTP streams, both parties are
              <bcp14>RECOMMENDED</bcp14> to include depack-buf-cap.</t></li>
              <li><t>The parameters sprop-sps or sprop-pps, when present
              (included in the "a=fmtp" line of SDP or conveyed using the
              "fmtp" source attribute, as specified in <xref target="RFC5576"
              sectionFormat="of" section="6.3"/>), are used for out-of-band
              transport of the parameter sets (SPS or PPS, respectively).  The
              Answerer <bcp14>MAY</bcp14> use either out-of-band or in-band
              transport of parameter sets for the bitstream it is sending,
              regardless of whether out-of-band parameter sets transport has
              been used in the Offerer-to-Answerer direction. Parameter sets
              included in an answer are independent of those parameter sets
              included in the offer, as they are used for decoding two
              different bitstreams: one from the Answerer to the Offerer, and
              the other in the opposite direction. In case some RTP packets
              are sent before the SDP Offer/Answer settles down, in-band
              parameter sets <bcp14>MUST</bcp14> be used for those RTP stream
              parts sent before the SDP Offer/Answer.</t></li>
              <li><t>The following rules apply to transport of parameter sets
              in the Offerer-to-Answerer direction.</t>
	      <ul spacing="normal">
		<li><t>An offer <bcp14>MAY</bcp14> include sprop-sps and/or
		sprop-pps. If none of these parameters are present in the
		offer, then only in-band transport of parameter sets is
		used.</t></li>
		<li><t>If the level to use in the Offerer-to-Answerer
		direction is equal to the default level in the offer, the
		Answerer <bcp14>MUST</bcp14> be prepared to use the parameter
		sets included in sprop-sps and sprop-pps (either included in
		the "a=fmtp" line of SDP or conveyed using the "fmtp" source
		attribute) for decoding the incoming bitstream, e.g., by
		passing these parameter set NAL units to the video decoder
		before passing any NAL units carried in the RTP
		streams. Otherwise, the Answerer <bcp14>MUST</bcp14> ignore
		sprop-vps, sprop-sps, and sprop-pps (either included in the
		"a=fmtp" line of SDP or conveyed using the "fmtp" source
		attribute), and the Offerer <bcp14>MUST</bcp14> transmit
		parameter sets in-band.</t></li>
	      </ul></li>
            <li><t>The following rules apply to transport of parameter sets in
            the Answerer-to-Offerer direction.</t>
	    <ul spacing="normal">
              <li><t>An answer <bcp14>MAY</bcp14> include sprop-sps and/or
              sprop-pps. If none of these parameters are present in the
              answer, then only in-band transport of parameter sets is
              used.</t></li>
              <li><t>The Offerer <bcp14>MUST</bcp14> be prepared to use the
              parameter sets included in sprop-sps and sprop-pps (either
              included in the "a=fmtp" line of SDP or conveyed using the
              "fmtp" source attribute) for decoding the incoming bitstream,
              e.g., by passing these parameter set NAL units to the video
              decoder before passing any NAL units carried in the RTP
              streams.</t></li>
	    </ul></li>
            <li><t>When sprop-sps and/or sprop-pps are conveyed using the
            "fmtp" source attribute, as specified in <xref target="RFC5576"
            sectionFormat="of" section="6.3"/>, the receiver of the parameters
            <bcp14>MUST</bcp14> store the parameter sets included in sprop-sps
            and/or sprop-pps and associate them with the source given as part
            of the "fmtp" source attribute. Parameter sets associated with one
            source (given as part of the "fmtp" source attribute)
            <bcp14>MUST</bcp14> only be used to decode NAL units conveyed in
            RTP packets from the same source (given as part of the "fmtp"
            source attribute). When this mechanism is in use, SSRC collision
            detection and resolution <bcp14>MUST</bcp14> be performed as
            specified in <xref target="RFC5576"/>.</t></li>
	  </ul>
            <t><xref target="params-interpretation"/> lists the interpretation of all the parameters that <bcp14>MAY</bcp14> be used for the various combinations of offer, answer, and direction attributes.</t>

            <figure anchor="params-interpretation">
	      <name>Interpretation of Parameters for Various Combinations of
	      Offers, Answers, and Direction Attributes</name>
              <artwork><![CDATA[
                                 sendonly --+
                              recvonly --+  |
                           sendrecv --+  |  |
                                      |  |  |
   profile-id                         C  C  P
   level-id                           D  D  P
   toolset-id                         C  C  P
   max-recv-level-id                  R  R  -
   sprop-max-don-diff                 P  -  P
   sprop-depack-buf-bytes             P  -  P
   depack-buf-cap                     R  R  -
   sprop-sei                          P  -  P
   sprop-sps                          P  -  P
   sprop-pps                          P  -  P


Legend:

 C: configuration for sending and receiving bitstreams
 D: changeable configuration; same as C, except possible to 
    answer with a different but consistent value (see the semantics 
    of the level-id parameter on these parameters being 
    consistent -- basically, level down-grading is allowed)

 P: properties of the bitstream to be sent
 R: receiver capabilities
 -: not usable; when present MUST be ignored]]></artwork>
            </figure>

            <t>Parameters used for declaring receiver capabilities are, in general, downgradable, i.e., they express the upper limit for a sender's possible behavior. Thus, a sender <bcp14>MAY</bcp14> select to set its encoder using only lower/lesser or equal values of these parameters.</t>
            <t>When a sender's capabilities are declared with the configuration parameters, these parameters express a configuration that is acceptable for the sender to receive bitstreams. In order to achieve high interoperability levels, it is often advisable to offer multiple alternative configurations. It is impossible to offer multiple configurations in a single payload type. Thus, when multiple configuration offers are made, each offer requires its own RTP payload type associated with the offer.</t>
            <t>An implementation <bcp14>SHOULD</bcp14> be able to understand all media type parameters (including all optional media type parameters), even if it doesn't support the functionality related to the parameter. This, in conjunction with proper application logic in the implementation, allows the implementation, after having received an offer, to create an answer by potentially downgrading one or more of the optional parameters to the point where the implementation can cope. This leads to higher chances of interoperability beyond the most basic interop points (for which, as described above, no optional parameters are necessary).</t>
            <aside><t>Informative note: In implementations of various H.26x video coding payload formats including those for <xref target="AVC"/> and <xref target="HEVC"/>, it was occasionally observed that implementations were incapable of parsing most (or all) of the optional parameters and hence rejected offers other than the most basic offers. As a result, the Offer/Answer exchange resulted in a baseline performance (using the default values for the optional parameters) with the resulting suboptimal user experience. However, there are valid reasons to forego the implementation complexity of implementing the parsing of some or all of the optional parameters, for example, when there is predetermined knowledge, not negotiated by an SDP-based Offer/Answer process, of the capabilities of the involved systems (walled gardens, baseline requirements defined in application standards higher up in the stack, and similar).</t></aside>
            <t>An Answerer <bcp14>MAY</bcp14> extend the offer with additional media format configurations. However, to enable their usage, in most cases, a second offer is required from the Offerer to provide the bitstream property parameters that the media sender will use. This also has the effect that the Offerer has to be able to receive this media format configuration, and not only to send it.</t>
          </section>
        </section>
        <section anchor="multicast">
          <name>Multicast</name>
          <t>For bitstreams being delivered over multicast, the following rules apply:</t>
	  <ul spacing="normal">
            <li><t>The media format configuration is identified by profile-id
            and level-id. These media format configuration parameters,
            including level-id, <bcp14>MUST</bcp14> be used symmetrically;
            that is, the Answerer <bcp14>MUST</bcp14> either maintain all
            configuration parameters or remove the media format (payload type)
            completely. Note that this implies that the level-id for
            Offer/Answer in multicast is not changeable.</t></li>
            <li><t>To simplify the handling and matching of these
            configurations, the same RTP payload type number used in the offer
            <bcp14>SHOULD</bcp14> also be used in the answer, as specified in
            <xref target="RFC3264"/>. An answer <bcp14>MUST NOT</bcp14>
            contain a payload type number used in the offer unless the
            configuration is the same as in the offer.</t></li>
            <li><t>Parameter sets received <bcp14>MUST</bcp14> be associated
            with the originating source and <bcp14>MUST</bcp14> only be used
            in decoding the incoming bitstream from the same source.</t></li>
            <li><t>The rules for other parameters are the same as above for
            unicast as long as the three above rules are obeyed.</t></li>
	  </ul>
        </section>
        <section anchor="declativeSessiondesc">
          <name>Usage in Declarative Session Descriptions</name>
          <t>When EVC over RTP is offered with SDP in a declarative style, as in the Real-Time Streaming Protocol (RTSP) <xref target="RFC7826"/> or Session Announcement Protocol (SAP) <xref target="RFC2974"/>, the following considerations apply.</t>
	  <ul spacing="normal">
            <li><t>All parameters capable of indicating both bitstream properties and receiver capabilities are used to indicate only bitstream properties. For example, in this case, the parameters profile-id and level-id declare the values used by the bitstream, not the capabilities for receiving bitstreams. As a result, the following interpretation of the parameters <bcp14>MUST</bcp14> be used:</t>

<ul><li>
          <t>Declaring actual configuration or bitstream properties:</t>
<ul spacing="compact"><li><t>profile-id</t></li>
<li><t>level-id</t></li>
<li><t>sprop-sps</t></li>
<li><t>sprop-pps</t></li>
<li><t>sprop-max-don-diff</t></li>
<li><t>sprop-depack-buf-bytes</t></li>
<li><t>sprop-sei</t></li></ul></li>
<li>
         <t>Not usable (when present, they <bcp14>MUST</bcp14> be ignored):</t>
<ul spacing="compact"><li>
          <t>depack-buf-cap</t></li>
<li><t>recv-sublayer-id</t></li>
</ul>
</li>
<li>          <t>A receiver of the SDP is required to support all parameters and values of the parameters provided; otherwise, the receiver <bcp14>MUST</bcp14> reject (RTSP) or not participate in (SAP) the session. It falls on the creator of the session to use values that are expected to be supported by the receiving application.</t></li>
</ul>
	    </li>
	  </ul>
        </section>
        <section anchor="consider4pps">
          <name>Considerations for Parameter Sets</name>
          <t>When out-of-band transport of parameter sets is used, parameter sets <bcp14>MAY</bcp14> still be additionally transported in-band unless explicitly disallowed by an application, and some of these additional parameter sets may update some of the out-of-band transported parameter sets. An update of a parameter set refers to the sending of a parameter set of the same type using the same parameter set ID but with different values for at least one other parameter of the parameter set.</t>

</section>
      </section>
    </section>
    <section anchor="FeedbackMessage">
      <name>Use with Feedback Messages</name>

      <t>The following subsections define the use of the Picture Loss Indication (PLI) <xref target="RFC4585" format="default"/> and Full Intra Request (FIR) <xref target="RFC5104" format="default"/> feedback messages with <xref target="EVC"/>.</t>
      <t>In accordance with this document, a sender <bcp14>MUST NOT</bcp14> send Slice Loss Indication (SLI) or Reference Picture Selection Indication (RPSI); and a receiver <bcp14>MUST</bcp14> ignore RPSI and <bcp14>MUST</bcp14> treat a received SLI as a received PLI, ignoring the "First", "Number", and "PictureID" fields of the PLI.</t>

      <section anchor="PLI">
        <name>Picture Loss Indication (PLI)</name>
        <t>As specified in <xref target="RFC4585" sectionFormat="of" section="6.3.1"/>, the reception of a PLI by a media sender indicates "the loss of an undefined amount of coded video data belonging to one or more pictures". Without having any specific knowledge of the setup of the bitstream (such as use and location of in-band parameter sets, IDR picture locations, picture structures, and so forth), a reaction to the reception of a PLI by an EVC sender <bcp14>SHOULD</bcp14> be to send an IDR picture and relevant parameter sets, potentially with sufficient redundancy so as to ensure correct reception. However, sometimes information about the bitstream structure is known. For example, such information can be parameter sets that have been conveyed out of band through mechanisms not defined in this document and that are known to stay static for the duration of the session. In that case, it is obviously unnecessary to send them in-band as a result of the reception of a PLI. Other examples could be devised based on a priori knowledge of different aspects of the bitstream structure. In all cases, the timing and congestion-control mechanisms of <xref target="RFC4585"/> <bcp14>MUST</bcp14> be observed.</t>


</section>
      <section anchor="FIR">
        <name>Full Intra Request (FIR)</name>
        <t>The purpose of the FIR message is to force an encoder to send an independent decoder refresh point as soon as possible while observing applicable congestion-control-related constraints, such as those set out in <xref target="RFC8082"/>.</t>
        <t>Upon reception of a FIR, a sender <bcp14>MUST</bcp14> send an IDR picture. Parameter sets <bcp14>MUST</bcp14> also be sent, except when there is a priori knowledge that the parameter sets have been correctly established. A typical example for that is an understanding between the sender and receiver, established by means outside this document, that parameter sets are exclusively sent out of band.</t>
      </section>
    </section>
    <section anchor="Security">
      <name>Security Considerations</name>
      <t>The scope of this section is limited to the payload format itself and to one feature of <xref target="EVC"/> that may pose a particularly serious security risk if implemented naively. The payload format, in isolation, does not form a complete system. Implementers are advised to read and understand relevant security-related documents, especially those pertaining to RTP (see the Security Considerations in <xref target="RFC3550" sectionFormat="of" section="14"/>) and the security of the call-control stack chosen (that may make use of the media type registration of this document). Implementers should also consider known security vulnerabilities of video coding and decoding implementations in general and avoid those.</t>
      <t>Within this RTP payload format, and with the exception of the user data SEI message as described below, no security threats other than those common to RTP payload formats are known. In other words, neither the various media-plane-based mechanisms nor the signaling part of this document seem to pose a security risk beyond those common to all RTP-based systems.</t>
      <t>RTP packets using the payload format defined in this specification are subject to the security considerations discussed in the RTP specification <xref target="RFC3550"/> and in any applicable RTP profile such as RTP/AVP <xref target="RFC3551"/>, RTP/AVPF <xref target="RFC4585"/>, RTP/SAVP <xref target="RFC3711"/>, or RTP/SAVPF <xref target="RFC5124"/>.  However, as "Securing the RTP Framework: Why RTP Does Not Mandate a Single Media Security Solution" <xref target="RFC7202" format="default"/> discusses, it is not an RTP payload format's responsibility to discuss or mandate what solutions are used to meet the basic security goals like confidentiality, integrity, and source authenticity for RTP in general.  This responsibility lies on anyone using RTP in an application.  They can find guidance on available security mechanisms and important considerations in "Options for Securing RTP Sessions" <xref target="RFC7201" format="default"/>. Applications <bcp14>SHOULD</bcp14> use one or more appropriate strong security mechanisms.  The rest of this section discusses the security impacting properties of the payload format itself.</t>
      <t>Because the data compression used with this payload format is applied end to end, any encryption needs to be performed after compression. A potential denial-of-service threat exists for data encodings using compression techniques that have non-uniform receiver-end computational load.  The attacker can inject pathological datagrams into the bitstream that are complex to decode and that cause the receiver to be overloaded.</t>
      <t>EVC is particularly vulnerable to such attacks, as it is extremely simple to generate datagrams containing NAL units that affect the decoding process of many future NAL units. Therefore, the usage of data origin authentication and data integrity protection of at least the RTP packet is <bcp14>RECOMMENDED</bcp14> based on <xref target="RFC7202"/>.</t>
      <t>Like HEVC <xref target="RFC7798"/> and VVC <xref target="VVC"/>, EVC <xref target="EVC"/> includes a user data Supplemental Enhancement Information (SEI) message. This SEI message allows inclusion of an arbitrary bitstring into the video bitstream. Such a bitstring could include JavaScript, machine code, and other active content.</t>
      <t>EVC <xref target="EVC"/> leaves the handling of this SEI message to the receiving system. In order to avoid harmful side effects of the user data SEI message, decoder implementations cannot naively trust its content. For example, forwarding all received JavaScript code detected by a decoder implementation to a web browser unchecked would be a bad and insecure implementation practice. The safest way to deal with user data SEI messages is to simply discard them, but that can have negative side effects on the quality of experience by the user.</t>
      <t>End-to-end security with authentication, integrity, or confidentiality protection will prevent a MANE from performing media-aware operations other than discarding complete packets.  In the case of confidentiality protection, it will even be prevented from discarding packets in a media-aware way.  To be allowed to perform such operations, a MANE is required to be a trusted entity that is included in the security context establishment.</t>
    </section>
    <section anchor="CC">
      <name>Congestion Control</name>
      <t>Congestion control for RTP <bcp14>SHALL</bcp14> be used in accordance with RTP <xref target="RFC3550"/> and with any applicable RTP profile, e.g., AVP <xref target="RFC3551"/> or AVPF <xref target="RFC4585"/>. If best-effort service is being used, an additional requirement is that users of this payload format <bcp14>MUST</bcp14> monitor packet loss to ensure that the packet loss rate is within an acceptable range. Packet loss is considered acceptable if a TCP flow across the same network path and experiencing the same network conditions would achieve an average throughput, measured on a reasonable timescale, that is not less than all RTP streams combined. This condition can be satisfied by implementing congestion-control mechanisms to adapt the transmission rate by implementing the number of layers subscribed for a layered multicast session or by arranging for a receiver to leave the session if the loss rate is unacceptably high.</t>
      <t>The bitrate adaptation necessary for obeying the congestion control principle is easily achievable when real-time encoding is used, for example, by adequately tuning the quantization parameter. However, when pre-encoded content is being transmitted, bandwidth adaptation requires the pre-coded bitstream to be tailored for such adaptivity.</t>
      <t>The key mechanism available in <xref target="EVC"/> is temporal scalability. A media sender can remove NAL units belonging to higher temporal sub-layers (i.e., those NAL units with a large value of TID) until the sending bitrate drops to an acceptable range.</t>
      <t>The mechanisms mentioned above generally work within a defined profile and level; therefore, no renegotiation of the channel is required. Only when non-downgradable parameters (such as the profile) are required to be changed does it become necessary to terminate and restart the RTP streams. This may be accomplished by using different RTP payload types.</t>
      <t>MANEs <bcp14>MAY</bcp14> remove certain unusable packets from the RTP stream when that RTP stream was damaged due to previous packet losses. This can help reduce the network load in certain special cases. For example, MANEs can remove those FUs where the leading FUs belonging to the same NAL unit have been lost, because the trailing FUs are meaningless to most decoders. MANE can also remove higher temporal scalable layers if the outbound transmission (from the MANE's viewpoint) experiences congestion.</t>
    </section>
    <section anchor="iana-considerations">
      <name>IANA Considerations</name>
      <t>The media type specified in <xref target="oparams"/> has been registered with IANA.</t>
    </section>

  </middle>
  <back>
    <references>
      <name>References</name>
      <references>
        <name>Normative References</name>

        <reference anchor="EVC" target="https://www.iso.org/standard/57797.html">
          <front>
            <title>Information technology -- General video coding -- Part 1: Essential video
coding</title>
            <author>
              <organization/>
            </author>
            <date month="October" year="2020"/>
          </front>
          <seriesInfo name="ISO/IEC" value="23094-1:2020"/>
        </reference>

        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.9328.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3550.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3551.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3711.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.4585.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5124.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3264.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8866.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.4648.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5576.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5104.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8082.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7826.xml"/>

        <reference anchor="VSEI" target="https://www.itu.int/rec/T-REC-H.274">
          <front>
            <title>Versatile supplemental enhancement information messages for coded video bitstreams</title>
            <author>
              <organization>ITU-T</organization>
            </author>
            <date month="March" year="2024"/>
          </front>
	  <seriesInfo name="ITU-T Recommendation" value="H.274"/>
        </reference>

      </references>
      <references>
        <name>Informative References</name>

        <reference anchor="MPEG2S">
          <front>
            <title>Information technology - Generic coding of moving pictures and associated audio information - Part 1: Systems</title>
            <author>
              <organization>IS0/IEC</organization>
            </author>
            <date month="June" year="2013"/>
          </front>
         <seriesInfo name="ISO/IEC" value="13818-1:2013"/>
        </reference>

        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6184.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6190.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7656.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7667.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7201.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7202.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7798.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2974.xml"/>

        <reference anchor="HEVC" target="https://www.itu.int/rec/T-REC-H.265">
          <front>
            <title>High efficiency video coding</title>
            <author>
              <organization>ITU-T</organization>
            </author>
            <date month="November" year="2019"/>
          </front>
	  <seriesInfo name="ITU-T Recommendation" value="H.265"/>
        </reference>

	<reference anchor="VIDEO-CODING" target="https://www.itu.int/rec/T-REC-H.263">
	  <front>
	    <title>Video coding for low bit rate communication</title>
	    <author>
	      <organization>ITU-T</organization>
            </author>
	    <date month="January" year="2005"/>
	  </front>
	  <seriesInfo name="ITU-T Recommendation" value="H.263"/>
	</reference>

        <reference anchor="AVC" target="https://www.iso.org/standard/66069.html">
          <front>
            <title>Part 10: Advanced video coding</title>
            <author>
              <organization>ITU-T</organization>
            </author>
            <date month="October" year="2014"/>
          </front>
	  <seriesInfo name="ITU-T Recommendation" value="H.264"/>
        </reference>

        <reference anchor="VVC" target="http://www.itu.int/rec/T-REC-H.266">
          <front>
            <title>Versatile video coding</title>
            <author>
              <organization>ITU-T</organization>
            </author>
            <date month="August" year="2020"/>
          </front>
	  <seriesInfo name="ITU-T Recommendation" value="H.266"/>
        </reference>

      </references>
    </references>

    <section anchor="acknowledgements" numbered="false" toc="default">
      <name>Acknowledgements</name>
      <t>Large parts of this specification share text with the RTP payload
      format for VVC <xref target="RFC9328"/>. <contact fullname="Roman
      Chernyak"/> is thanked for his valuable review comments. We thank the
      authors of that specification for their excellent work.</t>
    </section>

  </back>
</rfc>
