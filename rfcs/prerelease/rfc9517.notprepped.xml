<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE rfc [
  <!ENTITY nbsp    "&#160;">
  <!ENTITY zwsp   "&#8203;">
  <!ENTITY nbhy   "&#8209;">
  <!ENTITY wj     "&#8288;">
]>

<rfc xmlns:xi="http://www.w3.org/2001/XInclude" submissionType="independent" category="info" docName="draft-urn-ddi-06" number="9517" ipr="trust200902" obsoletes="" updates="" xml:lang="en" symRefs="true" sortRefs="true" tocInclude="true" version="3">


	<front>
    <title abbrev="A URN Namespace">A URN Namespace for the Data Documentation Initiative (DDI)</title>
    <seriesInfo name="RFC" value="9517"/>
	<author initials="J." surname="Wackerow" fullname="Joachim Wackerow">
      <organization abbrev="DDI Alliance">c/o The Data Documentation Initiative Alliance (DDI Alliance)</organization>
      <address>
        <postal>
          <extaddr>ICPSR, University of Michigan</extaddr>
          <street>PO Box 1248</street>
          <city>Ann Arbor</city>
          <region>MI</region>
          <code>48106-1248</code>
          <country>United States of America</country>
        </postal>
        <email>joachim.wackerow@posteo.de</email>
        <email>secretariat@ddialliance.org</email>
        <uri>ddialliance.org</uri>
      </address>
    </author>
    <date year="2024" month="January"/>

    <keyword>URN resolution</keyword>

    <abstract>
      <t>This document describes the Namespace Identifier (NID) "ddi" for
      Uniform Resource Names (URNs) used to identify resources that conform to
      the standards published by the Data Documentation Initiative (DDI)
      Alliance.</t>
      <t>The DDI Alliance is not affiliated with the Internet Engineering Task
      Force (IETF) or Internet Society (ISOC).  This Independent Submission is
      not a standard nor does it have IETF community consensus.</t>
    </abstract>
  </front>
  <middle>
    <section anchor="sect-1" numbered="true" toc="default">
      <name>Introduction</name>

      <t>This document registers a formal Namespace Identifier (NID) for URNs
      associated with DDI resources in accordance with the
      process defined in <xref target="RFC8141" format="default"/>.</t>
      <t>The DDI Alliance is an international collaboration dedicated to
      establishing metadata standards and semantic products for describing
      social science data, data covering human activity, and other data based
      on observational methods. DDI specifications are free standards that 
      document and manage different stages in the research data lifecycle,
      such as conceptualization, collection, processing, distribution,
      discovery, and archiving.  Documenting data with DDI facilitates
      understanding, interpretation, and use -- by people, software systems,
      and computer networks.</t>
      <t>The specifications DDI Codebook <xref target="DDI-C"
      format="default"/> and DDI Lifecycle <xref target="DDI-L"
      format="default"/> are expressed in XML Schema; DDI Extended Knowledge
      Organization System (XKOS) <xref target="DDI-XKOS" format="default"/>
      in OWL/RDF; Structured Data Transformation Language (SDTL) <xref
      target="DDI-SDTL" format="default"/> in JSON Schema; and the upcoming
      DDI Cross Domain Integration (DDI-CDI) in UML. DDI is aligned with
      other metadata standards like Dublin Core Metadata Initiative <xref
      target="DUBLINC" format="default"/>; Statistical Data and Metadata
      Exchange <xref target="SDMX" format="default"/> for exchanging aggregate
      data; ISO/IEC 11179 <xref target="IS11179" format="default"/> for
      building metadata registries, such as question, variable, and concept
      banks; and ISO 19115 <xref target="ISO.19115.2003" format="default"/>
      for supporting geographic information systems.</t>
      <t>DDI URNs support reusability of DDI resources inside a single DDI
      instance and in a distributed network of DDI instances.</t>
      <t>The DDI specification is developed and maintained by the DDI
      Alliance <xref target="DDI-ALL" format="default"/>. The DDI Alliance is
      a self-sustaining membership organization whose over 40-member
      institutions have a voice in the development of the DDI
      specifications. This memo describing the ddi URN is an informational
      specification. It is not a standard and is not the product of the
      IETF.</t>
    </section>
    <section anchor="sect-2" numbered="true" toc="default">
      <name>Conventions Used in This Document</name>
        <t>
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>",
    "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL
    NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>",
    "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are
    to be interpreted as described in BCP&nbsp;14 <xref target="RFC2119"/>
    <xref target="RFC8174"/> when, and only when, they appear in all capitals,
    as shown here.
        </t>
      <t>
   In this document, these words will appear with that interpretation
   only when in ALL CAPS. Lowercase uses of these words are not to
   be interpreted as carrying <xref target="RFC2119" format="default"/> significance.</t>
      <dl newline="false" spacing="normal">
	<dt>DDI:</dt>
	<dd>Data Documentation Initiative. The single term is often used as a
	synonym for the DDI specification.</dd>
	<dt>DDI agency:</dt>
	<dd>An organization that maintains DDI resources.</dd>
      </dl>
    </section>
    <section anchor="sect-3" numbered="true" toc="default">
      <name>Specification</name>
      <t>This section provides the information required to register a formal
      namespace according to the registration procedure defined in <xref
      target="RFC8141" format="default"/>. The URNs conform to the syntax
      defined in <xref target="RFC8141" format="default"/>.</t>
      <section anchor="sect-3.1" numbered="true" toc="default">
        <name>Declaration of Syntactic Structure</name>
        <section anchor="sect-3.1.1" numbered="true" toc="default">
          <name>Description</name>
          <t> The
   Namespace Specific String (NSS) of all URNs using the "ddi" NID is a
   globally unique identifier consisting of the DDI agency-identifier
   (registration authority identifier), the identifier of the DDI resource
   (data identifier), and the version of the resource (version-identifier)
   <xref target="DDI-ID" format="default"/>. This structure is according to the International
   Registration Data Identifier (IRDI) defined in "Information
   technology - Metadata registries (MDR) - Part 6: Registration", Annex A
   <xref target="IS11179" format="default"/>.</t>

          <t>
   A description of the DDI resource identification is available in
   the Identification section of the "DDI Lifecycle 3.3 Technical Guide"
   <xref target="DDI-ID" format="default"/>.</t>
          <t>The DDI NSS has the following structure:</t>

          <artwork name="" type="" align="left" alt=""><![CDATA[
   <agency-identifier>:<resource-identifier>:<version-identifier>
]]></artwork>

          <t>agency-identifier is the identifier of a DDI agency that
          maintains DDI resources. This identifier basically follows the rules
          of reversed domain names and is case insensitive. This way, the DNS
          resolution of DDI agency-identifiers is supported. The hierarchy of
          domains descends from the left to the right label in the name; each
          label to the right specifies a subdivision, or subdomain, of the
          domain to the left. The left-most label of agency-identifier conveys
          the top-level domain. It <bcp14>SHALL</bcp14> be a country code
          corresponding to ISO 3166 alpa-2 codes <xref target="ISO3166"
          format="default"/> or another top-level domain maintained by IANA
          <xref target="TLD" format="default"/>. All two-letter top-level
          domains are reserved for current and future ISO 3166 codes.
          Assignment of identifiers for DDI agencies in the requested
          namespace is managed by the DDI Alliance (see <xref
          target="sect-3.5" format="default"/> on "<xref target="sect-3.5"
          format="title"/>"). The next subdomain identifies the agency within
          that top-level domain. Further optional subdomains can follow. The
          top-level domain and possible subdomains are separated by the full
          stop character. The full stop character is not allowed within
          top-level domain names or subdomain names. The top-level domain and
          subdomains are composed from the limited set of characters for the
          preferred form of a DNS label (<xref target="RFC1035"
          sectionFormat="comma" section="2.3.1"/>). The length of the label
          and the full name are restricted by DNS rules (<xref
          target="RFC2181" sectionFormat="comma" section="11"/>). The agency
          identifier is case insensitive (<xref target="RFC4343"
          sectionFormat="comma" section="2"/>).</t>
          <t>resource-identifier is the identifier of a DDI resource of a DDI
          agency. The value <bcp14>MUST</bcp14> be unique in the scope of this
          DDI agency.  The resource-identifier is case sensitive.</t>
          <t>version-identifier is the version of a DDI resource of a DDI
          agency. The value <bcp14>MUST</bcp14> be unique in the scope of this
          resource.  The resource version is case sensitive.</t>
        </section>
        <section anchor="sect-3.1.2" numbered="true" toc="default">
          <name>ABNF Grammar</name>
          <t>The following syntax specification for the complete URN uses the
          Augmented Backus-Naur form (ABNF) as described in <xref
          target="RFC5234" format="default"/>.</t>

        
<figure>
<name>ABNF Grammar</name>
          <sourcecode name="" type="abnf"><![CDATA[
; Rules are case sensitive, if not stated otherwise.
ddi-urn              = urn separator ddi separator ddi-irdi
; urn is case insensitive, see [RFC8141].
urn                  = "urn"
; ddi is the URN namespace identifier.
; ddi is case insensitive, see [RFC8141], Section 2.1.
ddi                  = "ddi"
; ddi-irdi is the namespace specific string (NSS).
; ddi-irdi - international registration data identifier,
; see [IS11179] Annex A.2.
ddi-irdi             = agency-identifier separator
                       resource-identifier separator
                       version-identifier
; agency-identifier is case insensitive, see [RFC4343], Section 2.
; For allowed characters, see [RFC1035], Section 2.3.1.
; For length restrictions, see [RFC2181], Section 11.
agency-identifier    = top-level-domain
                         sub-separator ddi-authority-id
                         *(sub-separator ddi-sub-authority-id)
                       ; length limit is 255 characters
                       ; see Section 11 of [RFC2181]
top-level-domain     = dns-label
ddi-authority-id     = dns-label
ddi-sub-authority-id = dns-label
dns-label            = (ALPHA / DIGIT)
                         [ *(ALPHA / DIGIT / "-")
                           (ALPHA / DIGIT) ]
                       ; length limit is 63 characters
                       ; see Section 11 of [RFC2181]
resource-identifier  = restricted-string
                       *("/" restricted-string)
version-identifier   = restricted-string
                       *("/" restricted-string)
restricted-string    = 1*(unreserved / sub-delims / "@")
; Definitions for unreserved and sub-delims from 
; [RFC3986], Section 2.2.
unreserved           = ALPHA / DIGIT / "-" / "." / "_" / "~"
sub-delims           = "!" / "$" / "&" / "'" / "(" / ")" /
                       "*" / "+" / "," / ";" / "="
separator            = ":"
sub-separator        = "."
; ALPHA and DIGIT are actually defined in the ABNF
; specification. They are declared here for convenience
; purposes.
ALPHA                = %x41-5A /  ; uppercase letters
                       %x61-7A    ; lowercase letters
DIGIT                = %x30-39    ; digits
]]></sourcecode>
</figure>

        </section>
        <section anchor="sect-3.1.3" numbered="true" toc="default">
          <name>Regular Expression</name>
          <t>
   The used syntax is the XML Schema flavor, which can be easily used
   in other flavors. These regular expressions implicitly anchor at
   the head and tail. The following regular expression syntax uses
   components (component names indicated by angle brackets, i.e.
   &lt;component&gt;) and is written in free-spacing mode for easier
   reading (the XML Schema flavor does not support that). Please note
   that use of multiple quantifiers in regular expressions can result
   in false outcomes due to so-called greediness. Therefore, there
   are separate regular expressions for the length restriction and
   other purposes for the components agency-identifier and dns-label.</t>

          <sourcecode name="" type=""><![CDATA[
ddi-urn              := [Uu][Rr][Nn] : [Dd][Dd][Ii] :
                          <agency-identifier> :
                          <resource-identifier> :
                          <version-identifier>
agency-identifier    := <top-level-domain> \.
                          <ddi-authority-id>
                          (\. <ddi-sub-authority-id>)*
agency-identifier    := .{1,255}

top-level-domain     := <dns-label>
ddi-authority-id     := <dns-label>

ddi-sub-authority-id := <dns-label>
dns-label            := [A-Za-z0-9]([-A-Za-z0-9]*[A-Za-z0-9])?

dns-label            := .{1,63}

resource-identifier  := <restricted-string>
                        (/ <restricted-string>)*

version-identifier   := <restricted-string>
                        (/ <restricted-string>)*

restricted-string    := [A-Za-z0-9-._~!$&'()*+,;=@]+
]]></sourcecode>
        </section>
        <section anchor="sect-3.1.4" numbered="true" toc="default">
          <name>Examples of DDI URNs</name>
          <t>
   The examples are taken from the DDI Lifecycle 3.3 documentation <xref target="DDI-ID"/>.
   Please note that the resource-identifiers are simplified. In real
   applications, they are much longer for unique identification
   purposes. They don't relate to DDI types like the examples might
   suggest.</t>

<figure>
  <name>URN of a Represented Variable</name>
          <artwork name="" type="" align="left" alt=""><![CDATA[
   urn:ddi:us.ddia1:R-V1:1
]]></artwork>
</figure>

          <t>
   The DDI represented variable identified by "R-V1" with the version
   "1" of the DDI agency "ddia1" located in the domain "us"
   <xref target="DDI-EXRV" format="default"/>.</t>

<figure>
  <name>URN of a Question Item</name>
          <artwork name="" type="" align="left" alt=""><![CDATA[
   urn:ddi:us.ddia1:PISA-QS.QI-2:1
]]></artwork>
</figure>

          <t>
   The DDI question item identified by "PISA-QS.QI-2" with the
   version "1" of the DDI agency "ddia1" located in the domain "us"
   <xref target="DDI-EXQU" format="default"/>.</t>

<figure>
  <name>URN as Reference to a Controlled Vocabulary</name>
          <artwork name="" type="" align="left" alt=""><![CDATA[
   urn:ddi:int.ddi.cv:AggregationMethod:1.0
]]></artwork>
</figure>

          <t>
   The DDI controlled vocabulary identified by "AggregationMethod"
   with the version "1.0" in the scope of the DDI agency "ddi" and
   sub-agency "cv" in the domain "int" <xref target="DDI-CVAG" format="default"/>.</t>
        </section>
      </section>
      <section anchor="sect-3.2" numbered="true" toc="default">
        <name>Relevant Ancillary Documentation</name>
        <t> An introductory article on DDI can be found at
	<xref target="DDI-INTR" format="default"/>.</t>
        <t>
   Information on the DDI specifications (DDI-C, DDI-L, XKOS,
   Controlled Vocabularies, and SDTL) can be found in the standards
   section of the DDI Alliance website <xref target="DDI-ALL" format="default"/>.</t>
        <t>
   Information on domain names can be found in the relevant RFCs.

        </t>
        <ul spacing="normal">
          <li>For an overview, see <xref target="RFC1034" format="default"/>.</li>
          <li>Regarding case insensitivity, see <xref target="RFC1035"
          sectionFormat="of" section="2.3.3"/>.</li>
          <li>Regarding syntax, see the "Lexical grammar" in the "Grammatical Host Table
          Specification" section of <xref target="RFC0952"
          format="default"/> and <xref target="RFC1123" sectionFormat="of"
          section="2.1"/>.</li>
          <li>Regarding size limits, see <xref target="RFC1123"
          sectionFormat="of" section="2.1"/> and <xref target="RFC1035"
          sectionFormat="of" section="2.3.4"/>.</li>
        </ul>
      </section>
      <section anchor="sect-3.3" numbered="true" toc="default">
        <name>Identifier Uniqueness Considerations</name>
        <t>
   Assignment of identifiers for DDI agencies in the requested
   namespace will be managed by the DDI Alliance, which will ensure
   that the assigned DDI agency-identifiers are consistent with the
   directives for unique identification of DDI agencies.</t>
        <t>
   Assignment of URNs for resources of a DDI agency in the requested
   namespace will be managed by the respective DDI agency, which
   ensures that the assigned URNs are unique for the scope of the
   agency.</t>
      </section>
      <section anchor="sect-3.4" numbered="true" toc="default">
        <name>Identifier Persistence Considerations</name>
        <t>
   Persistence of identifiers is dependent upon the suitable delegation
   of resolution at the level of the DDI agencies and the persistence of
   DDI agency assignment. The persistence of the referenced resource
   is also the responsibility of the DDI agency.</t>
      </section>
      <section anchor="sect-3.5" numbered="true" toc="default">
        <name>Process of Identifier Assignment</name>
        <t>
   Assignment of identifiers for DDI agencies in the requested
   namespace is managed by the DDI Alliance. A registry for DDI agency
   identifiers ensures through an approval process that the syntax of
   agency-identifiers complies with the associated rules <xref target="DDI-REGI" format="default"/>.</t>
        <t>
   Assignment of URNs for resources of a DDI agency and sub-agencies
   of a DDI agency in the requested namespace will be managed by the
   respective DDI agency.</t>
      </section>
      <section anchor="sect-3.6" numbered="true" toc="default">
        <name>Process for Identifier Resolution</name>
        <t>
   The DDI Alliance promotes a service discovery system for
   identifying available services connected to DDI agencies using the
   Domain Name System (DNS). A DNS request for a DDI agency within
   the domain ddi.urn.arpa is delegated by the DNS servers of the DDI
   Alliance to the DNS servers of the relevant DDI agency. The
   response is a list of available DDI services for the agency
   identifier under which the agency has assigned URNs. The approach
   is based on the Dynamic Delegation Discovery System (DDDS)
   <xref target="RFC3401" format="default"/> and especially the straightforward URI-enabled NAPTR
   (U-NAPTR) <xref target="RFC4848" format="default"/>.</t>
        <t>
   The DDI Alliance is responsible for operating or delegating
   resolution requests to the resolution servers of the relevant DDI
   agencies. DDI agencies are responsible for operating or delegating
   resolution servers for the agency-identifier under which they have
   assigned URNs.</t>

<figure>
  <name>Sample Sequence Diagram for Receiving a List of DDI Services from the
  Example DDI agency "ddia1"</name>
        <artwork name="" type="" align="left" alt=""><![CDATA[
Client  NS for    NS for           NS for        DDI services
        urn.arpa  ddialliance.org  example1.edu  for us.ddia1
  |       |            |               |              |
1 |------>|            |               |              |
2 |       |----------->|               |              |
3 |                    |-------------->|              |
4 |<-----------------------------------|              |
5 |-------------------------------------------------->|
6 |<--------------------------------------------------|
]]></artwork>
</figure>

        <ol spacing="normal" type="1">
	  <li>The name server (NS) of IANA for the domain "urn.arpa." is
	  reached with the request "ddia1.us.ddi.urn.arpa." for the DDI agency
	  "us.ddia1".</li>
	  <li>The request is delegated to the name server for
	  "ddialliance.org".</li>
	  <li>The request is delegated to the name server for "example1.edu"
	  (domain of the DDI agency "us.ddia1").</li>
	  <li>The server responds with a list of NAPTR records <xref
	  target="RFC3403" format="default"/> pointing to available DDI
	  services for the DDI agency "us.ddia1".</li>
	  <li>The client selects an appropriate DDI service and sends a
	  request for a DDI URN to this service.</li>
	  <li>The DDI service responds, for example, with a DDI object
	  identified by the requested DDI URN.</li>
        </ol>

        <t>See <xref target="sect-a" format="default"/> for examples of name
        server records.</t>
      </section>
      <section anchor="sect-3.7" numbered="true" toc="default">
        <name>Rules for Lexical Equivalence</name>
        <t>The DDI agency-identifier basically follows the rules of domain
        names. Domain names are case insensitive. Thus, the following portion of the
        URN is case insensitive for matches:</t>

        <artwork name="" type="" align="left" alt=""><![CDATA[
   urn:ddi:<agency-id>:
]]></artwork>

        <t>
The remainder of the identifier
   <bcp14>MUST</bcp14> be considered case sensitive.</t>
      </section>
      <section anchor="sect-3.8" numbered="true" toc="default">
        <name>Conformance with URN Syntax</name>
        <t>The NSS conforms to the related section in <xref target="RFC8141"
        format="default"/>. It is composed from the limited set of characters
        for a URN NSS <xref target="RFC8141"
        format="default"/>. Percent-encoding is not used.</t>
      </section>
      <section anchor="sect-3.9" numbered="true" toc="default">
        <name>Validation Mechanism</name>
        <t>
   The DDI Alliance will promote development of software for
   validation purposes.</t>
      </section>
      <section anchor="sect-3.10" numbered="true" toc="default">
        <name>Scope</name>
        <t>
   The scope is global.</t>
      </section>
    </section>
    <section anchor="sect-4" numbered="true" toc="default">
      <name>Namespace Considerations</name>
      <t>
   There is no available namespace that will allow one to uniquely
   identify and access DDI resources.</t>
      <section anchor="sect-4.1" numbered="true" toc="default">
        <name>URN Assignment Procedures</name>
        <t>See <xref target="sect-3.5" format="default"/>, "<xref target="sect-3.5" format="title"/>".</t>
      </section>
      <section anchor="sect-4.2" numbered="true" toc="default">
        <name>URN Resolution/Delegation</name>
        <t>See <xref target="sect-3.6" format="default"/>,
        "<xref target="sect-3.6" format="title"/>".</t>
        <t>It is <bcp14>RECOMMENDED</bcp14> that sub-agencies for flexible
        administration be used.  For example, delegation of URNs of a sub-agency to
        different servers would be easily possible.</t>
      </section>
      <section anchor="sect-4.3" numbered="true" toc="default">
        <name>Type of Resources To Be Identified</name>
        <t>
   The DDI specifications define resources at a granular level, many
   of which can be identified by a DDI URN.</t>
      </section>
      <section anchor="sect-4.4" numbered="true" toc="default">
        <name>Type of Services</name>
        <t>Examples of potential services are listed below. The services and
        appropriate service tags need to be defined in the future. The mentioned
        service tags are from <xref target="RFC2483"/>.</t>

        <ul spacing="normal">
          <li>
            <t>DDI repository</t>
            <dl spacing="normal" newline="false">
              <dt>I2R (URI to Resource):</dt>
	      <dd>given a DDI URN return, one instance
              of the resource identified by that URN.</dd>
            </dl>
          </li>
          <li>
            <t>DDI registry</t>
            <dl spacing="normal" newline="false">
              <dt>I2C (URI to URC, Uniform Resource Characteristics are
              descriptions of resources):</dt>
	      <dd>given a DDI URN return, a description
              or a summary of that resource.</dd>
            </dl>
          </li>
          <li>
            <t>DDI URN resolution</t>
            <dl spacing="normal">
              <dt>I2L (URI to URL):</dt>
	      <dd>given a DDI URN return, one URL that
              identifies a location where the identified DDI resource can be
              found.</dd>
              <dt>I2Ls (URI to URLs):</dt>
	      <dd>given a DDI URN return, one or more URLs
              that identify multiple locations of the identified DDI
              resource.</dd>
            </dl>
          </li>
        </ul>

      </section>
    </section>
    <section anchor="sect-5" numbered="true" toc="default">
      <name>Community Considerations</name>
      <section anchor="sect-5.1" numbered="true" toc="default">
        <name>Open Assignment and Use of Identifiers</name>
        <t>
   DDI agency-identifiers can be registered at the DDI Alliance. The
   DDI Alliance maintains a registry of the assigned values for
   the DDI agency-identifier used in the NSS. Information may be
   obtained from the following address: secretariat@ddialliance.org.</t>
        <t>
   DDI agencies assign URNs and potential sub-agencies within the
   scope of the assigned DDI agency-identifiers.</t>
        <t>
   See also <xref target="sect-3.3"/> on "<xref target="sect-3.3" format="title"/>".</t>
      </section>
      <section anchor="sect-5.2" numbered="true" toc="default">
        <name>Open Operation of Resolution Servers</name>
        <t>
   The DDI Alliance operates publicly accessible name servers for the
   delegation of DNS requests within the domain ddi.urn.arpa to DNS
   servers of DDI agencies.</t>
      </section>
      <section anchor="sect-5.3" numbered="true" toc="default">
        <name>Creation of Software for Service Discovery</name>
        <t>The DDI Alliance promotes software for service discovery for
        identifying available services connected to DDI agencies using the
        Domain Name System (DNS). See also <xref target="sect-3.6"
        format="default"/> on "<xref target="sect-3.6" format="title"/>". A
        basic resolver library is available <xref target="DDI-RESO"
        format="default"/>.</t>
      </section>
    </section>
    <section anchor="sect-6" numbered="true" toc="default">
      <name>IANA Considerations</name>
      <t>
   IANA has updated the "ddi" entry in the "Formal URN Namespaces"
   registry to reference this specification.</t>

      <t>The following NAPTR record for the key "ddi" has been registered in
      the urn.arpa zone:</t>

<artwork name="" type="" align="left" alt=""><![CDATA[
   ddi IN NAPTR 100 10 "" "" "" registry.ddialliance.org.
]]></artwork>

      <t>Requests for the domain ddi.urn.arpa are delegated to the name
      servers of the DDI Alliance.</t>
    </section>
    <section anchor="sect-7" numbered="true" toc="default">
      <name>Security Considerations</name>
      <t>
   URN:DDI identifiers are assigned to resources that are public
   information; therefore, resolving these identifiers has low
   security profile.</t>
      <t>
   Registration of DDI agencies is approved by the DDI Alliance.
   Assignment and resolution of URN:DDI identifiers are controlled by
   the DDI Alliance and approved DDI agencies. The DDI Alliance <bcp14>SHALL</bcp14>
   have in place control mechanisms in order to make sure that DDI
   Agency applications from malicious third parties will not be
   accepted. URN:DDI resolvers will be protected against
   eavesdropping and attacks with appropriate tools.</t>
      <t>
   This document introduces no additional technical security
   considerations beyond those associated with the use and resolution
   of URNs in general.</t>
      <t>
   The security of the DNS-based resolution of DDI agency-identifiers is only
   as good as the security of DNS queries in general. A full discussion of the
   security threats pertaining to DNS and possible solutions can be found in
   <xref target="RFC3833" format="default"/>. Further information on security
   considerations regarding U-NAPTR can be found in <xref target="RFC4848"
   sectionFormat="comma" section="6"/>. "DNS Queries over HTTPS (DoH)" <xref
   target="RFC8484" format="default"/> could be used to increase security by
   preventing eavesdropping and manipulation of DNS data by machine-in-the-middle
   attacks. The HTTPS protocol encrypts the data between the DoH client and
   the DoH-based DNS resolver.</t>
    </section>
  </middle>
  <back>
    <references>

      <name>References</name>
      <references>
        <name>Normative References</name>

        <reference anchor="DDI-C" target="https://ddialliance.org/Specification/DDI-Codebook/2.5/">
          <front>
            <title>DDI-Codebook 2.5</title>
            <author>
              <organization>DDI Alliance</organization>
            </author>
	    <date year="2014"/>
          </front>
        </reference>

        <reference anchor="DDI-L" target="https://ddialliance.org/Specification/DDI-Lifecycle/">
          <front>
            <title>DDI-Lifecycle</title>
            <author>
              <organization>DDI Alliance</organization>
            </author>
          </front>
        </reference>

        <reference anchor="DDI-XKOS" target="https://ddialliance.org/Specification/RDF/XKOS">
          <front>
            <title>XKOS - Extended Knowledge Organization System</title>
            <author>
              <organization>DDI Alliance</organization>
            </author>
          </front>
        </reference>

        <reference anchor="DDI-ID" target="https://ddi-lifecycle-technical-guide.readthedocs.io/en/latest/General%20Structures/Identification.html">
          <front>
            <title>Identification</title>
            <author><organization>DDI Alliance</organization></author>
            <date/>
          </front>
	  <refcontent>DDI Lifecycle (3.3) Technical Guide: General Structures</refcontent>
        </reference>

        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.0952.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.1034.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.1035.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.1123.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2181.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3986.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.4343.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5234.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8141.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml"/>

        <reference anchor="DDI-SDTL" target="https://ddialliance.org/products/sdtl/1.0/">
          <front>
            <title>SDTL - Structured Data Transformation Language - Version 1.0</title>
            <author>
              <organization>DDI Alliance</organization>
	    </author>
            <date month="December" year="2020"/>
          </front>
        </reference>

        <reference anchor="TLD" target="https://www.iana.org/domains/root/db">
          <front>
            <title>Root Zone Database</title>
            <author>
	      <organization>IANA</organization>
	      </author>
            <date/>
          </front>
        </reference>
      </references>

      <references>
        <name>Informative References</name>

        <reference anchor="ABNF2RS" target="https://www.msweet.org/abnf/">
          <front>
            <title>ABNF to REGEX: Regular Expression Generator</title>
            <author/>
            <date month="October" year="2019"/>
          </front>
        </reference>

        <reference anchor="ABNFGEN" target="http://www.quut.com/abnfgen/">
          <front>
            <title>abnfgen</title>
            <author initials="J." surname="Degener" fullname="Jutta Degener"/>
            <date/>
          </front>
        </reference>

        <reference anchor="ABNFPFE" target="https://author-tools.ietf.org/abnf">
          <front>
            <title>IETF Author Tools - ABNF Tools</title>
            <author><organization>IETF</organization></author>
            <date/>
          </front>
        </reference>

        <reference anchor="DDI-ALL" target="https://ddialliance.org/">
          <front>
            <title>Document, Discover and Interoperate</title>
            <author>
	      <organization>DDI Alliance</organization>
	    </author>
            <date/>
          </front>
        </reference>

        <reference anchor="DDI-CVAG" target="https://ddialliance.org/Specification/DDI-CV/AggregationMethod_1.0.html">
          <front>
            <title>DDI Controlled Vocabulary for Aggregation Method</title>
            <author><organization>DDI Alliance</organization></author>
            <date/>
          </front>
        </reference>

        <reference anchor="DDI-EXQU" target="https://ddi-lifecycle-technical-guide.readthedocs.io/en/latest/Examples/Questions.html">
          <front>
            <title>Questions</title>
            <author><organization>DDI Alliance</organization></author>
            <date/>
          </front>
	  <refcontent>DDI Lifecycle 3.3 Technical Guide: Examples</refcontent>
        </reference>

        <reference anchor="DDI-EXRV" target="https://ddi-lifecycle-technical-guide.readthedocs.io/en/latest/Examples/RepresentedVariable.html">
          <front>
            <title>Represented Variable</title>
            <author><organization>DDI Alliance</organization></author>
            <date/>
          </front>
	  <refcontent>DDI Lifecycle 3.3 Technical Guide: Examples</refcontent>
        </reference>

        <reference anchor="DDI-INTR" target="http://www.ijdc.net/article/view/66">
          <front>
            <title>Data Documentation Initiative: Toward a Standard for the Social Sciences</title>
            <author initials="M." surname="Vardigan" fullname="Mary Vardigan"/>
            <author initials="P." surname="Heus" fullname="Pascal Heus"/>
            <author initials="W." surname="Thomas" fullname="Wendy Thomas"/>
            <date month="December" year="2008"/>
          </front>
	  <seriesInfo name="DOI" value="10.2218/ijdc.v3i1.45"/>
          <refcontent>The International Journal of Digital Curation, Issue 1, Volume 3</refcontent>
        </reference>

        <reference anchor="DDI-REGI" target="https://registry.ddialliance.org/">
          <front>
            <title>Welcome to the DDI Registry</title>
            <author>
	      <organization>DDI Alliance</organization>
	    </author>
            <date/>
          </front>
        </reference>

        <reference anchor="DDI-RESO" target="https://registry.ddialliance.org/Home/Tools">
          <front>
            <title>Tools</title>
            <author>
	      <organization>DDI Alliance</organization>
	    </author>
            <date/>
          </front>
        </reference>

        <reference anchor="DUBLINC" target="https://www.dublincore.org/">
          <front>
            <title>Dublin Core</title>
            <author><organization>Dublin Core Metadata Initiative</organization></author>
            <date/>
          </front>
        </reference>

        <reference anchor="ISO3166" target="https://www.iso.org/iso-3166-country-codes.html">
          <front>
            <title>ISO 3166 Country Codes</title>
            <author>
	      <organization>ISO</organization>
	    </author>
            <date/>
          </front>
        </reference>

        <reference anchor="IS11179" target="https://www.iso.org/standard/78916.html">
          <front>
            <title>Information technology - Metadata registries (MDR) - Part
            6: Registration</title>
            <author>
	      <organization>ISO</organization>
	    </author>
            <date month="January" year="2023"/>
          </front>
          <seriesInfo name="ISO/IEC" value="11179-6:2023"/>
        </reference>

        <reference anchor="ISO.19115.2003" target="https://www.iso.org/standard/26020.html">
          <front>
            <title>Geographic information - Metadata</title>
            <author>
	      <organization>ISO</organization>
	    </author>
            <date/>
          </front>
          <seriesInfo name="ISO" value="19115:2003"/>
        </reference>

        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2782.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2483.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3401.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3402.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3403.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3833.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3958.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.4848.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8484.xml"/>

        <reference anchor="SDMX" target="https://sdmx.org/">
          <front>
            <title>SDMX</title>
            <author>
	      <organization>Statistical Data and Metadata eXchange</organization>
	    </author>
            <date/>
          </front>
        </reference>

      </references>
    </references>

    <section anchor="sect-a" numbered="true" toc="default">
      <name>Example DNS Records</name>
      <t>The examples use NAPTR <xref target="RFC3403" format="default"/> and
      SRV <xref target="RFC2782" format="default"/> <xref target="RFC3958"
      format="default"/> records. The values for the services and flags fields
      of the NAPTR records will be determined by the DDI application (<xref
      target="RFC3403" sectionFormat="comma" section="9"/>).</t>
      <t>For a description of the packet format of NAPTR, see <xref
      target="RFC3403" sectionFormat="comma" section="4.1"/>.</t>

    <section anchor="sect-a.1" numbered="true" toc="default">
      <name>Delegation of the URN Namespace "ddi"</name>
      <t>
   Example records below are defined at a.iana-servers.net and other
   authoritative name servers for the domain urn.arpa.</t>
      <t>
   The empty flag indicates that the lookup is not terminal and the
   next probe to DNS is for more NAPTR records where the new domain
   is "dns.ddialliance.org".</t>

      <sourcecode name="" type="dns-rr"><![CDATA[
; Delegation to name servers of ddialliance.org
;           order pref  flag  service  regexp replacement
ddi.urn.arpa.
   IN NAPTR 100   10    ""    ""       ""     dns.ddialliance.org.
]]></sourcecode>

    </section>
    <section anchor="sect-a.2" numbered="true" toc="default">
      <name>Delegation of DDI Agencies</name>
      <t>
   Example records below are defined at dns.ddialliance.org for
   ddi.urn.arpa.</t>
      <t>
   The empty flag indicates that the lookup is not terminal and the
   next probe to DNS is for more NAPTR records where the new domain
   is the DNS server of the relevant DDI agency.</t>

      <sourcecode name="" type="dns-rr"><![CDATA[
; Delegation to name servers of subdomains in ddi.urn.arpa, i.e.
; DDI agencies.
;           order pref  flag  service  regexp replacement
ddia1.us.ddi.urn.arpa.
   IN NAPTR 100   10    ""    ""       ""     dns.example1.edu.
ddia2.de.ddi.urn.arpa.
   IN NAPTR 100   10    ""    ""       ""     dns.example2.org.
ddia3.gb.ddi.urn.arpa.
   IN NAPTR 100   10    ""    ""       ""     dns.example3.ac.uk.
]]></sourcecode>

    </section>
    <section anchor="sect-a.3" numbered="true" toc="default">
      <name>DDI Services</name>
      <t>Example records below are defined at dns.example2.org for
      ddi.urn.arpa.</t>
      <t>The "u" flag states that the rule is terminal and that the output is
      a URI that contains the information needed to contact that DDI
      service. The "s" flag states that the rule is terminal and that the
      output of the rewrite will be a domain name for which an SRV record
      <bcp14>SHOULD</bcp14> be queried. See also <xref target="RFC4848"
      sectionFormat="comma" section="4.4"/>.</t>
      <t>The service I2R returns one instance of the resource identified by
      the given URN. That service is a repository of DDI resources available
      at <eref target="http://repos.example2.org/I2R/"/>; possibly a
      REST-based service. The service I2C returns a description of the
      resource identified by the given URN. That service is a registry of DDI
      resources available at registry-udp.example2.org port 10060.</t>
      <t>U-NAPTR permits regular expressions of a form that does a complete
      replacement of the matched string with a URI, expressed as a constant
      string. With this limited form of regular expression (<xref
      target="RFC4848" sectionFormat="comma" section="2.2"/>), applications
      using NAPTR need not implement full regular expression parsers.</t>

      <sourcecode name="" type="dns-rr"><![CDATA[
ddia2.de.ddi.urn.arpa.
;         order pref flag
  IN NAPTR 100  10  "u"  "I2R+http"                   ( ; service
                      "!.*!http://repos.example2.org/I2R/!"; regex
                         .                           ; replacement
                                                      )
  IN NAPTR 100  10  "s"  "I2C+udp"                    ( ; service
                         ""                             ; regex
                         registry._udp.example2.org. ; replacement
                                                      )
; all subdomains in ddia2.de.ddi.urn.arpa.
*.ddia2.de.ddi.urn.arpa.
ddia2.de.ddi.urn.arpa.
;         order pref flag
  IN NAPTR 100  10  "u"  "I2R+http"                   ( ; service
                      "!.*!http://repos.example2.org/I2R/!"; regex
                         .                           ; replacement
                                                      )
  IN NAPTR 100  10  "s"  "I2C+udp"                    ( ; service
                         ""                             ; regex
                         registry._udp.example2.org.; replacement
                                                      )
;_service._protocol.name
; TTL    class  SRV  priority weight port  targetreplac
_registry._udp.example2.org
  14400  IN     SRV  0        0   10060 registry-udp.example2.org.
]]></sourcecode>

    </section>
  </section>
    <section anchor="sect-b" numbered="true" toc="default">
      <name>Algorithm for DDI Service Discovery</name>
      <t>
   The description is based on the Dynamic Delegation Discovery
   System (DDDS) algorithm <xref target="RFC3402" format="default"/>.</t>
      <t>
   The application selects the appropriate service from the output
   described below and contacts the service for the given URN.</t>
      <t>
   The process can be optimized by an application cache for the NAPTR
   records of already requested DDI agencies.</t>
    
    <section anchor="sect-b.1" numbered="true" toc="default">
      <name>Application Unique String</name>
      <t>
   The Application Unique String is a DDI URN.</t>
    </section>
    <section anchor="sect-b.2" numbered="true" toc="default">
      <name>First Well Known Rule</name>
      <ol spacing="normal" type="1"><li>Extracting the characters between the second and third colon
      (the agency-identifier).</li>
        <li>Normalizing case of that string.</li>
        <li>Reversing the order of the substrings separated by dots.</li>
        <li>Appending the string ".ddi.urn.arpa" to the end to get a domain
      name.</li>
      </ol>
    </section>
    <section anchor="sect-b.3" numbered="true" toc="default">
      <name>Valid Databases</name>
      <t>
   The DNS is specified as a DDDS Database for this application, which
   uses the NAPTR DNS resource records to contain the rewrite rules
   for service discovery.</t>
      <t>
   The DNS is queried for NAPTR records for the domain name, which is
   the output of the First Well Known Rule.</t>
    </section>
    <section anchor="sect-b.4" numbered="true" toc="default">
      <name>Expected Output</name>
      <t>
   The expected output is the information necessary to connect to
   one or more authoritative servers (host, port, protocol, or URL) for an
   application service within a given DDI agency. The result is a
   list of terminal NAPTR records pointing to services available for
   the relevant DDI agency.</t>
    </section>
    </section>
    <section anchor="sect-9" numbered="false" toc="default">
      <name>Acknowledgments</name>

      <t>Many thanks to <contact fullname="Arofan Gregory"/>, <contact
      fullname="Dan Smith"/>, and <contact fullname="Wendy Thomas"/> from the
      DDI Alliance Technical Committee and <contact fullname="Peter Koch"/>
      from DENIC (German Network Information Center) for the discussion and input
      that led to this document.</t>
      <t>The following software tools have been helpful in evaluating the ABNF
      grammar and the regular expressions: an ABNF parser <xref
      target="ABNFPFE" format="default"/>, a tool that creates regular
      expressions from an ABNF grammar <xref target="ABNF2RS"
      format="default"/>, and a tool that generates random strings that match
      an ABNF grammar <xref target="ABNFGEN" format="default"/>.</t>

    </section>

  </back>

</rfc>
